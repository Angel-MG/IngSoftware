var A_=Object.defineProperty,x_=Object.defineProperties;var S_=Object.getOwnPropertyDescriptors;var Qm=Object.getOwnPropertySymbols,E_=Object.getPrototypeOf,I_=Object.prototype.hasOwnProperty,P_=Object.prototype.propertyIsEnumerable,T_=Reflect.get;var xf=(n,t,e)=>t in n?A_(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ti=(n,t)=>{for(var e in t||(t={}))I_.call(t,e)&&xf(n,e,t[e]);if(Qm)for(var e of Qm(t))P_.call(t,e)&&xf(n,e,t[e]);return n},mo=(n,t)=>x_(n,S_(t));var Ft=(n,t,e)=>xf(n,typeof t!="symbol"?t+"":t,e);var ba=(n,t,e)=>T_(E_(n),e,t);var nt=(n,t,e)=>new Promise((i,r)=>{var s=l=>{try{a(e.next(l))}catch(c){r(c)}},o=l=>{try{a(e.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((e=e.apply(n,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function iy(){return`
    <div class="login-container">
      <h1 class="login-title">Pastelería El Ángel</h1>
      <p class="login-subtitle">Sistema de Gestión</p>
      <form id="loginForm" class="login-form">
        <div class="form-group">
          <label for="username">Usuario:</label>
          <input 
            type="text" 
            id="username" 
            name="username" 
            placeholder="Ingrese su nombre de usuario" 
            required
          >
        </div>
        <div class="form-group">
          <label for="password">Contraseña:</label>
          <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="Ingrese su contraseña" 
            required
          >
        </div>
        <button type="submit">Iniciar sesión</button>
      </form>
    </div>
  `}function Tu(n){return{pending:"Pendiente",ready_for_decoration:"Listo para Decorar",completed:"Completado"}[n]||n}function L_(n){return`
    <table id="ordersTable">
      <thead>
        <tr>
          <th>ID Pedido</th>
          <th>Cliente</th>
          <th>Productos</th>
          <th>Total</th>
          <th>Estado</th>
          <th>Fecha Entrega</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        ${n.map(t=>`
          <tr>
            <td>${t.id}</td>
            <td>${t.nombreCliente}</td>
            <td>
              <ul class="product-list">
                ${t.productos.map(e=>`
                  <li>${e.cantidad}x ${e.nombre}</li>
                `).join("")}
              </ul>
            </td>
            <td>$${t.total.toFixed(2)}</td>
            <td>
              <span class="status-tag status-${t.estado}">
                ${Tu(t.estado)}
              </span>
            </td>
            <td>${t.fechaEntrega}</td>
            <td>
              <button class="edit-btn" data-id="${t.id}">Editar</button>
              <button class="delete-btn" data-id="${t.id}">Eliminar</button>
            </td>
          </tr>
        `).join("")}
      </tbody>
    </table>
  `}function Gr(n){return n?new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function C_(){const n=new Date().toISOString().split("T")[0];return`
    <div class="filters-container">
      <div class="filter-group">
        <input 
          type="text" 
          id="clienteFilter" 
          placeholder="Filtrar por cliente..."
          class="filter-input"
        >
        <div class="date-filters">
          <div class="filter-date-group">
            <label for="fechaDesde">Desde:</label>
            <input 
              type="date" 
              id="fechaDesde" 
              class="filter-input"
              max="${n}"
            >
          </div>
          <div class="filter-date-group">
            <label for="fechaHasta">Hasta:</label>
            <input 
              type="date" 
              id="fechaHasta" 
              class="filter-input"
              max="${n}"
            >
          </div>
        </div>
        <button id="aplicarFiltros" class="filter-btn">Aplicar Filtros</button>
        <button id="limpiarFiltros" class="filter-btn clear">Limpiar Filtros</button>
      </div>
    </div>
  `}function ry(n){return`
    ${C_()}
    <div class="table-container">
      <table id="historyTable">
        <thead>
          <tr>
            <th>ID Pedido</th>
            <th>Cliente</th>
            <th>Productos</th>
            <th>Total</th>
            <th>Fecha Entrega</th>
            <th>Fecha Completado</th>
          </tr>
        </thead>
        <tbody>
          ${n.map(t=>`
            <tr>
              <td>${t.id}</td>
              <td>${t.nombreCliente}</td>
              <td>
                <ul class="product-list">
                  ${t.productos.map(e=>`
                    <li>${e.cantidad}x ${e.nombre}</li>
                  `).join("")}
                </ul>
              </td>
              <td>$${t.total.toFixed(2)}</td>
              <td>${t.fechaEntrega}</td>
              <td>${Gr(t.fechaCreacion)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    </div>
  `}function k_(n=[]){const t=n.filter(i=>i.estado!=="completed"),e=n.filter(i=>i.estado==="completed");return`
    <div class="app-layout">
      <nav class="nav-menu">
        <div class="nav-container">
          <div class="nav-brand">Pastelería El Ángel</div>
          <div class="nav-links">
            <a href="#" class="nav-link active" data-section="pedidos">Pedidos Activos</a>
            <a href="#" class="nav-link" data-section="historial">Historial</a>
          </div>
          <div class="nav-actions">
            <button id="logoutBtn" class="logout-btn">
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>
      </nav>

      <div class="main-content">
        <!-- Sección de Pedidos Activos -->
        <div id="pedidosSection" class="section">
          <div class="section-header">
            <h2 class="section-title">Pedidos Activos</h2>
            <button id="newOrderBtn" class="primary-btn">Nuevo Pedido</button>
          </div>
          <div class="table-container">
            ${L_(t)}
          </div>
        </div>

        <!-- Sección de Historial -->
        <div id="historialSection" class="section" style="display: none;">
          <div class="section-header">
            <h2 class="section-title">Historial de Pedidos</h2>
          </div>
          <div id="historialContent">
            ${ry(e)}
          </div>
        </div>
      </div>
    </div>
  `}function N_(n){return`
    <table id="productionTable">
      <thead>
        <tr>
          <th>ID Pedido</th>
          <th>Cliente</th>
          <th>Productos</th>
          <th>Fecha de Entrega</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        ${n.filter(e=>e.estado==="pending").map(e=>`
          <tr class="pedido-row clickable" data-id="${e.id}">
            <td>${e.id}</td>
            <td>${e.nombreCliente}</td>
            <td>
              <ul class="product-list">
                ${e.productos.map(i=>`
                  <li>${i.cantidad}x ${i.nombre}</li>
                `).join("")}
              </ul>
            </td>
            <td>${Gr(e.fechaEntrega)}</td>
            <td>
              <span class="status-tag status-${e.estado}">
                ${Tu(e.estado)}
              </span>
            </td>
            <td>
              ${e.estado==="pending"?`
                <button class="ready-for-decoration-btn" data-id="${e.id}">
                  Listo para Decorar
                </button>
              `:"-"}
            </td>
          </tr>
        `).join("")}
      </tbody>
    </table>
  `}function sy(){return`
    <div id="orderDetailsModal" class="modal" style="display: none;">
      <div class="modal-content order-details">
        <div class="modal-header">
          <h3>Detalles del Pedido</h3>
          <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
          <!-- El contenido se llenará dinámicamente -->
        </div>
      </div>
    </div>
  `}function R_(n=[],t=[]){const e=t.filter(r=>r.tipo==="ingrediente"),i=t.filter(r=>r.tipo==="terminado");return`
    <div class="app-layout">
      <nav class="nav-menu">
        <div class="nav-container">
          <div class="nav-brand">Pastelería El Ángel</div>
          <div class="nav-links">
            <a href="#" class="nav-link active" data-section="pedidos">Pedidos</a>
            <a href="#" class="nav-link" data-section="inventario">Inventario</a>
          </div>
          <div class="nav-actions">
            <button id="logoutBtn" class="logout-btn">
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>
      </nav>

      <div class="main-content">
        <!-- Sección de Pedidos -->
        <div id="pedidosSection" class="section">
          <div class="section-header">
            <h2 class="section-title">Pedidos Actuales</h2>
          </div>
          <div class="table-container">
            ${N_(n)}
          </div>
        </div>

        <!-- Sección de Inventario -->
        <div id="inventarioSection" class="section" style="display: none;">
          <div class="section-header">
            <h2 class="section-title">Inventario</h2>
            <button id="newProductBtn" class="primary-btn">Nuevo Producto</button>
          </div>
          <div class="table-container">
            <h3 class="section-subtitle">Ingredientes</h3>
            <table>
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Cantidad</th>
                  <th>Unidad</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                ${e.map(r=>`
                  <tr>
                    <td>${r.nombre}</td>
                    <td>${r.cantidad}</td>
                    <td>${r.unidad}</td>
                    <td>
                      <button class="edit-btn" data-id="${r.id}" data-type="product">Editar</button>
                      <button class="delete-btn" data-id="${r.id}" data-type="product">Eliminar</button>
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>

            <h3 class="section-subtitle">Productos Terminados</h3>
            <table>
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Cantidad</th>
                  <th>Unidad</th>
                  <th>Precio</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                ${i.map(r=>`
                  <tr>
                    <td>${r.nombre}</td>
                    <td>${r.cantidad}</td>
                    <td>${r.unidad}</td>
                    <td>$${r.precio.toFixed(2)}</td>
                    <td>
                      <button class="edit-btn" data-id="${r.id}" data-type="product">Editar</button>
                      <button class="delete-btn" data-id="${r.id}" data-type="product">Eliminar</button>
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        </div>
        ${sy()}
      </div>
    </div>
  `}function D_(n){return`
    <table id="decorationTable">
      <thead>
        <tr>
          <th>ID Pedido</th>
          <th>Cliente</th>
          <th>Productos</th>
          <th>Fecha de Entrega</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        ${n.map(t=>`
          <tr class="pedido-row clickable" data-id="${t.id}">
            <td>${t.id}</td>
            <td>${t.nombreCliente}</td>
            <td>
              <ul class="product-list">
                ${t.productos.map(e=>`
                  <li>${e.cantidad}x ${e.nombre}</li>
                `).join("")}
              </ul>
            </td>
            <td>${Gr(t.fechaEntrega)}</td>
            <td>
              <span class="status-tag status-${t.estado}">
                ${Tu(t.estado)}
              </span>
            </td>
            <td>
              ${t.estado==="ready_for_decoration"?`
                <button class="finish-order-btn" data-id="${t.id}">
                  Finalizar Pedido
                </button>
              `:""}
            </td>
          </tr>
        `).join("")}
      </tbody>
    </table>
  `}function M_(n=[]){const t=n.filter(e=>e.estado==="ready_for_decoration"||e.estado==="pending");return`
    <div class="app-layout">
      <nav class="nav-menu">
        <div class="nav-container">
          <div class="nav-brand">Pastelería El Ángel</div>
          <div class="nav-links">
            <a href="#" class="nav-link active" data-view="decoracion">Decoración</a>
          </div>
          <div class="nav-actions">
            <button id="logoutBtn" class="logout-btn">
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>
      </nav>

      <div class="main-content">
        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Pedidos para Decorar</h2>
          </div>
          <div class="table-container">
            ${D_(t)}
          </div>
        </div>
        ${sy()}
      </div>
    </div>
  `}function O_(n=[],t=[],e=[]){const i=t.filter(s=>s.tipo==="ingrediente"),r=t.filter(s=>s.tipo==="terminado");return`
    <div class="app-layout">
      <nav class="nav-menu">
        <div class="nav-container">
          <div class="nav-brand">Pastelería El Ángel</div>
          <div class="nav-links">
            <a href="#" class="nav-link active" data-section="usuarios">Usuarios</a>
            <a href="#" class="nav-link" data-section="inventario">Inventario</a>
            <a href="#" class="nav-link" data-section="reportes">Reportes</a>
            <a href="#" class="nav-link" data-section="analitica">Predicciones</a>
          </div>
          <div class="nav-actions">
            <button id="logoutBtn" class="logout-btn">
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>
      </nav>

      <div class="main-content">
        <!-- Sección de Usuarios -->
        <div id="usuariosSection" class="section">
          <div class="section-header">
            <h2 class="section-title">Gestión de Usuarios</h2>
            <button id="newUserBtn" class="primary-btn">Crear Nuevo Usuario</button>
          </div>
          <div class="table-container">
            <table id="usersTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Usuario</th>
                  <th>Rol</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                ${n.map(s=>`
                  <tr>
                    <td>${s.id}</td>
                    <td>${s.nombreUsuario}</td>
                    <td>${s.rol}</td>
                    <td>
                      <button class="edit-btn" data-id="${s.id}" data-type="user">Editar</button>
                      <button class="delete-btn" data-id="${s.id}" data-type="user">Eliminar</button>
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Sección de Inventario -->
        <div id="inventarioSection" class="section" style="display: none;">
          <div class="section-header">
            <h2 class="section-title">Gestión de Inventario</h2>
            <button id="newProductBtn" class="primary-btn">Agregar Nuevo Producto</button>
          </div>
          <div class="table-container">
            <h3 class="section-subtitle">Ingredientes</h3>
            <table id="ingredientsTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Cantidad</th>
                  <th>Unidad</th>
                  <th>Precio</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                ${i.map(s=>`
                  <tr>
                    <td>${s.id}</td>
                    <td>${s.nombre}</td>
                    <td>${s.cantidad}</td>
                    <td>${s.unidad}</td>
                    <td>$${s.precio.toFixed(2)}</td>
                    <td>
                      <button class="edit-btn" data-id="${s.id}" data-type="product">Editar</button>
                      <button class="delete-btn" data-id="${s.id}" data-type="product">Eliminar</button>
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>

            <h3 class="section-subtitle">Productos Terminados</h3>
            <table id="finishedProductsTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Cantidad</th>
                  <th>Unidad</th>
                  <th>Precio</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                ${r.map(s=>`
                  <tr>
                    <td>${s.id}</td>
                    <td>${s.nombre}</td>
                    <td>${s.cantidad}</td>
                    <td>${s.unidad}</td>
                    <td>$${s.precio.toFixed(2)}</td>
                    <td>
                      <button class="edit-btn" data-id="${s.id}" data-type="product">Editar</button>
                      <button class="delete-btn" data-id="${s.id}" data-type="product">Eliminar</button>
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Sección de Reportes -->
        <div id="reportesSection" class="section" style="display: none;">
          <div class="section-header">
            <h2 class="section-title">Generación de Reportes</h2>
          </div>
          <div class="reports-section">
            <div class="filters-container">
              <h3>Reporte de Ventas</h3>
              <div class="filter-group">
                <div class="date-filters">
                  <div class="filter-date-group">
                    <label for="reporteFechaDesde">Desde:</label>
                    <input 
                      type="date" 
                      id="reporteFechaDesde" 
                      class="filter-input"
                      required
                    >
                  </div>
                  <div class="filter-date-group">
                    <label for="reporteFechaHasta">Hasta:</label>
                    <input 
                      type="date" 
                      id="reporteFechaHasta" 
                      class="filter-input"
                      required
                    >
                  </div>
                </div>
                <button id="generarReporteBtn" class="primary-btn">
                  Generar Reporte PDF
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Sección de Analítica -->
        <div id="analiticaSection" class="section" style="display: none;">
          <div id="analiticaContent"></div>
        </div>
      </div>

      <!-- Modal de Usuario -->
      <div id="userModal" class="modal" style="display: none;">
        <div class="modal-content">
          <h3>Crear Nuevo Usuario</h3>
          <form id="userForm" novalidate>
            <div class="form-group">
              <label for="username">Usuario:</label>
              <input 
                type="text" 
                id="username" 
                pattern="^[a-zA-Z][a-zA-Z0-9]{2,14}$"
                required
                minlength="3"
                maxlength="15"
                title="El nombre de usuario debe comenzar con una letra y puede contener letras y números"
              >
              <span class="error-message" id="username-error"></span>
            </div>
            <div class="form-group">
              <label for="password">Contraseña:</label>
              <input 
                type="password" 
                id="password" 
                required
                minlength="6"
                maxlength="20"
                title="La contraseña debe tener entre 6 y 20 caracteres"
              >
              <span class="error-message" id="password-error"></span>
            </div>
            <div class="form-group">
              <label for="role">Rol:</label>
              <select id="role" required>
                <option value="ventas">Ventas</option>
                <option value="produccion">Producción</option>
                <option value="decoracion">Decoración</option>
                <option value="admin">Administrador</option>
              </select>
            </div>
            <div class="form-actions">
              <button type="submit">Guardar</button>
              <button type="button" id="cancelUserBtn">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal de Producto -->
      <div id="productModal" class="modal" style="display: none;">
        <div class="modal-content">
          <h3>Agregar Nuevo Producto</h3>
          <form id="productForm">
            <div class="form-group">
              <label for="productName">Nombre del Producto:</label>
              <input type="text" id="productName" required>
            </div>
            <div class="form-group">
              <label for="productType">Tipo de Producto:</label>
              <select id="productType" required>
                <option value="ingrediente">Ingrediente</option>
                <option value="terminado">Producto Terminado</option>
              </select>
            </div>
            <div class="form-group">
              <label for="productQuantity">Cantidad:</label>
              <input type="number" id="productQuantity" min="0" required>
            </div>
            <div class="form-group">
              <label for="productUnit">Unidad:</label>
              <select id="productUnit" required>
                <option value="pieza">Pieza</option>
                <option value="kg">Kilogramo</option>
                <option value="g">Gramo</option>
                <option value="litro">Litro</option>
                <option value="ml">Mililitro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="productPrice">Precio:</label>
              <input type="number" id="productPrice" min="0" step="0.01" required>
            </div>
            <div class="form-actions">
              <button type="submit">Guardar</button>
              <button type="button" id="cancelProductBtn">Cancelar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  `}var Jm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},F_=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[e++],o=n[e++],a=n[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ay={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),i.push(e[h],e[f],e[m],e[p])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(oy(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):F_(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;const c=r<n.length?e[n.charAt(r)]:64;++r;const f=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||f==null)throw new V_;const m=s<<2|a>>4;if(i.push(m),c!==64){const p=a<<4&240|c>>2;if(i.push(p),f!==64){const v=c<<6&192|f;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class V_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B_=function(n){const t=oy(n);return ay.encodeByteArray(t,!0)},sd=function(n){return B_(n).replace(/\./g,"")},ly=function(n){try{return ay.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=()=>j_().__FIREBASE_DEFAULTS__,z_=()=>{if(typeof process=="undefined"||typeof Jm=="undefined")return;const n=Jm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q_=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=n&&ly(n[1]);return t&&JSON.parse(t)},kd=()=>{try{return U_()||z_()||q_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cy=n=>{var t,e;return(e=(t=kd())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},H_=n=>{const t=cy(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},uy=()=>{var n;return(n=kd())===null||n===void 0?void 0:n.config},hy=n=>{var t;return(t=kd())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sd(JSON.stringify(e)),sd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G_(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function K_(){var n;const t=(n=kd())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(e){return!1}}function Y_(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function X_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J_(){const n=hi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Z_(){return!K_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tw(){try{return typeof indexedDB=="object"}catch(n){return!1}}function ew(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="FirebaseError";class Bs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=nw,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?iw(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Bs(r,a,i)}}function iw(n,t){return n.replace(rw,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const rw=/\{\$([^}]+)}/g;function sw(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function od(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const s=n[r],o=t[r];if(Zm(s)&&Zm(o)){if(!od(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function Zm(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ow(n,t){const e=new aw(n,t);return e.subscribe.bind(e)}class aw{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");lw(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Sf),r.error===void 0&&(r.error=Sf),r.complete===void 0&&(r.complete=Sf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(o){}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lw(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(n){return n&&n._delegate?n._delegate:n}class Ba{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new W_;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch(r){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hw(t))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch(e){}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch(s){}}}}clearInstance(t=Sa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return nt(this,null,function*(){const t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Sa){return this.instances.has(t)}getOptions(t=Sa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch(s){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uw(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(r){}return i||null}normalizeInstanceIdentifier(t=Sa){return this.component?this.component.multipleInstances?t:Sa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uw(n){return n===Sa?void 0:n}function hw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new cw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const fw={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},pw=Pe.INFO,gw={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},mw=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=gw[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rg{constructor(t){this.name=t,this._logLevel=pw,this._logHandler=mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const yw=(n,t)=>t.some(e=>n instanceof e);let t0,e0;function vw(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bw(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dy=new WeakMap,sp=new WeakMap,fy=new WeakMap,Ef=new WeakMap,sg=new WeakMap;function _w(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(Mo(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&dy.set(e,n)}).catch(()=>{}),sg.set(t,n),t}function ww(n){if(sp.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});sp.set(n,t)}let op={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return sp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||fy.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Mo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Aw(n){op=n(op)}function xw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(If(this),t,...e);return fy.set(i,t.sort?t.sort():[t]),Mo(i)}:bw().includes(n)?function(...t){return n.apply(If(this),t),Mo(dy.get(this))}:function(...t){return Mo(n.apply(If(this),t))}}function Sw(n){return typeof n=="function"?xw(n):(n instanceof IDBTransaction&&ww(n),yw(n,vw())?new Proxy(n,op):n)}function Mo(n){if(n instanceof IDBRequest)return _w(n);if(Ef.has(n))return Ef.get(n);const t=Sw(n);return t!==n&&(Ef.set(n,t),sg.set(t,n)),t}const If=n=>sg.get(n);function Ew(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,t),a=Mo(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Mo(o.result),l.oldVersion,l.newVersion,Mo(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Iw=["get","getKey","getAll","getAllKeys","count"],Pw=["put","add","delete","clear"],Pf=new Map;function n0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Pf.get(t))return Pf.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=Pw.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Iw.includes(e)))return;const s=function(o,...a){return nt(this,null,function*(){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(yield Promise.all([c[e](...a),r&&l.done]))[0]})};return Pf.set(t,s),s}Aw(n=>mo(ti({},n),{get:(t,e,i)=>n0(t,e)||n.get(t,e,i),has:(t,e)=>!!n0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Lw(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function Lw(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ap="@firebase/app",i0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new rg("@firebase/app"),Cw="@firebase/app-compat",kw="@firebase/analytics-compat",Nw="@firebase/analytics",Rw="@firebase/app-check-compat",Dw="@firebase/app-check",Mw="@firebase/auth",Ow="@firebase/auth-compat",Fw="@firebase/database",Vw="@firebase/data-connect",Bw="@firebase/database-compat",jw="@firebase/functions",Uw="@firebase/functions-compat",zw="@firebase/installations",qw="@firebase/installations-compat",Hw="@firebase/messaging",Ww="@firebase/messaging-compat",$w="@firebase/performance",Gw="@firebase/performance-compat",Kw="@firebase/remote-config",Yw="@firebase/remote-config-compat",Xw="@firebase/storage",Qw="@firebase/storage-compat",Jw="@firebase/firestore",Zw="@firebase/vertexai-preview",tA="@firebase/firestore-compat",eA="firebase",nA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",iA={[ap]:"fire-core",[Cw]:"fire-core-compat",[Nw]:"fire-analytics",[kw]:"fire-analytics-compat",[Dw]:"fire-app-check",[Rw]:"fire-app-check-compat",[Mw]:"fire-auth",[Ow]:"fire-auth-compat",[Fw]:"fire-rtdb",[Vw]:"fire-data-connect",[Bw]:"fire-rtdb-compat",[jw]:"fire-fn",[Uw]:"fire-fn-compat",[zw]:"fire-iid",[qw]:"fire-iid-compat",[Hw]:"fire-fcm",[Ww]:"fire-fcm-compat",[$w]:"fire-perf",[Gw]:"fire-perf-compat",[Kw]:"fire-rc",[Yw]:"fire-rc-compat",[Xw]:"fire-gcs",[Qw]:"fire-gcs-compat",[Jw]:"fire-fst",[tA]:"fire-fst-compat",[Zw]:"fire-vertex","fire-js":"fire-js",[eA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,rA=new Map,cp=new Map;function r0(n,t){try{n.container.addComponent(t)}catch(e){Ds.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ql(n){const t=n.name;if(cp.has(t))return Ds.debug(`There were multiple attempts to register component ${t}.`),!1;cp.set(t,n);for(const e of ad.values())r0(e,n);for(const e of rA.values())r0(e,n);return!0}function og(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Eo(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new Lu("app","Firebase",sA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=nA;function py(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:lp,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Oo.create("bad-app-name",{appName:String(r)});if(e||(e=uy()),!e)throw Oo.create("no-options");const s=ad.get(r);if(s){if(od(e,s.options)&&od(i,s.config))return s;throw Oo.create("duplicate-app",{appName:r})}const o=new dw(r);for(const l of cp.values())o.addComponent(l);const a=new oA(e,i,o);return ad.set(r,a),a}function gy(n=lp){const t=ad.get(n);if(!t&&n===lp&&uy())return py();if(!t)throw Oo.create("no-app",{appName:n});return t}function Fo(n,t,e){var i;let r=(i=iA[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}ql(new Ba(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",lA=1,cu="firebase-heartbeat-store";let Tf=null;function my(){return Tf||(Tf=Ew(aA,lA,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(cu)}catch(e){console.warn(e)}}}}).catch(n=>{throw Oo.create("idb-open",{originalErrorMessage:n.message})})),Tf}function cA(n){return nt(this,null,function*(){try{const e=(yield my()).transaction(cu),i=yield e.objectStore(cu).get(yy(n));return yield e.done,i}catch(t){if(t instanceof Bs)Ds.warn(t.message);else{const e=Oo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ds.warn(e.message)}}})}function s0(n,t){return nt(this,null,function*(){try{const i=(yield my()).transaction(cu,"readwrite");yield i.objectStore(cu).put(t,yy(n)),yield i.done}catch(e){if(e instanceof Bs)Ds.warn(e.message);else{const i=Oo.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(i.message)}}})}function yy(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=1024,hA=30*24*60*60*1e3;class dA{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pA(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return nt(this,null,function*(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=o0();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ds.warn(i)}})}getHeartbeatsHeader(){return nt(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=o0(),{heartbeatsToSend:i,unsentEntries:r}=fA(this._heartbeatsCache.heartbeats),s=sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ds.warn(e),""}})}}function o0(){return new Date().toISOString().substring(0,10)}function fA(n,t=uA){const e=[];let i=n.slice();for(const r of n){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),a0(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),a0(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class pA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return nt(this,null,function*(){return tw()?ew().then(()=>!0).catch(()=>!1):!1})}read(){return nt(this,null,function*(){if(yield this._canUseIndexedDBPromise){const e=yield cA(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return nt(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){const r=yield this.read();return s0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return nt(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){const r=yield this.read();return s0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}}function a0(n){return sd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n){ql(new Ba("platform-logger",t=>new Tw(t),"PRIVATE")),ql(new Ba("heartbeat",t=>new dA(t),"PRIVATE")),Fo(ap,i0,n),Fo(ap,i0,"esm2017"),Fo("fire-js","")}gA("");var mA="firebase",yA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo(mA,yA,"app");var l0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ka,vy;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,A){function C(){}C.prototype=A.prototype,P.D=A.prototype,P.prototype=new C,P.prototype.constructor=P,P.C=function(D,E,I){for(var R=Array(arguments.length-2),G=2;G<arguments.length;G++)R[G-2]=arguments[G];return A.prototype[E].apply(D,R)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,A,C){C||(C=0);var D=Array(16);if(typeof A=="string")for(var E=0;16>E;++E)D[E]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(E=0;16>E;++E)D[E]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=P.g[0],C=P.g[1],E=P.g[2];var I=P.g[3],R=A+(I^C&(E^I))+D[0]+3614090360&4294967295;A=C+(R<<7&4294967295|R>>>25),R=I+(E^A&(C^E))+D[1]+3905402710&4294967295,I=A+(R<<12&4294967295|R>>>20),R=E+(C^I&(A^C))+D[2]+606105819&4294967295,E=I+(R<<17&4294967295|R>>>15),R=C+(A^E&(I^A))+D[3]+3250441966&4294967295,C=E+(R<<22&4294967295|R>>>10),R=A+(I^C&(E^I))+D[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=I+(E^A&(C^E))+D[5]+1200080426&4294967295,I=A+(R<<12&4294967295|R>>>20),R=E+(C^I&(A^C))+D[6]+2821735955&4294967295,E=I+(R<<17&4294967295|R>>>15),R=C+(A^E&(I^A))+D[7]+4249261313&4294967295,C=E+(R<<22&4294967295|R>>>10),R=A+(I^C&(E^I))+D[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=I+(E^A&(C^E))+D[9]+2336552879&4294967295,I=A+(R<<12&4294967295|R>>>20),R=E+(C^I&(A^C))+D[10]+4294925233&4294967295,E=I+(R<<17&4294967295|R>>>15),R=C+(A^E&(I^A))+D[11]+2304563134&4294967295,C=E+(R<<22&4294967295|R>>>10),R=A+(I^C&(E^I))+D[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=I+(E^A&(C^E))+D[13]+4254626195&4294967295,I=A+(R<<12&4294967295|R>>>20),R=E+(C^I&(A^C))+D[14]+2792965006&4294967295,E=I+(R<<17&4294967295|R>>>15),R=C+(A^E&(I^A))+D[15]+1236535329&4294967295,C=E+(R<<22&4294967295|R>>>10),R=A+(E^I&(C^E))+D[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=I+(C^E&(A^C))+D[6]+3225465664&4294967295,I=A+(R<<9&4294967295|R>>>23),R=E+(A^C&(I^A))+D[11]+643717713&4294967295,E=I+(R<<14&4294967295|R>>>18),R=C+(I^A&(E^I))+D[0]+3921069994&4294967295,C=E+(R<<20&4294967295|R>>>12),R=A+(E^I&(C^E))+D[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=I+(C^E&(A^C))+D[10]+38016083&4294967295,I=A+(R<<9&4294967295|R>>>23),R=E+(A^C&(I^A))+D[15]+3634488961&4294967295,E=I+(R<<14&4294967295|R>>>18),R=C+(I^A&(E^I))+D[4]+3889429448&4294967295,C=E+(R<<20&4294967295|R>>>12),R=A+(E^I&(C^E))+D[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=I+(C^E&(A^C))+D[14]+3275163606&4294967295,I=A+(R<<9&4294967295|R>>>23),R=E+(A^C&(I^A))+D[3]+4107603335&4294967295,E=I+(R<<14&4294967295|R>>>18),R=C+(I^A&(E^I))+D[8]+1163531501&4294967295,C=E+(R<<20&4294967295|R>>>12),R=A+(E^I&(C^E))+D[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=I+(C^E&(A^C))+D[2]+4243563512&4294967295,I=A+(R<<9&4294967295|R>>>23),R=E+(A^C&(I^A))+D[7]+1735328473&4294967295,E=I+(R<<14&4294967295|R>>>18),R=C+(I^A&(E^I))+D[12]+2368359562&4294967295,C=E+(R<<20&4294967295|R>>>12),R=A+(C^E^I)+D[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=I+(A^C^E)+D[8]+2272392833&4294967295,I=A+(R<<11&4294967295|R>>>21),R=E+(I^A^C)+D[11]+1839030562&4294967295,E=I+(R<<16&4294967295|R>>>16),R=C+(E^I^A)+D[14]+4259657740&4294967295,C=E+(R<<23&4294967295|R>>>9),R=A+(C^E^I)+D[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=I+(A^C^E)+D[4]+1272893353&4294967295,I=A+(R<<11&4294967295|R>>>21),R=E+(I^A^C)+D[7]+4139469664&4294967295,E=I+(R<<16&4294967295|R>>>16),R=C+(E^I^A)+D[10]+3200236656&4294967295,C=E+(R<<23&4294967295|R>>>9),R=A+(C^E^I)+D[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=I+(A^C^E)+D[0]+3936430074&4294967295,I=A+(R<<11&4294967295|R>>>21),R=E+(I^A^C)+D[3]+3572445317&4294967295,E=I+(R<<16&4294967295|R>>>16),R=C+(E^I^A)+D[6]+76029189&4294967295,C=E+(R<<23&4294967295|R>>>9),R=A+(C^E^I)+D[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=I+(A^C^E)+D[12]+3873151461&4294967295,I=A+(R<<11&4294967295|R>>>21),R=E+(I^A^C)+D[15]+530742520&4294967295,E=I+(R<<16&4294967295|R>>>16),R=C+(E^I^A)+D[2]+3299628645&4294967295,C=E+(R<<23&4294967295|R>>>9),R=A+(E^(C|~I))+D[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=I+(C^(A|~E))+D[7]+1126891415&4294967295,I=A+(R<<10&4294967295|R>>>22),R=E+(A^(I|~C))+D[14]+2878612391&4294967295,E=I+(R<<15&4294967295|R>>>17),R=C+(I^(E|~A))+D[5]+4237533241&4294967295,C=E+(R<<21&4294967295|R>>>11),R=A+(E^(C|~I))+D[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=I+(C^(A|~E))+D[3]+2399980690&4294967295,I=A+(R<<10&4294967295|R>>>22),R=E+(A^(I|~C))+D[10]+4293915773&4294967295,E=I+(R<<15&4294967295|R>>>17),R=C+(I^(E|~A))+D[1]+2240044497&4294967295,C=E+(R<<21&4294967295|R>>>11),R=A+(E^(C|~I))+D[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=I+(C^(A|~E))+D[15]+4264355552&4294967295,I=A+(R<<10&4294967295|R>>>22),R=E+(A^(I|~C))+D[6]+2734768916&4294967295,E=I+(R<<15&4294967295|R>>>17),R=C+(I^(E|~A))+D[13]+1309151649&4294967295,C=E+(R<<21&4294967295|R>>>11),R=A+(E^(C|~I))+D[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=I+(C^(A|~E))+D[11]+3174756917&4294967295,I=A+(R<<10&4294967295|R>>>22),R=E+(A^(I|~C))+D[2]+718787259&4294967295,E=I+(R<<15&4294967295|R>>>17),R=C+(I^(E|~A))+D[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(E+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+E&4294967295,P.g[3]=P.g[3]+I&4294967295}i.prototype.u=function(P,A){A===void 0&&(A=P.length);for(var C=A-this.blockSize,D=this.B,E=this.h,I=0;I<A;){if(E==0)for(;I<=C;)r(this,P,I),I+=this.blockSize;if(typeof P=="string"){for(;I<A;)if(D[E++]=P.charCodeAt(I++),E==this.blockSize){r(this,D),E=0;break}}else for(;I<A;)if(D[E++]=P[I++],E==this.blockSize){r(this,D),E=0;break}}this.h=E,this.o+=A},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;var C=8*this.o;for(A=P.length-8;A<P.length;++A)P[A]=C&255,C/=256;for(this.u(P),P=Array(16),A=C=0;4>A;++A)for(var D=0;32>D;D+=8)P[C++]=this.g[A]>>>D&255;return P};function s(P,A){var C=a;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=A(P)}function o(P,A){this.h=A;for(var C=[],D=!0,E=P.length-1;0<=E;E--){var I=P[E]|0;D&&I==A||(C[E]=I,D=!1)}this.g=C}var a={};function l(P){return-128<=P&&128>P?s(P,function(A){return new o([A|0],0>A?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return S(c(-P));for(var A=[],C=1,D=0;P>=C;D++)A[D]=P/C|0,C*=4294967296;return new o(A,0)}function h(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return S(h(P.substring(1),A));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(A,8)),D=f,E=0;E<P.length;E+=8){var I=Math.min(8,P.length-E),R=parseInt(P.substring(E,E+I),A);8>I?(I=c(Math.pow(A,I)),D=D.j(I).add(c(R))):(D=D.j(C),D=D.add(c(R)))}return D}var f=l(0),m=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-S(this).m();for(var P=0,A=1,C=0;C<this.g.length;C++){var D=this.i(C);P+=(0<=D?D:4294967296+D)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(_(this))return"-"+S(this).toString(P);for(var A=c(Math.pow(P,6)),C=this,D="";;){var E=O(C,A).g;C=x(C,E.j(A));var I=((0<C.g.length?C.g[0]:C.h)>>>0).toString(P);if(C=E,v(C))return I+D;for(;6>I.length;)I="0"+I;D=I+D}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(var A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function _(P){return P.h==-1}n.l=function(P){return P=x(this,P),_(P)?-1:v(P)?0:1};function S(P){for(var A=P.g.length,C=[],D=0;D<A;D++)C[D]=~P.g[D];return new o(C,~P.h).add(m)}n.abs=function(){return _(this)?S(this):this},n.add=function(P){for(var A=Math.max(this.g.length,P.g.length),C=[],D=0,E=0;E<=A;E++){var I=D+(this.i(E)&65535)+(P.i(E)&65535),R=(I>>>16)+(this.i(E)>>>16)+(P.i(E)>>>16);D=R>>>16,I&=65535,R&=65535,C[E]=R<<16|I}return new o(C,C[C.length-1]&-2147483648?-1:0)};function x(P,A){return P.add(S(A))}n.j=function(P){if(v(this)||v(P))return f;if(_(this))return _(P)?S(this).j(S(P)):S(S(this).j(P));if(_(P))return S(this.j(S(P)));if(0>this.l(p)&&0>P.l(p))return c(this.m()*P.m());for(var A=this.g.length+P.g.length,C=[],D=0;D<2*A;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var E=0;E<P.g.length;E++){var I=this.i(D)>>>16,R=this.i(D)&65535,G=P.i(E)>>>16,ot=P.i(E)&65535;C[2*D+2*E]+=R*ot,T(C,2*D+2*E),C[2*D+2*E+1]+=I*ot,T(C,2*D+2*E+1),C[2*D+2*E+1]+=R*G,T(C,2*D+2*E+1),C[2*D+2*E+2]+=I*G,T(C,2*D+2*E+2)}for(D=0;D<A;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=A;D<2*A;D++)C[D]=0;return new o(C,0)};function T(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function N(P,A){this.g=P,this.h=A}function O(P,A){if(v(A))throw Error("division by zero");if(v(P))return new N(f,f);if(_(P))return A=O(S(P),A),new N(S(A.g),S(A.h));if(_(A))return A=O(P,S(A)),new N(S(A.g),A.h);if(30<P.g.length){if(_(P)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var C=m,D=A;0>=D.l(P);)C=B(C),D=B(D);var E=W(C,1),I=W(D,1);for(D=W(D,2),C=W(C,2);!v(D);){var R=I.add(D);0>=R.l(P)&&(E=E.add(C),I=R),D=W(D,1),C=W(C,1)}return A=x(P,E.j(A)),new N(E,A)}for(E=f;0<=P.l(A);){for(C=Math.max(1,Math.floor(P.m()/A.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),I=c(C),R=I.j(A);_(R)||0<R.l(P);)C-=D,I=c(C),R=I.j(A);v(I)&&(I=m),E=E.add(I),P=x(P,R)}return new N(E,P)}n.A=function(P){return O(this,P).h},n.and=function(P){for(var A=Math.max(this.g.length,P.g.length),C=[],D=0;D<A;D++)C[D]=this.i(D)&P.i(D);return new o(C,this.h&P.h)},n.or=function(P){for(var A=Math.max(this.g.length,P.g.length),C=[],D=0;D<A;D++)C[D]=this.i(D)|P.i(D);return new o(C,this.h|P.h)},n.xor=function(P){for(var A=Math.max(this.g.length,P.g.length),C=[],D=0;D<A;D++)C[D]=this.i(D)^P.i(D);return new o(C,this.h^P.h)};function B(P){for(var A=P.g.length+1,C=[],D=0;D<A;D++)C[D]=P.i(D)<<1|P.i(D-1)>>>31;return new o(C,P.h)}function W(P,A){var C=A>>5;A%=32;for(var D=P.g.length-C,E=[],I=0;I<D;I++)E[I]=0<A?P.i(I+C)>>>A|P.i(I+C+1)<<32-A:P.i(I+C);return new o(E,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vy=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ka=o}).apply(typeof l0!="undefined"?l0:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var ph=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var by,Dc,_y,jh,up,wy,Ay,xy;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,w,k){return d==Array.prototype||d==Object.prototype||(d[w]=k.value),d};function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var w=0;w<d.length;++w){var k=d[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=e(this);function r(d,w){if(w)t:{var k=i;d=d.split(".");for(var z=0;z<d.length-1;z++){var ht=d[z];if(!(ht in k))break t;k=k[ht]}d=d[d.length-1],z=k[d],w=w(z),w!=z&&w!=null&&t(k,d,{configurable:!0,writable:!0,value:w})}}function s(d,w){d instanceof String&&(d+="");var k=0,z=!1,ht={next:function(){if(!z&&k<d.length){var vt=k++;return{value:w(vt,d[vt]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ht[Symbol.iterator]=function(){return ht},ht}r("Array.prototype.values",function(d){return d||function(){return s(this,function(w,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var w=typeof d;return w=w!="object"?w:d?Array.isArray(d)?"array":w:"null",w=="array"||w=="object"&&typeof d.length=="number"}function c(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function h(d,w,k){return d.call.apply(d.bind,arguments)}function f(d,w,k){if(!d)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ht,z),d.apply(w,ht)}}return function(){return d.apply(w,arguments)}}function m(d,w,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function p(d,w){var k=Array.prototype.slice.call(arguments,1);return function(){var z=k.slice();return z.push.apply(z,arguments),d.apply(this,z)}}function v(d,w){function k(){}k.prototype=w.prototype,d.aa=w.prototype,d.prototype=new k,d.prototype.constructor=d,d.Qb=function(z,ht,vt){for(var Ct=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)Ct[fe-2]=arguments[fe];return w.prototype[ht].apply(z,Ct)}}function _(d){const w=d.length;if(0<w){const k=Array(w);for(let z=0;z<w;z++)k[z]=d[z];return k}return[]}function S(d,w){for(let k=1;k<arguments.length;k++){const z=arguments[k];if(l(z)){const ht=d.length||0,vt=z.length||0;d.length=ht+vt;for(let Ct=0;Ct<vt;Ct++)d[ht+Ct]=z[Ct]}else d.push(z)}}class x{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function T(d){return/^[\s\xa0]*$/.test(d)}function N(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var B=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function W(d,w,k){for(const z in d)w.call(k,d[z],z,d)}function P(d,w){for(const k in d)w.call(void 0,d[k],k,d)}function A(d){const w={};for(const k in d)w[k]=d[k];return w}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(d,w){let k,z;for(let ht=1;ht<arguments.length;ht++){z=arguments[ht];for(k in z)d[k]=z[k];for(let vt=0;vt<C.length;vt++)k=C[vt],Object.prototype.hasOwnProperty.call(z,k)&&(d[k]=z[k])}}function E(d){var w=1;d=d.split(":");const k=[];for(;0<w&&d.length;)k.push(d.shift()),w--;return d.length&&k.push(d.join(":")),k}function I(d){a.setTimeout(()=>{throw d},0)}function R(){var d=J;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class G{constructor(){this.h=this.g=null}add(w,k){const z=ot.get();z.set(w,k),this.h?this.h.next=z:this.g=z,this.h=z}}var ot=new x(()=>new Y,d=>d.reset());class Y{constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let K,et=!1,J=new G,ct=()=>{const d=a.Promise.resolve(void 0);K=()=>{d.then(_t)}};var _t=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(k){I(k)}var w=ot;w.j(d),100>w.h&&(w.h++,d.next=w.g,w.g=d)}et=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const k=()=>{};a.addEventListener("test",k,w),a.removeEventListener("test",k,w)}catch(k){}return d}();function tt(d,w){if(H.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var k=this.type=d.type,z=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget){if(B){t:{try{O(w.nodeName);var ht=!0;break t}catch(vt){}ht=!1}ht||(w=null)}}else k=="mouseover"?w=d.fromElement:k=="mouseout"&&(w=d.toElement);this.relatedTarget=w,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:it[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&tt.aa.h.call(this)}}v(tt,H);var it={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function bt(d,w,k,z,ht){this.listener=d,this.proxy=null,this.src=w,this.type=k,this.capture=!!z,this.ha=ht,this.key=++gt,this.da=this.fa=!1}function Nt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function kt(d){this.src=d,this.g={},this.h=0}kt.prototype.add=function(d,w,k,z,ht){var vt=d.toString();d=this.g[vt],d||(d=this.g[vt]=[],this.h++);var Ct=Vt(d,w,z,ht);return-1<Ct?(w=d[Ct],k||(w.fa=!1)):(w=new bt(w,this.src,vt,!!z,ht),w.fa=k,d.push(w)),w};function Ot(d,w){var k=w.type;if(k in d.g){var z=d.g[k],ht=Array.prototype.indexOf.call(z,w,void 0),vt;(vt=0<=ht)&&Array.prototype.splice.call(z,ht,1),vt&&(Nt(w),d.g[k].length==0&&(delete d.g[k],d.h--))}}function Vt(d,w,k,z){for(var ht=0;ht<d.length;++ht){var vt=d[ht];if(!vt.da&&vt.listener==w&&vt.capture==!!k&&vt.ha==z)return ht}return-1}var te="closure_lm_"+(1e6*Math.random()|0),xt={};function rt(d,w,k,z,ht){if(Array.isArray(w)){for(var vt=0;vt<w.length;vt++)rt(d,w[vt],k,z,ht);return null}return k=de(k),d&&d[pt]?d.K(w,k,c(z)?!!z.capture:!!z,ht):he(d,w,k,!1,z,ht)}function he(d,w,k,z,ht,vt){if(!w)throw Error("Invalid event type");var Ct=c(ht)?!!ht.capture:!!ht,fe=Qt(d);if(fe||(d[te]=fe=new kt(d)),k=fe.add(w,k,z,Ct,vt),k.proxy)return k;if(z=Yt(),k.proxy=z,z.src=d,z.listener=k,d.addEventListener)X||(ht=Ct),ht===void 0&&(ht=!1),d.addEventListener(w.toString(),z,ht);else if(d.attachEvent)d.attachEvent(qt(w.toString()),z);else if(d.addListener&&d.removeListener)d.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Yt(){function d(k){return w.call(d.src,d.listener,k)}const w=Ut;return d}function Dt(d,w,k,z,ht){if(Array.isArray(w))for(var vt=0;vt<w.length;vt++)Dt(d,w[vt],k,z,ht);else z=c(z)?!!z.capture:!!z,k=de(k),d&&d[pt]?(d=d.i,w=String(w).toString(),w in d.g&&(vt=d.g[w],k=Vt(vt,k,z,ht),-1<k&&(Nt(vt[k]),Array.prototype.splice.call(vt,k,1),vt.length==0&&(delete d.g[w],d.h--)))):d&&(d=Qt(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Vt(w,k,z,ht)),(k=-1<d?w[d]:null)&&Mt(k))}function Mt(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[pt])Ot(w.i,d);else{var k=d.type,z=d.proxy;w.removeEventListener?w.removeEventListener(k,z,d.capture):w.detachEvent?w.detachEvent(qt(k),z):w.addListener&&w.removeListener&&w.removeListener(z),(k=Qt(w))?(Ot(k,d),k.h==0&&(k.src=null,w[te]=null)):Nt(d)}}}function qt(d){return d in xt?xt[d]:xt[d]="on"+d}function Ut(d,w){if(d.da)d=!0;else{w=new tt(w,this);var k=d.listener,z=d.ha||d.src;d.fa&&Mt(d),d=k.call(z,w)}return d}function Qt(d){return d=d[te],d instanceof kt?d:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(d){return typeof d=="function"?d:(d[ae]||(d[ae]=function(w){return d.handleEvent(w)}),d[ae])}function Jt(){M.call(this),this.i=new kt(this),this.M=this,this.F=null}v(Jt,M),Jt.prototype[pt]=!0,Jt.prototype.removeEventListener=function(d,w,k,z){Dt(this,d,w,k,z)};function se(d,w){var k,z=d.F;if(z)for(k=[];z;z=z.F)k.push(z);if(d=d.M,z=w.type||w,typeof w=="string")w=new H(w,d);else if(w instanceof H)w.target=w.target||d;else{var ht=w;w=new H(z,d),D(w,ht)}if(ht=!0,k)for(var vt=k.length-1;0<=vt;vt--){var Ct=w.g=k[vt];ht=Ce(Ct,z,!0,w)&&ht}if(Ct=w.g=d,ht=Ce(Ct,z,!0,w)&&ht,ht=Ce(Ct,z,!1,w)&&ht,k)for(vt=0;vt<k.length;vt++)Ct=w.g=k[vt],ht=Ce(Ct,z,!1,w)&&ht}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var d=this.i,w;for(w in d.g){for(var k=d.g[w],z=0;z<k.length;z++)Nt(k[z]);delete d.g[w],d.h--}}this.F=null},Jt.prototype.K=function(d,w,k,z){return this.i.add(String(d),w,!1,k,z)},Jt.prototype.L=function(d,w,k,z){return this.i.add(String(d),w,!0,k,z)};function Ce(d,w,k,z){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();for(var ht=!0,vt=0;vt<w.length;++vt){var Ct=w[vt];if(Ct&&!Ct.da&&Ct.capture==k){var fe=Ct.listener,Ae=Ct.ha||Ct.src;Ct.fa&&Ot(d.i,Ct),ht=fe.call(Ae,z)!==!1&&ht}}return ht&&!z.defaultPrevented}function re(d,w,k){if(typeof d=="function")k&&(d=m(d,k));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:a.setTimeout(d,w||0)}function _e(d){d.g=re(()=>{d.g=null,d.i&&(d.i=!1,_e(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class Ht extends M{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:_e(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(d){M.call(this),this.h=d,this.g={}}v(un,M);var Ie=[];function wi(d){W(d.g,function(w,k){this.g.hasOwnProperty(k)&&Mt(w)},d),d.g={}}un.prototype.N=function(){un.aa.N.call(this),wi(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=a.JSON.stringify,Ke=a.JSON.parse,Ki=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Te(){}Te.prototype.h=null;function Tr(d){return d.h||(d.h=d.i())}function Ze(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){H.call(this,"d")}v(Mi,H);function Ye(){H.call(this,"c")}v(Ye,H);var ee={},ke=null;function Yi(){return ke=ke||new Jt}ee.La="serverreachability";function En(d){H.call(this,ee.La,d)}v(En,H);function Xn(d){const w=Yi();se(w,new En(w))}ee.STAT_EVENT="statevent";function Oi(d,w){H.call(this,ee.STAT_EVENT,d),this.stat=w}v(Oi,H);function $t(d){const w=Yi();se(w,new Oi(w,d))}ee.Ma="timingevent";function Ai(d,w){H.call(this,ee.Ma,d),this.size=w}v(Ai,H);function Qn(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},w)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function mn(d,w,k,z,ht,vt){d.info(function(){if(d.g)if(vt)for(var Ct="",fe=vt.split("&"),Ae=0;Ae<fe.length;Ae++){var pe=fe[Ae].split("=");if(1<pe.length){var Fe=pe[0];pe=pe[1];var We=Fe.split("_");Ct=2<=We.length&&We[1]=="type"?Ct+(Fe+"="+pe+"&"):Ct+(Fe+"=redacted&")}}else Ct=null;else Ct=vt;return"XMLHTTP REQ ("+z+") [attempt "+ht+"]: "+w+`
`+k+`
`+Ct})}function hn(d,w,k,z,ht,vt,Ct){d.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ht+"]: "+w+`
`+k+`
`+vt+" "+Ct})}function Pn(d,w,k,z){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+or(d,k)+(z?" "+z:"")})}function js(d,w){d.info(function(){return"TIMEOUT: "+w})}In.prototype.info=function(){};function or(d,w){if(!d.g)return w;if(!w)return null;try{var k=JSON.parse(w);if(k){for(d=0;d<k.length;d++)if(Array.isArray(k[d])){var z=k[d];if(!(2>z.length)){var ht=z[1];if(Array.isArray(ht)&&!(1>ht.length)){var vt=ht[0];if(vt!="noop"&&vt!="stop"&&vt!="close")for(var Ct=1;Ct<ht.length;Ct++)ht[Ct]=""}}}}return De(k)}catch(fe){return w}}var Jn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pi;function gi(){}v(gi,Te),gi.prototype.g=function(){return new XMLHttpRequest},gi.prototype.i=function(){return{}},pi=new gi;function yn(d,w,k,z){this.j=d,this.i=w,this.l=k,this.R=z||1,this.U=new un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}var Lr={},Cr={};function kr(d,w,k){d.L=1,d.v=ls(mi(w)),d.m=k,d.P=!0,is(d,null)}function is(d,w){d.F=Date.now(),Us(d),d.A=mi(d.v);var k=d.A,z=d.R;Array.isArray(z)||(z=[String(z)]),le(k.i,"t",z),d.C=0,k=d.j.J,d.h=new Fi,d.g=F(d.j,k?w:null,!d.m),0<d.O&&(d.M=new Ht(m(d.Y,d,d.g),d.O)),w=d.U,k=d.g,z=d.ca;var ht="readystatechange";Array.isArray(ht)||(ht&&(Ie[0]=ht.toString()),ht=Ie);for(var vt=0;vt<ht.length;vt++){var Ct=rt(k,ht[vt],z||w.handleEvent,!1,w.h||w);if(!Ct)break;w.g[Ct.key]=Ct}w=d.H?A(d.H):{},d.m?(d.u||(d.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,w)):(d.u="GET",d.g.ea(d.A,d.u,null,w)),Xn(),mn(d.i,d.u,d.A,d.l,d.R,d.m)}yn.prototype.ca=function(d){d=d.target;const w=this.M;w&&Nn(d)==3?w.j():this.Y(d)},yn.prototype.Y=function(d){try{if(d==this.g)t:{const We=Nn(this.g);var w=this.g.Ba();const pr=this.g.Z();if(!(3>We)&&(We!=3||this.g&&(this.h.h||this.g.oa()||al(this.g)))){this.J||We!=4||w==7||(w==8||0>=pr?Xn(3):Xn(2)),Nr(this);var k=this.g.Z();this.X=k;e:if(rs(this)){var z=al(this.g);d="";var ht=z.length,vt=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){ar(this),Rr(this);var Ct="";break e}this.h.i=new a.TextDecoder}for(w=0;w<ht;w++)this.h.h=!0,d+=this.h.i.decode(z[w],{stream:!(vt&&w==ht-1)});z.length=0,this.h.g+=d,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=k==200,hn(this.i,this.u,this.A,this.l,this.R,We,k),this.o){if(this.T&&!this.K){e:{if(this.g){var fe,Ae=this.g;if((fe=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(fe)){var pe=fe;break e}}pe=null}if(k=pe)Pn(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,k);else{this.o=!1,this.s=3,$t(12),ar(this),Rr(this);break t}}if(this.P){k=!0;let qn;for(;!this.J&&this.C<Ct.length;)if(qn=Ja(this,Ct),qn==Cr){We==4&&(this.s=4,$t(14),k=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Lr){this.s=4,$t(15),Pn(this.i,this.l,Ct,"[Invalid Chunk]"),k=!1;break}else Pn(this.i,this.l,qn,null),ss(this,qn);if(rs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||Ct.length!=0||this.h.h||(this.s=1,$t(16),k=!1),this.o=this.o&&k,!k)Pn(this.i,this.l,Ct,"[Invalid Chunked Response]"),ar(this),Rr(this);else if(0<Ct.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),eo(Fe),Fe.M=!0,$t(11))}}else Pn(this.i,this.l,Ct,null),ss(this,Ct);We==4&&ar(this),this.o&&!this.J&&(We==4?Vr(this.j,this):(this.o=!1,Us(this)))}else Or(this.g),k==400&&0<Ct.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),ar(this),Rr(this)}}}catch(We){}finally{}};function rs(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Ja(d,w){var k=d.C,z=w.indexOf(`
`,k);return z==-1?Cr:(k=Number(w.substring(k,z)),isNaN(k)?Lr:(z+=1,z+k>w.length?Cr:(w=w.slice(z,z+k),d.C=z+k,w)))}yn.prototype.cancel=function(){this.J=!0,ar(this)};function Us(d){d.S=Date.now()+d.I,Za(d,d.I)}function Za(d,w){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Qn(m(d.ba,d),w)}function Nr(d){d.B&&(a.clearTimeout(d.B),d.B=null)}yn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(js(this.i,this.A),this.L!=2&&(Xn(),$t(17)),ar(this),this.s=2,Rr(this)):Za(this,this.S-d)};function Rr(d){d.j.G==0||d.J||Vr(d.j,d)}function ar(d){Nr(d);var w=d.M;w&&typeof w.ma=="function"&&w.ma(),d.M=null,wi(d.U),d.g&&(w=d.g,d.g=null,w.abort(),w.ma())}function ss(d,w){try{var k=d.j;if(k.G!=0&&(k.g==d||ta(k.h,d))){if(!d.K&&ta(k.h,d)&&k.G==3){try{var z=k.Da.g.parse(w)}catch(pe){z=null}if(Array.isArray(z)&&z.length==3){var ht=z;if(ht[0]==0){t:if(!k.u){if(k.g)if(k.g.F+3e3<d.F)fr(k),Qs(k);else break t;fs(k),$t(18)}}else k.za=ht[1],0<k.za-k.T&&37500>ht[2]&&k.F&&k.v==0&&!k.C&&(k.C=Qn(m(k.Za,k),6e3));if(1>=os(k.h)&&k.ca){try{k.ca()}catch(pe){}k.ca=void 0}}else Zn(k,11)}else if((d.K||k.g==d)&&fr(k),!T(w))for(ht=k.Da.g.parse(w),w=0;w<ht.length;w++){let pe=ht[w];if(k.T=pe[0],pe=pe[1],k.G==2)if(pe[0]=="c"){k.K=pe[1],k.ia=pe[2];const Fe=pe[3];Fe!=null&&(k.la=Fe,k.j.info("VER="+k.la));const We=pe[4];We!=null&&(k.Aa=We,k.j.info("SVER="+k.Aa));const pr=pe[5];pr!=null&&typeof pr=="number"&&0<pr&&(z=1.5*pr,k.L=z,k.j.info("backChannelRequestTimeoutMs_="+z)),z=k;const qn=d.g;if(qn){const Br=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var vt=z.h;vt.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(vt.j=vt.l,vt.g=new Set,vt.h&&(tn(vt,vt.h),vt.h=null))}if(z.D){const jr=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;jr&&(z.ya=jr,Ve(z.I,z.D,jr))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-d.F,k.j.info("Handshake RTT: "+k.R+"ms")),z=k;var Ct=d;if(z.qa=y(z,z.J?z.ia:null,z.W),Ct.K){ea(z.h,Ct);var fe=Ct,Ae=z.L;Ae&&(fe.I=Ae),fe.B&&(Nr(fe),Us(fe)),z.g=Ct}else to(z);0<k.i.length&&Js(k)}else pe[0]!="stop"&&pe[0]!="close"||Zn(k,7);else k.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Zn(k,7):dr(k):pe[0]!="noop"&&k.l&&k.l.ta(pe),k.v=0)}}Xn(4)}catch(pe){}}var ac=class{constructor(d,w){this.g=d,this.map=w}};function Zo(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function os(d){return d.h?1:d.g?d.g.size:0}function ta(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function tn(d,w){d.g?d.g.add(w):d.h=w}function ea(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Zo.prototype.cancel=function(){if(this.i=na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function na(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const k of d.g.values())w=w.concat(k.D);return w}return _(d.i)}function el(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map!="undefined"&&d instanceof Map||typeof Set!="undefined"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var w=[],k=d.length,z=0;z<k;z++)w.push(d[z]);return w}w=[],k=0;for(z in d)w[k++]=d[z];return w}function ia(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map!="undefined"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set!="undefined"&&d instanceof Set)){if(l(d)||typeof d=="string"){var w=[];d=d.length;for(var k=0;k<d;k++)w.push(k);return w}w=[],k=0;for(const z in d)w[k++]=z;return w}}}function nl(d,w){if(d.forEach&&typeof d.forEach=="function")d.forEach(w,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,w,void 0);else for(var k=ia(d),z=el(d),ht=z.length,vt=0;vt<ht;vt++)w.call(void 0,z[vt],k&&k[vt],d)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(d,w){if(d){d=d.split("&");for(var k=0;k<d.length;k++){var z=d[k].indexOf("="),ht=null;if(0<=z){var vt=d[k].substring(0,z);ht=d[k].substring(z+1)}else vt=d[k];w(vt,ht?decodeURIComponent(ht.replace(/\+/g," ")):"")}}}function dn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof dn){this.h=d.h,as(this,d.j),this.o=d.o,this.g=d.g,qs(this,d.s),this.l=d.l;var w=d.i,k=new Dr;k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),ra(this,k),this.m=d.m}else d&&(w=String(d).match(Si))?(this.h=!1,as(this,w[1]||"",!0),this.o=cs(w[2]||""),this.g=cs(w[3]||"",!0),qs(this,w[4]),this.l=cs(w[5]||"",!0),ra(this,w[6]||"",!0),this.m=cs(w[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}dn.prototype.toString=function(){var d=[],w=this.j;w&&d.push(lr(w,il,!0),":");var k=this.g;return(k||w=="file")&&(d.push("//"),(w=this.o)&&d.push(lr(w,il,!0),"@"),d.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&d.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&d.push("/"),d.push(lr(k,k.charAt(0)=="/"?cr:cc,!0))),(k=this.i.toString())&&d.push("?",k),(k=this.m)&&d.push("#",lr(k,Ws)),d.join("")};function mi(d){return new dn(d)}function as(d,w,k){d.j=k?cs(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function qs(d,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);d.s=w}else d.s=null}function ra(d,w,k){w instanceof Dr?(d.i=w,uc(d.i,d.h)):(k||(w=lr(w,Hs)),d.i=new Dr(w,d.h))}function Ve(d,w,k){d.i.set(w,k)}function ls(d){return Ve(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function cs(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function lr(d,w,k){return typeof d=="string"?(d=encodeURI(d).replace(w,lc),k&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function lc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var il=/[#\/\?@]/g,cc=/[#\?:]/g,cr=/[#\?]/g,Hs=/[#\?@]/g,Ws=/#/g;function Dr(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function en(d){d.g||(d.g=new Map,d.h=0,d.i&&zs(d.i,function(w,k){d.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}n=Dr.prototype,n.add=function(d,w){en(this),this.i=null,d=Mr(this,d);var k=this.g.get(d);return k||this.g.set(d,k=[]),k.push(w),this.h+=1,this};function rl(d,w){en(d),w=Mr(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function sa(d,w){return en(d),w=Mr(d,w),d.g.has(w)}n.forEach=function(d,w){en(this),this.g.forEach(function(k,z){k.forEach(function(ht){d.call(w,ht,z,this)},this)},this)},n.na=function(){en(this);const d=Array.from(this.g.values()),w=Array.from(this.g.keys()),k=[];for(let z=0;z<w.length;z++){const ht=d[z];for(let vt=0;vt<ht.length;vt++)k.push(w[z])}return k},n.V=function(d){en(this);let w=[];if(typeof d=="string")sa(this,d)&&(w=w.concat(this.g.get(Mr(this,d))));else{d=Array.from(this.g.values());for(let k=0;k<d.length;k++)w=w.concat(d[k])}return w},n.set=function(d,w){return en(this),this.i=null,d=Mr(this,d),sa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},n.get=function(d,w){return d?(d=this.V(d),0<d.length?String(d[0]):w):w};function le(d,w,k){rl(d,w),0<k.length&&(d.i=null,d.g.set(Mr(d,w),_(k)),d.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(var k=0;k<w.length;k++){var z=w[k];const vt=encodeURIComponent(String(z)),Ct=this.V(z);for(z=0;z<Ct.length;z++){var ht=vt;Ct[z]!==""&&(ht+="="+encodeURIComponent(String(Ct[z]))),d.push(ht)}}return this.i=d.join("&")};function Mr(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function uc(d,w){w&&!d.j&&(en(d),d.i=null,d.g.forEach(function(k,z){var ht=z.toLowerCase();z!=ht&&(rl(this,z),le(this,ht,k))},d)),d.j=w}function Xi(d,w){const k=new In;if(a.Image){const z=new Image;z.onload=p(Vi,k,"TestLoadImage: loaded",!0,w,z),z.onerror=p(Vi,k,"TestLoadImage: error",!1,w,z),z.onabort=p(Vi,k,"TestLoadImage: abort",!1,w,z),z.ontimeout=p(Vi,k,"TestLoadImage: timeout",!1,w,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=d}else w(!1)}function sl(d,w){const k=new In,z=new AbortController,ht=setTimeout(()=>{z.abort(),Vi(k,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:z.signal}).then(vt=>{clearTimeout(ht),vt.ok?Vi(k,"TestPingServer: ok",!0,w):Vi(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(ht),Vi(k,"TestPingServer: error",!1,w)})}function Vi(d,w,k,z,ht){try{ht&&(ht.onload=null,ht.onerror=null,ht.onabort=null,ht.ontimeout=null),z(k)}catch(vt){}}function $s(){this.g=new Ki}function oa(d,w,k){const z=k||"";try{nl(d,function(ht,vt){let Ct=ht;c(ht)&&(Ct=De(ht)),w.push(z+vt+"="+encodeURIComponent(Ct))})}catch(ht){throw w.push(z+"type="+encodeURIComponent("_badmap")),ht}}function Gs(d){this.l=d.Ub||null,this.j=d.eb||!1}v(Gs,Te),Gs.prototype.g=function(){return new Ks(this.l,this.j)},Gs.prototype.i=function(d){return function(){return d}}({});function Ks(d,w){Jt.call(this),this.D=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ks,Jt),n=Ks.prototype,n.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=w,this.readyState=1,Bi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(w.body=d),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream!="undefined"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?ur(this):Bi(this),this.readyState==3&&ol(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ur(this))},n.Qa=function(d){this.g&&(this.response=d,ur(this))},n.ga=function(){this.g&&ur(this)};function ur(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Bi(d)}n.setRequestHeader=function(d,w){this.u.append(d,w)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,d.push(k[0]+": "+k[1]),k=w.next();return d.join(`\r
`)};function Bi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hr(d){let w="";return W(d,function(k,z){w+=z,w+=":",w+=k,w+=`\r
`}),w}function aa(d,w,k){t:{for(z in k){var z=!1;break t}z=!0}z||(k=hr(k),typeof d=="string"?k!=null&&encodeURIComponent(String(k)):Ve(d,w,k))}function Oe(d){Jt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Oe,Jt);var la=/^https?$/i,Ys=["POST","PUT"];n=Oe.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,w,k,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pi.g(),this.v=this.o?Tr(this.o):Tr(pi),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(vt){ca(this,vt);return}if(d=k||"",k=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ht in z)k.set(ht,z[ht]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const vt of z.keys())k.set(vt,z.get(vt));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(k.keys()).find(vt=>vt.toLowerCase()=="content-type"),ht=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ys,w,void 0))||z||ht||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Ct]of k)this.g.setRequestHeader(vt,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ji(this),this.u=!0,this.g.send(d),this.u=!1}catch(vt){ca(this,vt)}};function ca(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.m=5,ua(d),us(d)}function ua(d){d.A||(d.A=!0,se(d,"complete"),se(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,se(this,"complete"),se(this,"abort"),us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),us(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},n.bb=function(){ha(this)};function ha(d){if(d.h&&typeof o!="undefined"&&(!d.v[1]||Nn(d)!=4||d.Z()!=2)){if(d.u&&Nn(d)==4)re(d.Ea,0,d);else if(se(d,"readystatechange"),Nn(d)==4){d.h=!1;try{const Ct=d.Z();t:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var k;if(!(k=w)){var z;if(z=Ct===0){var ht=String(d.D).match(Si)[1]||null;!ht&&a.self&&a.self.location&&(ht=a.self.location.protocol.slice(0,-1)),z=!la.test(ht?ht.toLowerCase():"")}k=z}if(k)se(d,"complete"),se(d,"success");else{d.m=6;try{var vt=2<Nn(d)?d.g.statusText:""}catch(fe){vt=""}d.l=vt+" ["+d.Z()+"]",ua(d)}}finally{us(d)}}}}function us(d,w){if(d.g){ji(d);const k=d.g,z=d.v[0]?()=>{}:null;d.g=null,d.v=null,w||se(d,"ready");try{k.onreadystatechange=z}catch(ht){}}}function ji(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Nn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch(d){return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch(d){return""}},n.Oa=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Ke(w)}};function al(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch(w){return null}}function Or(d){const w={};d=(d.g&&2<=Nn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<d.length;z++){if(T(d[z]))continue;var k=E(d[z]);const ht=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const vt=w[ht]||[];w[ht]=vt,vt.push(k)}P(w,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(d,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[d]||w}function Xs(d){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,d),this.cb=zn("retryDelaySeedMs",1e4,d),this.Wa=zn("forwardChannelMaxRetries",2,d),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(d&&d.concurrentRequestLimit),this.Da=new $s,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xs.prototype,n.la=8,n.G=1,n.connect=function(d,w,k,z){$t(0),this.W=d,this.H=w||{},k&&z!==void 0&&(this.H.OSID=k,this.H.OAID=z),this.F=this.X,this.I=y(this,null,this.W),Js(this)};function dr(d){if(hs(d),d.G==3){var w=d.U++,k=mi(d.I);if(Ve(k,"SID",d.K),Ve(k,"RID",w),Ve(k,"TYPE","terminate"),Fr(d,k),w=new yn(d,d.j,w),w.L=2,w.v=ls(mi(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(w.v.toString(),"")}catch(z){}!k&&a.Image&&(new Image().src=w.v,k=!0),k||(w.g=F(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Us(w)}io(d)}function Qs(d){d.g&&(eo(d),d.g.cancel(),d.g=null)}function hs(d){Qs(d),d.u&&(a.clearTimeout(d.u),d.u=null),fr(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Js(d){if(!tl(d.h)&&!d.s){d.s=!0;var w=d.Ga;K||ct(),et||(K(),et=!0),J.add(w,d),d.B=0}}function da(d,w){return os(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=w.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Qn(m(d.Ga,d,w),no(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const ht=new yn(this,this.j,d);let vt=this.o;if(this.S&&(vt?(vt=A(vt),D(vt,this.S)):vt=this.S),this.m!==null||this.O||(ht.H=vt,vt=null),this.P)t:{for(var w=0,k=0;k<this.i.length;k++){e:{var z=this.i[k];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break e}z=void 0}if(z===void 0)break;if(w+=z,4096<w){w=k;break t}if(w===4096||k===this.i.length-1){w=k+1;break t}}w=1e3}else w=1e3;w=ds(this,ht,w),k=mi(this.I),Ve(k,"RID",d),Ve(k,"CVER",22),this.D&&Ve(k,"X-HTTP-Session-Id",this.D),Fr(this,k),vt&&(this.O?w="headers="+encodeURIComponent(String(hr(vt)))+"&"+w:this.m&&aa(k,this.m,vt)),tn(this.h,ht),this.Ua&&Ve(k,"TYPE","init"),this.P?(Ve(k,"$req",w),Ve(k,"SID","null"),ht.T=!0,kr(ht,k,null)):kr(ht,k,w),this.G=2}}else this.G==3&&(d?Zs(this,d):this.i.length==0||tl(this.h)||Zs(this))};function Zs(d,w){var k;w?k=w.l:k=d.U++;const z=mi(d.I);Ve(z,"SID",d.K),Ve(z,"RID",k),Ve(z,"AID",d.T),Fr(d,z),d.m&&d.o&&aa(z,d.m,d.o),k=new yn(d,d.j,k,d.B+1),d.m===null&&(k.H=d.o),w&&(d.i=w.D.concat(d.i)),w=ds(d,k,1e3),k.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),tn(d.h,k),kr(k,z,w)}function Fr(d,w){d.H&&W(d.H,function(k,z){Ve(w,z,k)}),d.l&&nl({},function(k,z){Ve(w,z,k)})}function ds(d,w,k){k=Math.min(d.i.length,k);var z=d.l?m(d.l.Na,d.l,d):null;t:{var ht=d.i;let vt=-1;for(;;){const Ct=["count="+k];vt==-1?0<k?(vt=ht[0].g,Ct.push("ofs="+vt)):vt=0:Ct.push("ofs="+vt);let fe=!0;for(let Ae=0;Ae<k;Ae++){let pe=ht[Ae].g;const Fe=ht[Ae].map;if(pe-=vt,0>pe)vt=Math.max(0,ht[Ae].g-100),fe=!1;else try{oa(Fe,Ct,"req"+pe+"_")}catch(We){z&&z(Fe)}}if(fe){z=Ct.join("&");break t}}}return d=d.i.splice(0,k),w.D=d,z}function to(d){if(!d.g&&!d.u){d.Y=1;var w=d.Fa;K||ct(),et||(K(),et=!0),J.add(w,d),d.v=0}}function fs(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Qn(m(d.Fa,d),no(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,ll(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Qn(m(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Qs(this),ll(this))};function eo(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function ll(d){d.g=new yn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var w=mi(d.qa);Ve(w,"RID","rpc"),Ve(w,"SID",d.K),Ve(w,"AID",d.T),Ve(w,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ve(w,"TO",d.ja),Ve(w,"TYPE","xmlhttp"),Fr(d,w),d.m&&d.o&&aa(w,d.m,d.o),d.L&&(d.g.I=d.L);var k=d.g;d=d.ia,k.L=1,k.v=ls(mi(w)),k.m=null,k.P=!0,is(k,d)}n.Za=function(){this.C!=null&&(this.C=null,Qs(this),fs(this),$t(19))};function fr(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Vr(d,w){var k=null;if(d.g==w){fr(d),eo(d),d.g=null;var z=2}else if(ta(d.h,w))k=w.D,ea(d.h,w),z=1;else return;if(d.G!=0){if(w.o)if(z==1){k=w.m?w.m.length:0,w=Date.now()-w.F;var ht=d.B;z=Yi(),se(z,new Ai(z,k)),Js(d)}else to(d);else if(ht=w.s,ht==3||ht==0&&0<w.X||!(z==1&&da(d,w)||z==2&&fs(d)))switch(k&&0<k.length&&(w=d.h,w.i=w.i.concat(k)),ht){case 1:Zn(d,5);break;case 4:Zn(d,10);break;case 3:Zn(d,6);break;default:Zn(d,2)}}}function no(d,w){let k=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(k*=2),k*w}function Zn(d,w){if(d.j.info("Error code "+w),w==2){var k=m(d.fb,d),z=d.Xa;const ht=!z;z=new dn(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||as(z,"https"),ls(z),ht?Xi(z.toString(),k):sl(z.toString(),k)}else $t(2);d.G=0,d.l&&d.l.sa(w),io(d),hs(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function io(d){if(d.G=0,d.ka=[],d.l){const w=na(d.h);(w.length!=0||d.i.length!=0)&&(S(d.ka,w),S(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function y(d,w,k){var z=k instanceof dn?mi(k):new dn(k);if(z.g!="")w&&(z.g=w+"."+z.g),qs(z,z.s);else{var ht=a.location;z=ht.protocol,w=w?w+"."+ht.hostname:ht.hostname,ht=+ht.port;var vt=new dn(null);z&&as(vt,z),w&&(vt.g=w),ht&&qs(vt,ht),k&&(vt.l=k),z=vt}return k=d.D,w=d.ya,k&&w&&Ve(z,k,w),Ve(z,"VER",d.la),Fr(d,z),z}function F(d,w,k){if(w&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Ca&&!d.pa?new Oe(new Gs({eb:k})):new Oe(d.pa),w.Ha(d.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z(){}n=Z.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function st(){}st.prototype.g=function(d,w){return new dt(d,w)};function dt(d,w){Jt.call(this),this.g=new Xs(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(d?d["X-WebChannel-Client-Profile"]=w.va:d={"X-WebChannel-Client-Profile":w.va}),this.g.S=d,(d=w&&w.Sb)&&!T(d)&&(this.g.m=d),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!T(w)&&(this.g.D=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new jt(this)}v(dt,Jt),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){dr(this.g)},dt.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var k={};k.__data__=d,d=k}else this.u&&(k={},k.__data__=De(d),d=k);w.i.push(new ac(w.Ya++,d)),w.G==3&&Js(w)},dt.prototype.N=function(){this.g.l=null,delete this.j,dr(this.g),delete this.g,dt.aa.N.call(this)};function At(d){Mi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){t:{for(const k in w){d=k;break t}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}v(At,Mi);function Lt(){Ye.call(this),this.status=1}v(Lt,Ye);function jt(d){this.g=d}v(jt,Z),jt.prototype.ua=function(){se(this.g,"a")},jt.prototype.ta=function(d){se(this.g,new At(d))},jt.prototype.sa=function(d){se(this.g,new Lt)},jt.prototype.ra=function(){se(this.g,"b")},st.prototype.createWebChannel=st.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,xy=function(){return new st},Ay=function(){return Yi()},wy=ee,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,jh=Jn,xi.COMPLETE="complete",_y=xi,Ze.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Dc=Ze,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,by=Oe}).apply(typeof ph!="undefined"?ph:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const c0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new rg("@firebase/firestore");function Ec(){return ja.logLevel}function Xt(n,...t){if(ja.logLevel<=Pe.DEBUG){const e=t.map(ag);ja.debug(`Firestore (${nc}): ${n}`,...e)}}function Ms(n,...t){if(ja.logLevel<=Pe.ERROR){const e=t.map(ag);ja.error(`Firestore (${nc}): ${n}`,...e)}}function Hl(n,...t){if(ja.logLevel<=Pe.WARN){const e=t.map(ag);ja.warn(`Firestore (${nc}): ${n}`,...e)}}function ag(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch(t){return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(n="Unexpected state"){const t=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+n;throw Ms(t),new Error(t)}function qe(n,t){n||ue()}function ye(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends Bs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ai.UNAUTHENTICATED))}shutdown(){}}class bA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class _A{constructor(t){this.t=t,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){qe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve();let s=new Vo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vo,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(()=>nt(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vo)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new Sy(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qe(t===null||typeof t=="string"),new ai(t)}}class wA{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class AA{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new wA(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SA{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){qe(this.o===void 0);const i=s=>{s.error!=null&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Xt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(qe(typeof e.token=="string"),this.R=e.token,new xA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n){const t=typeof self!="undefined"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=EA(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Re(n,t){return n<t?-1:n>t?1:0}function Wl(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return On.fromMillis(Date.now())}static fromDate(t){return On.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new On(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Re(this.nanoseconds,t.nanoseconds):Re(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.timestamp=t}static fromTimestamp(t){return new me(t)}static min(){return new me(new On(0,0))}static max(){return new me(new On(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t,e,i){e===void 0?e=0:e>t.length&&ue(),i===void 0?i=t.length-e:i>t.length-e&&ue(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return uu.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof uu?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class nn extends uu{construct(t,e,i){return new nn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Gt(Pt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new nn(e)}static emptyPath(){return new nn([])}}const IA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends uu{construct(t,e,i){return new Gn(t,e,i)}static isValidIdentifier(t){return IA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Gn(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Gt(Pt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Gt(Pt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Gt(Pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Gt(Pt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gn(e)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.path=t}static fromPath(t){return new Zt(nn.fromString(t))}static fromName(t){return new Zt(nn.fromString(t).popFirst(5))}static empty(){return new Zt(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&nn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return nn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Zt(new nn(t.slice()))}}function PA(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=me.fromTimestamp(i===1e9?new On(e+1,0):new On(e,i));return new zo(r,Zt.empty(),t)}function TA(n){return new zo(n.readTime,n.key,-1)}class zo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new zo(me.min(),Zt.empty(),-1)}static max(){return new zo(me.max(),Zt.empty(),-1)}}function LA(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Zt.comparator(n.documentKey,t.documentKey),e!==0?e:Re(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n){return nt(this,null,function*(){if(n.code!==Pt.FAILED_PRECONDITION||n.message!==CA)throw n;Xt("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Rt((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Rt?e:Rt.resolve(e)}catch(e){return Rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Rt.reject(e)}static resolve(t){return new Rt((e,i)=>{e(t)})}static reject(t){return new Rt((e,i)=>{i(t)})}static waitFor(t){return new Rt((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=Rt.resolve(!1);for(const i of t)e=e.next(r=>r?Rt.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new Rt((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;e(t[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(t,e){return new Rt((i,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}}function NA(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Nu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ie(i),this.se=i=>e.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}lg.oe=-1;function Nd(n){return n==null}function ld(n){return n===0&&1/n==-1/0}function RA(n){return typeof n=="number"&&Number.isInteger(n)&&!ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ka(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Iy(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,e){this.comparator=t,this.root=e||$n.EMPTY}insert(t,e){return new cn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(t){return new cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$n.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gh(this.root,t,this.comparator,!0)}}class gh{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i!=null?i:$n.RED,this.left=r!=null?r:$n.EMPTY,this.right=s!=null?s:$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new $n(t!=null?t:this.key,e!=null?e:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return $n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const t=this.left.check();if(t!==this.right.check())throw ue();return t+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(t,e,i,r,s){return this}insert(t,e,i){return new $n(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.comparator=t,this.data=new cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(t){return new h0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Kn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Kn(this.comparator);return e.data=t,e}}class h0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this.fields=t,t.sort(Gn.comparator)}static empty(){return new $i([])}unionWith(t){let e=new Kn(Gn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new $i(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wl(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new Py("Invalid base64 string: "+s):s}}(t);return new Yn(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Yn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Re(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const DA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(n){if(qe(!!n),typeof n=="string"){let t=0;const e=DA.exec(n);if(qe(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_n(n.seconds),nanos:_n(n.nanos)}}function _n(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ua(n){return typeof n=="string"?Yn.fromBase64String(n):Yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function ug(n){const t=n.mapValue.fields.__previous_value__;return cg(t)?ug(t):t}function hu(n){const t=qo(n.mapValue.fields.__local_write_time__.timestampValue);return new On(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,e,i,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class du{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new du("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof du&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function za(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cg(n)?4:FA(n)?9007199254740991:OA(n)?10:11:ue()}function es(n,t){if(n===t)return!0;const e=za(n);if(e!==za(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return hu(n).isEqual(hu(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=qo(r.timestampValue),a=qo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return Ua(r.bytesValue).isEqual(Ua(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return _n(r.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(r.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _n(r.integerValue)===_n(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=_n(r.doubleValue),a=_n(s.doubleValue);return o===a?ld(o)===ld(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return Wl(n.arrayValue.values||[],t.arrayValue.values||[],es);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(u0(o)!==u0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!es(o[l],a[l])))return!1;return!0}(n,t);default:return ue()}}function fu(n,t){return(n.values||[]).find(e=>es(e,t))!==void 0}function $l(n,t){if(n===t)return 0;const e=za(n),i=za(t);if(e!==i)return Re(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_n(s.integerValue||s.doubleValue),l=_n(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return d0(n.timestampValue,t.timestampValue);case 4:return d0(hu(n),hu(t));case 5:return Re(n.stringValue,t.stringValue);case 6:return function(s,o){const a=Ua(s),l=Ua(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Re(a[c],l[c]);if(h!==0)return h}return Re(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Re(_n(s.latitude),_n(o.latitude));return a!==0?a:Re(_n(s.longitude),_n(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return f0(n.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,v=(l=m.value)===null||l===void 0?void 0:l.arrayValue,_=Re(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:f0(p,v)}(n.mapValue,t.mapValue);case 11:return function(s,o){if(s===mh.mapValue&&o===mh.mapValue)return 0;if(s===mh.mapValue)return 1;if(o===mh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Re(l[f],h[f]);if(m!==0)return m;const p=$l(a[l[f]],c[h[f]]);if(p!==0)return p}return Re(l.length,h.length)}(n.mapValue,t.mapValue);default:throw ue()}}function d0(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Re(n,t);const e=qo(n),i=qo(t),r=Re(e.seconds,i.seconds);return r!==0?r:Re(e.nanos,i.nanos)}function f0(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const s=$l(e[r],i[r]);if(s)return s}return Re(e.length,i.length)}function Gl(n){return hp(n)}function hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=qo(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ua(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Zt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=hp(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${hp(e.fields[o])}`;return r+"}"}(n.mapValue):ue()}function p0(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function dp(n){return!!n&&"integerValue"in n}function hg(n){return!!n&&"arrayValue"in n}function g0(n){return!!n&&"nullValue"in n}function m0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uh(n){return!!n&&"mapValue"in n}function OA(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Wc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Ka(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Wc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Wc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function FA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this.value=t}static empty(){return new Ci({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Uh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wc(e)}setAll(t){let e=Gn.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=Wc(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Uh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return es(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Uh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Ka(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ci(Wc(this.value))}}function Ty(n){const t=[];return Ka(n.fields,(e,i)=>{const r=new Gn([e]);if(Uh(i)){const s=Ty(i.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new $i(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new li(t,0,me.min(),me.min(),me.min(),Ci.empty(),0)}static newFoundDocument(t,e,i,r){return new li(t,1,e,me.min(),i,r,0)}static newNoDocument(t,e){return new li(t,2,e,me.min(),me.min(),Ci.empty(),0)}static newUnknownDocument(t,e){return new li(t,3,e,me.min(),me.min(),Ci.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof li&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,e){this.position=t,this.inclusive=e}}function y0(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(s.field.isKeyField()?i=Zt.comparator(Zt.fromName(o.referenceValue),e.key):i=$l(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function v0(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!es(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,e="asc"){this.field=t,this.dir=e}}function VA(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{}class kn extends Ly{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new jA(t,e,i):e==="array-contains"?new qA(t,i):e==="in"?new HA(t,i):e==="not-in"?new WA(t,i):e==="array-contains-any"?new $A(t,i):new kn(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new UA(t,i):new zA(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison($l(e,this.value)):e!==null&&za(this.value)===za(e)&&this.matchesComparison($l(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends Ly{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Sr(t,e)}matches(t){return Cy(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Cy(n){return n.op==="and"}function ky(n){return BA(n)&&Cy(n)}function BA(n){for(const t of n.filters)if(t instanceof Sr)return!1;return!0}function fp(n){if(n instanceof kn)return n.field.canonicalString()+n.op.toString()+Gl(n.value);if(ky(n))return n.filters.map(t=>fp(t)).join(",");{const t=n.filters.map(e=>fp(e)).join(",");return`${n.op}(${t})`}}function Ny(n,t){return n instanceof kn?function(i,r){return r instanceof kn&&i.op===r.op&&i.field.isEqual(r.field)&&es(i.value,r.value)}(n,t):n instanceof Sr?function(i,r){return r instanceof Sr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ny(o,r.filters[a]),!0):!1}(n,t):void ue()}function Ry(n){return n instanceof kn?function(e){return`${e.field.canonicalString()} ${e.op} ${Gl(e.value)}`}(n):n instanceof Sr?function(e){return e.op.toString()+" {"+e.getFilters().map(Ry).join(" ,")+"}"}(n):"Filter"}class jA extends kn{constructor(t,e,i){super(t,e,i),this.key=Zt.fromName(i.referenceValue)}matches(t){const e=Zt.comparator(t.key,this.key);return this.matchesComparison(e)}}class UA extends kn{constructor(t,e){super(t,"in",e),this.keys=Dy("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class zA extends kn{constructor(t,e){super(t,"not-in",e),this.keys=Dy("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Dy(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Zt.fromName(i.referenceValue))}class qA extends kn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return hg(e)&&fu(e.arrayValue,this.value)}}class HA extends kn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&fu(this.value.arrayValue,e)}}class WA extends kn{constructor(t,e){super(t,"not-in",e)}matches(t){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!fu(this.value.arrayValue,e)}}class $A extends kn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!hg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>fu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function b0(n,t=null,e=[],i=[],r=null,s=null,o=null){return new GA(n,t,e,i,r,s,o)}function dg(n){const t=ye(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>fp(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Nd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Gl(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Gl(i)).join(",")),t.ue=e}return t.ue}function fg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!VA(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Ny(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!v0(n.startAt,t.startAt)&&v0(n.endAt,t.endAt)}function pp(n){return Zt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function KA(n,t,e,i,r,s,o,a){return new ic(n,t,e,i,r,s,o,a)}function pg(n){return new ic(n)}function _0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function My(n){return n.collectionGroup!==null}function $c(n){const t=ye(n);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kn(Gn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new pu(s,i))}),e.has(Gn.keyField().canonicalString())||t.ce.push(new pu(Gn.keyField(),i))}return t.ce}function Kr(n){const t=ye(n);return t.le||(t.le=YA(t,$c(n))),t.le}function YA(n,t){if(n.limitType==="F")return b0(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new pu(r.field,s)});const e=n.endAt?new cd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cd(n.startAt.position,n.startAt.inclusive):null;return b0(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function gp(n,t){const e=n.filters.concat([t]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function mp(n,t,e){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Rd(n,t){return fg(Kr(n),Kr(t))&&n.limitType===t.limitType}function Oy(n){return`${dg(Kr(n))}|lt:${n.limitType}`}function Pl(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>Ry(r)).join(", ")}]`),Nd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Gl(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Gl(r)).join(",")),`Target(${i})`}(Kr(n))}; limitType=${n.limitType})`}function Dd(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Zt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of $c(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=y0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,$c(i),r)||i.endAt&&!function(o,a,l){const c=y0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,$c(i),r))}(n,t)}function XA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fy(n){return(t,e)=>{let i=!1;for(const r of $c(n)){const s=QA(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function QA(n,t,e){const i=n.field.isKeyField()?Zt.comparator(t.key,e.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?$l(l,c):ue()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ka(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Iy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new cn(Zt.comparator);function Os(){return JA}const Vy=new cn(Zt.comparator);function Mc(...n){let t=Vy;for(const e of n)t=t.insert(e.key,e);return t}function By(n){let t=Vy;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ta(){return Gc()}function jy(){return Gc()}function Gc(){return new rc(n=>n.toString(),(n,t)=>n.isEqual(t))}const ZA=new cn(Zt.comparator),tx=new Kn(Zt.comparator);function Se(...n){let t=tx;for(const e of n)t=t.add(e);return t}const ex=new Kn(Re);function nx(){return ex}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(t)?"-0":t}}function Uy(n){return{integerValue:""+n}}function ix(n,t){return RA(t)?Uy(t):gg(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this._=void 0}}function rx(n,t,e){return n instanceof ud?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&cg(s)&&(s=ug(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof gu?qy(n,t):n instanceof mu?Hy(n,t):function(r,s){const o=zy(r,s),a=w0(o)+w0(r.Pe);return dp(o)&&dp(r.Pe)?Uy(a):gg(r.serializer,a)}(n,t)}function sx(n,t,e){return n instanceof gu?qy(n,t):n instanceof mu?Hy(n,t):e}function zy(n,t){return n instanceof hd?function(i){return dp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class ud extends Md{}class gu extends Md{constructor(t){super(),this.elements=t}}function qy(n,t){const e=Wy(t);for(const i of n.elements)e.some(r=>es(r,i))||e.push(i);return{arrayValue:{values:e}}}class mu extends Md{constructor(t){super(),this.elements=t}}function Hy(n,t){let e=Wy(t);for(const i of n.elements)e=e.filter(r=>!es(r,i));return{arrayValue:{values:e}}}class hd extends Md{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function w0(n){return _n(n.integerValue||n.doubleValue)}function Wy(n){return hg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ox(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof gu&&r instanceof gu||i instanceof mu&&r instanceof mu?Wl(i.elements,r.elements,es):i instanceof hd&&r instanceof hd?es(i.Pe,r.Pe):i instanceof ud&&r instanceof ud}(n.transform,t.transform)}class ax{constructor(t,e){this.version=t,this.transformResults=e}}class Ar{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ar}static exists(t){return new Ar(void 0,t)}static updateTime(t){return new Ar(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Od{}function $y(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new mg(n.key,Ar.none()):new Ru(n.key,n.data,Ar.none());{const e=n.data,i=Ci.empty();let r=new Kn(Gn.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xo(n.key,i,new $i(r.toArray()),Ar.none())}}function lx(n,t,e){n instanceof Ru?function(r,s,o){const a=r.value.clone(),l=x0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Xo?function(r,s,o){if(!zh(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=x0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Gy(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Kc(n,t,e,i){return n instanceof Ru?function(s,o,a,l){if(!zh(s.precondition,o))return a;const c=s.value.clone(),h=S0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,i):n instanceof Xo?function(s,o,a,l){if(!zh(s.precondition,o))return a;const c=S0(s.fieldTransforms,l,o),h=o.data;return h.setAll(Gy(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,t,e,i):function(s,o,a){return zh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function cx(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=zy(i.transform,r||null);s!=null&&(e===null&&(e=Ci.empty()),e.set(i.field,s))}return e||null}function A0(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Wl(i,r,(s,o)=>ox(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Ru extends Od{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xo extends Od{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Gy(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function x0(n,t,e){const i=new Map;qe(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,sx(o,a,e[r]))}return i}function S0(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,rx(s,o,t))}return i}class mg extends Od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ux extends Od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&lx(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Kc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Kc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=jy();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const l=$y(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Se())}isEqual(t){return this.batchId===t.batchId&&Wl(this.mutations,t.mutations,(e,i)=>A0(e,i))&&Wl(this.baseMutations,t.baseMutations,(e,i)=>A0(e,i))}}class yg{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){qe(t.mutations.length===i.length);let r=function(){return ZA}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new yg(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,Le;function px(n){switch(n){default:return ue();case Pt.CANCELLED:case Pt.UNKNOWN:case Pt.DEADLINE_EXCEEDED:case Pt.RESOURCE_EXHAUSTED:case Pt.INTERNAL:case Pt.UNAVAILABLE:case Pt.UNAUTHENTICATED:return!1;case Pt.INVALID_ARGUMENT:case Pt.NOT_FOUND:case Pt.ALREADY_EXISTS:case Pt.PERMISSION_DENIED:case Pt.FAILED_PRECONDITION:case Pt.ABORTED:case Pt.OUT_OF_RANGE:case Pt.UNIMPLEMENTED:case Pt.DATA_LOSS:return!0}}function Ky(n){if(n===void 0)return Ms("GRPC error has no .code"),Pt.UNKNOWN;switch(n){case Cn.OK:return Pt.OK;case Cn.CANCELLED:return Pt.CANCELLED;case Cn.UNKNOWN:return Pt.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return Pt.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return Pt.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return Pt.INTERNAL;case Cn.UNAVAILABLE:return Pt.UNAVAILABLE;case Cn.UNAUTHENTICATED:return Pt.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return Pt.INVALID_ARGUMENT;case Cn.NOT_FOUND:return Pt.NOT_FOUND;case Cn.ALREADY_EXISTS:return Pt.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return Pt.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return Pt.FAILED_PRECONDITION;case Cn.ABORTED:return Pt.ABORTED;case Cn.OUT_OF_RANGE:return Pt.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return Pt.UNIMPLEMENTED;case Cn.DATA_LOSS:return Pt.DATA_LOSS;default:return ue()}}(Le=Cn||(Cn={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new ka([4294967295,4294967295],0);function E0(n){const t=gx().encode(n),e=new vy;return e.update(t),new Uint8Array(e.digest())}function I0(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ka([e,i],0),new ka([r,s],0)]}class vg{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Oc(`Invalid padding: ${e}`);if(i<0)throw new Oc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=ka.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(ka.fromNumber(i)));return r.compare(mx)===1&&(r=new ka([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=E0(t),[i,r]=I0(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new vg(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const e=E0(t),[i,r]=I0(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Du.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Fd(me.min(),r,new cn(Re),Os(),Se())}}class Du{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Du(i,e,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class Yy{constructor(t,e){this.targetId=t,this.me=e}}class Xy{constructor(t,e,i=Yn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class P0{constructor(){this.fe=0,this.ge=L0(),this.pe=Yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Se(),e=Se(),i=Se();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new Du(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=L0()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Os(),this.qe=T0(),this.Qe=new cn(Re)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:ue()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,i=t.me.count,r=this.Je(e);if(r){const s=r.target;if(pp(s))if(i===0){const o=new Zt(s.path);this.Ue(e,o,li.newNoDocument(o,me.min()))}else qe(i===1);else{const o=this.Ye(e);if(o!==i){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(e);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let o,a;try{o=Ua(i).toUint8Array()}catch(l){if(l instanceof Py)return Hl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new vg(o,r,s)}catch(l){return Hl(l instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&pp(a.target)){const l=new Zt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,li.newNoDocument(l,t))}s.be&&(e.set(o,s.ve()),s.Ce())}});let i=Se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new Fd(t,e,this.Qe,this.ke,i);return this.ke=Os(),this.qe=T0(),this.Qe=new cn(Re),r}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new P0,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Kn(Re),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||Xt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new P0),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function T0(){return new cn(Zt.comparator)}function L0(){return new cn(Zt.comparator)}const vx={asc:"ASCENDING",desc:"DESCENDING"},bx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_x={and:"AND",or:"OR"};class wx{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function yp(n,t){return n.useProto3Json||Nd(t)?t:{value:t}}function dd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qy(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ax(n,t){return dd(n,t.toTimestamp())}function Yr(n){return qe(!!n),me.fromTimestamp(function(e){const i=qo(e);return new On(i.seconds,i.nanos)}(n))}function bg(n,t){return vp(n,t).canonicalString()}function vp(n,t){const e=function(r){return new nn(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Jy(n){const t=nn.fromString(n);return qe(iv(t)),t}function bp(n,t){return bg(n.databaseId,t.path)}function Lf(n,t){const e=Jy(t);if(e.get(1)!==n.databaseId.projectId)throw new Gt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Gt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Zt(tv(e))}function Zy(n,t){return bg(n.databaseId,t)}function xx(n){const t=Jy(n);return t.length===4?nn.emptyPath():tv(t)}function _p(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tv(n){return qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function C0(n,t,e){return{name:bp(n,t),fields:e.value.mapValue.fields}}function Sx(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(qe(h===void 0||typeof h=="string"),Yn.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Yn.fromUint8Array(h||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Pt.UNKNOWN:Ky(c.code);return new Gt(h,c.message||"")}(o);e=new Xy(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Lf(n,i.document.name),s=Yr(i.document.updateTime),o=i.document.createTime?Yr(i.document.createTime):me.min(),a=new Ci({mapValue:{fields:i.document.fields}}),l=li.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];e=new qh(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Lf(n,i.document),s=i.readTime?Yr(i.readTime):me.min(),o=li.newNoDocument(r,s),a=i.removedTargetIds||[];e=new qh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Lf(n,i.document),s=i.removedTargetIds||[];e=new qh([],s,r,null)}else{if(!("filter"in t))return ue();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new fx(r,s),a=i.targetId;e=new Yy(a,o)}}return e}function Ex(n,t){let e;if(t instanceof Ru)e={update:C0(n,t.key,t.value)};else if(t instanceof mg)e={delete:bp(n,t.key)};else if(t instanceof Xo)e={update:C0(n,t.key,t.data),updateMask:Dx(t.fieldMask)};else{if(!(t instanceof ux))return ue();e={verify:bp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof ud)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Ax(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(n,t.precondition)),e}function Ix(n,t){return n&&n.length>0?(qe(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?Yr(r.updateTime):Yr(s);return o.isEqual(me.min())&&(o=Yr(s)),new ax(o,r.transformResults||[])}(e,t))):[]}function Px(n,t){return{documents:[Zy(n,t.path)]}}function Tx(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Zy(n,r);const s=function(c){if(c.length!==0)return nv(Sr.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Tl(m.field),direction:kx(m.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=yp(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function Lx(n){let t=xx(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){qe(i===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(f){const m=ev(f);return m instanceof Sr&&ky(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(f){return f.map(m=>function(v){return new pu(Ll(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(e.orderBy));let a=null;e.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Nd(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new cd(p,m)}(e.startAt));let c=null;return e.endAt&&(c=function(f){const m=!f.before,p=f.values||[];return new cd(p,m)}(e.endAt)),KA(t,r,o,s,a,"F",l,c)}function Cx(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function ev(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ll(e.unaryFilter.field);return kn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ll(e.unaryFilter.field);return kn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ll(e.unaryFilter.field);return kn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ll(e.unaryFilter.field);return kn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(e){return kn.create(Ll(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Sr.create(e.compositeFilter.filters.map(i=>ev(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(e.compositeFilter.op))}(n):ue()}function kx(n){return vx[n]}function Nx(n){return bx[n]}function Rx(n){return _x[n]}function Tl(n){return{fieldPath:n.canonicalString()}}function Ll(n){return Gn.fromServerFormat(n.fieldPath)}function nv(n){return n instanceof kn?function(e){if(e.op==="=="){if(m0(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NAN"}};if(g0(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(m0(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NAN"}};if(g0(e.value))return{unaryFilter:{field:Tl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(e.field),op:Nx(e.op),value:e.value}}}(n):n instanceof Sr?function(e){const i=e.getFilters().map(r=>nv(r));return i.length===1?i[0]:{compositeFilter:{op:Rx(e.op),filters:i}}}(n):ue()}function Dx(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function iv(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,e,i,r,s=me.min(),o=me.min(),a=Yn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Io(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t){this.ct=t}}function Ox(n){const t=Lx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.un=new Vx}addToCollectionParentIndex(t,e){return this.un.add(e),Rt.resolve()}getCollectionParents(t,e){return Rt.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return Rt.resolve()}deleteFieldIndex(t,e){return Rt.resolve()}deleteAllFieldIndexes(t){return Rt.resolve()}createTargetIndexes(t,e){return Rt.resolve()}getDocumentsMatchingTarget(t,e){return Rt.resolve(null)}getIndexType(t,e){return Rt.resolve(0)}getFieldIndexes(t,e){return Rt.resolve([])}getNextCollectionGroupToUpdate(t){return Rt.resolve(null)}getMinOffset(t,e){return Rt.resolve(zo.min())}getMinOffsetFromCollectionGroup(t,e){return Rt.resolve(zo.min())}updateCollectionGroup(t,e,i){return Rt.resolve()}updateIndexEntries(t,e){return Rt.resolve()}}class Vx{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Kn(nn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Kn(nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Kl(0)}static kn(){return new Kl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.changes=new rc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,li.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?Rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Kc(i.mutation,r,$i.empty(),On.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Se()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Se()){const r=Ta();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=Mc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Ta();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Se()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=Os();const o=Gc(),a=function(){return Gc()}();return e.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Xo)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Kc(h.mutation,c,h.mutation.getFieldMask(),On.now())):o.set(c.key,$i.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var f;return a.set(c,new jx(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,e){const i=Gc();let r=new cn((o,a)=>o-a),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(c===null)return;let h=i.get(l)||$i.empty();h=a.applyToLocalView(c,h),i.set(l,h);const f=(r.get(a.batchId)||Se()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=jy();h.forEach(m=>{if(!s.has(m)){const p=$y(e.get(m),i.get(m));p!==null&&f.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return Rt.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return Zt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):My(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):Rt.resolve(Ta());let a=-1,l=s;return o.next(c=>Rt.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?Rt.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Se())).next(h=>({batchId:a,changes:By(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Zt(e)).next(i=>{let r=Mc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let o=Mc();return this.indexManager.getCollectionParents(t,s).next(a=>Rt.forEach(a,l=>{const c=function(f,m){return new ic(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,li.newInvalidDocument(h)))});let a=Mc();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Kc(h.mutation,c,$i.empty(),On.now()),Dd(e,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return Rt.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Yr(r.createTime)}}(e)),Rt.resolve()}getNamedQuery(t,e){return Rt.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(r){return{name:r.name,query:Ox(r.bundledQuery),readTime:Yr(r.readTime)}}(e)),Rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.overlays=new cn(Zt.comparator),this.Ir=new Map}getOverlay(t,e){return Rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ta();return Rt.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),Rt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),Rt.resolve()}getOverlaysForCollection(t,e,i){const r=Ta(),s=e.length+1,o=new Zt(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Rt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new cn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Ta(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ta(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return Rt.resolve(a)}ht(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new dx(e,i));let s=this.Ir.get(e);s===void 0&&(s=Se(),this.Ir.set(e,s)),this.Ir.set(e,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(t){return Rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Tr=new Kn(Bn.Er),this.dr=new Kn(Bn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const i=new Bn(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new Bn(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){const e=new Zt(new nn([])),i=new Bn(e,t),r=new Bn(e,t+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new Zt(new nn([])),i=new Bn(e,t),r=new Bn(e,t+1);let s=Se();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Bn(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Bn{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return Zt.comparator(t.key,e.key)||Re(t.wr,e.wr)}static Ar(t,e){return Re(t.wr,e.wr)||Zt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Kn(Bn.Er)}checkEmpty(t){return Rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hx(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Bn(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Rt.resolve(o)}lookupMutationBatch(t,e){return Rt.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.vr(i),s=r<0?0:r;return Rt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Bn(e,0),r=new Bn(e,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),Rt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Kn(Re);return e.forEach(r=>{const s=new Bn(r,0),o=new Bn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),Rt.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Zt.isDocumentKey(s)||(s=s.child(""));const o=new Bn(new Zt(s),0);let a=new Kn(Re);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),Rt.resolve(this.Cr(a))}Cr(t){const e=[];return t.forEach(i=>{const r=this.Dr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){qe(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Rt.forEach(e.mutations,r=>{const s=new Bn(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){const i=new Bn(e,0),r=this.br.firstAfterOrEqual(i);return Rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Rt.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.Mr=t,this.docs=function(){return new cn(Zt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Rt.resolve(i?i.document.mutableCopy():li.newInvalidDocument(e))}getEntries(t,e){let i=Os();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():li.newInvalidDocument(r))}),Rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Os();const o=e.path,a=new Zt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LA(TA(h),i)<=0||(r.has(h.key)||Dd(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Rt.resolve(s)}getAllFromCollectionGroup(t,e,i,r){ue()}Or(t,e){return Rt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Gx(this)}getSize(t){return Rt.resolve(this.size)}}class Gx extends Bx{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),Rt.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this.persistence=t,this.Nr=new rc(e=>dg(e),fg),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _g,this.targetCount=0,this.kr=Kl.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,r)=>e(r)),Rt.resolve()}getLastRemoteSnapshotVersion(t){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Rt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),Rt.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new Kl(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,Rt.resolve()}updateTargetData(t,e){return this.Kn(e),Rt.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),Rt.waitFor(s).next(()=>r)}getTargetCount(t){return Rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.Nr.get(e)||null;return Rt.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),Rt.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),Rt.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),Rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Br.yr(e);return Rt.resolve(i)}containsKey(t,e){return Rt.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,e){this.qr={},this.overlays={},this.Qr=new lg(0),this.Kr=!1,this.Kr=!0,this.$r=new Hx,this.referenceDelegate=t(this),this.Ur=new Kx(this),this.indexManager=new Fx,this.remoteDocumentCache=function(r){return new $x(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Mx(e),this.Gr=new zx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new qx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new Wx(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){Xt("MemoryPersistence","Starting transaction:",t);const r=new Xx(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(t,e){return Rt.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}}class Xx extends kA{constructor(t){super(),this.currentSequenceNumber=t}}class wg{constructor(t){this.persistence=t,this.Jr=new _g,this.Yr=null}static Zr(t){return new wg(t)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),Rt.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),Rt.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),Rt.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.Xr,i=>{const r=Zt.fromPath(i);return this.ei(t,r).next(s=>{s||e.removeEntry(r,me.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return Rt.or([()=>Rt.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=r}static Wi(t,e){let i=Se(),r=Se();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ag(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Z_()?8:NA(hi())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.Yi(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qx;return this.Xi(t,e,o).next(a=>{if(s.result=a,this.zi)return this.es(t,e,o,a.size)})}).next(()=>s.result)}es(t,e,i,r){return i.documentReadCount<this.ji?(Ec()<=Pe.DEBUG&&Xt("QueryEngine","SDK will not create cache indexes for query:",Pl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Rt.resolve()):(Ec()<=Pe.DEBUG&&Xt("QueryEngine","Query:",Pl(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ec()<=Pe.DEBUG&&Xt("QueryEngine","The SDK decides to create cache indexes for query:",Pl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kr(e))):Rt.resolve())}Yi(t,e){if(_0(e))return Rt.resolve(null);let i=Kr(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=mp(e,null,"F"),i=Kr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=Se(...s);return this.Ji.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.ts(e,a);return this.ns(e,c,o,l.readTime)?this.Yi(t,mp(e,null,"F")):this.rs(t,c,e,l)}))})))}Zi(t,e,i,r){return _0(e)||r.isEqual(me.min())?Rt.resolve(null):this.Ji.getDocuments(t,i).next(s=>{const o=this.ts(e,s);return this.ns(e,o,i,r)?Rt.resolve(null):(Ec()<=Pe.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pl(e)),this.rs(t,o,e,PA(r,-1)).next(a=>a))})}ts(t,e){let i=new Kn(Fy(t));return e.forEach((r,s)=>{Dd(t,s)&&(i=i.add(s))}),i}ns(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(t,e,i){return Ec()<=Pe.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",Pl(e)),this.Ji.getDocumentsMatchingQuery(t,e,zo.min(),i)}rs(t,e,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t,e,i,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new cn(Re),this._s=new rc(s=>dg(s),fg),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ux(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function tS(n,t,e,i){return new Zx(n,t,e,i)}function rv(n,t){return nt(this,null,function*(){const e=ye(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Se();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})}function eS(n,t){const e=ye(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let p=Rt.resolve();return m.forEach(v=>{p=p.next(()=>h.getEntry(l,v)).next(_=>{const S=c.docVersions.get(v);qe(S!==null),_.version.compareTo(S)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),h.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function sv(n){const t=ye(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function nS(n,t){const e=ye(n),i=t.snapshotVersion;let r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;const a=[];t.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;a.push(e.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>e.Ur.addMatchingKeys(s,h.addedDocuments,f)));let p=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,i)),r=r.insert(f,p),function(_,S,x){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,h)&&a.push(e.Ur.updateTargetData(s,p))});let l=Os(),c=Se();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(iS(s,o,t.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(me.min())){const h=e.Ur.getLastRemoteSnapshotVersion(s).next(f=>e.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return Rt.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.os=r,s))}function iS(n,t,e){let i=Se(),r=Se();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=Os();return e.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Xt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function rS(n,t){const e=ye(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function sS(n,t){const e=ye(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Ur.getTargetData(i,t).next(s=>s?(r=s,Rt.resolve(r)):e.Ur.allocateTargetId(i).next(o=>(r=new Io(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}function wp(n,t,e){return nt(this,null,function*(){const i=ye(n),r=i.os.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Nu(o))throw o;Xt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function k0(n,t,e){const i=ye(n);let r=me.min(),s=Se();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ye(l),m=f._s.get(h);return m!==void 0?Rt.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(i,o,Kr(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,t,e?r:me.min(),e?s:Se())).next(a=>(oS(i,XA(t),a),{documents:a,Ts:s})))}function oS(n,t,e){let i=n.us.get(t)||me.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(t,i)}class N0{constructor(){this.activeTargetIds=nx()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class aS{constructor(){this.so=new N0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new N0,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Cf(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="WebChannelConnection";class hS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(e,i,r,s,o){const a=Cf(),l=this.xo(e,i.toUriEncodedString());Xt("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(e,l,c,r).then(h=>(Xt("RestConnection",`Received RPC '${e}' ${a}: `,h),h),h=>{throw Hl("RestConnection",`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(e,i,r,s,o,a){return this.Mo(e,i,r,s,o)}Oo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}xo(e,i){const r=cS[e];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,r){const s=Cf();return new Promise((o,a)=>{const l=new by;l.setWithCredentials(!0),l.listenOnce(_y.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jh.NO_ERROR:const h=l.getResponseJson();Xt(ei,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case jh.TIMEOUT:Xt(ei,`RPC '${t}' ${s} timed out`),a(new Gt(Pt.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const f=l.getStatus();if(Xt(ei,`RPC '${t}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const v=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(Pt).indexOf(x)>=0?x:Pt.UNKNOWN}(p.status);a(new Gt(v,p.message))}else a(new Gt(Pt.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Gt(Pt.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Xt(ei,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);Xt(ei,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",c,i,15)})}Bo(t,e,i){const r=Cf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=xy(),a=Ay(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const h=s.join("");Xt(ei,`Creating RPC '${t}' stream ${r}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,p=!1;const v=new uS({Io:S=>{p?Xt(ei,`Not sending because RPC '${t}' stream ${r} is closed:`,S):(m||(Xt(ei,`Opening RPC '${t}' stream ${r} transport.`),f.open(),m=!0),Xt(ei,`RPC '${t}' stream ${r} sending:`,S),f.send(S))},To:()=>f.close()}),_=(S,x,T)=>{S.listen(x,N=>{try{T(N)}catch(O){setTimeout(()=>{throw O},0)}})};return _(f,Dc.EventType.OPEN,()=>{p||(Xt(ei,`RPC '${t}' stream ${r} transport opened.`),v.yo())}),_(f,Dc.EventType.CLOSE,()=>{p||(p=!0,Xt(ei,`RPC '${t}' stream ${r} transport closed`),v.So())}),_(f,Dc.EventType.ERROR,S=>{p||(p=!0,Hl(ei,`RPC '${t}' stream ${r} transport errored:`,S),v.So(new Gt(Pt.UNAVAILABLE,"The operation could not be completed")))}),_(f,Dc.EventType.MESSAGE,S=>{var x;if(!p){const T=S.data[0];qe(!!T);const N=T,O=N.error||((x=N[0])===null||x===void 0?void 0:x.error);if(O){Xt(ei,`RPC '${t}' stream ${r} received error:`,O);const B=O.status;let W=function(C){const D=Cn[C];if(D!==void 0)return Ky(D)}(B),P=O.message;W===void 0&&(W=Pt.INTERNAL,P="Unknown error status: "+B+" with message "+O.message),p=!0,v.So(new Gt(W,P)),f.close()}else Xt(ei,`RPC '${t}' stream ${r} received:`,T),v.bo(T)}}),_(a,wy.STAT_EVENT,S=>{S.stat===up.PROXY?Xt(ei,`RPC '${t}' stream ${r} detected buffering proxy`):S.stat===up.NOPROXY&&Xt(ei,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function kf(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(n){return new wx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&Xt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,e,i,r,s,o,a,l){this.ui=t,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ov(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return nt(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return nt(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return nt(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===Pt.RESOURCE_EXHAUSTED?(Ms(e.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===e&&this.P_(i,r)},i=>{t(()=>{const r=new Gt(Pt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,e){const i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>nt(this,null,function*(){this.state=0,this.start()}))}I_(t){return Xt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dS extends av{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=Sx(this.serializer,t),i=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Yr(o.readTime):me.min()}(t);return this.listener.d_(e,i)}A_(t){const e={};e.database=_p(this.serializer),e.addTarget=function(s,o){let a;const l=o.target;if(a=pp(l)?{documents:Px(s,l)}:{query:Tx(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Qy(s,o.resumeToken);const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=dd(s,o.snapshotVersion.toTimestamp());const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=Cx(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){const e={};e.database=_p(this.serializer),e.removeTarget=t,this.a_(e)}}class fS extends av{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return qe(!!t.streamToken),this.lastStreamToken=t.streamToken,qe(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){qe(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=Ix(t.writeResults,t.commitTime),i=Yr(t.commitTime);return this.listener.g_(i,e)}p_(){const t={};t.database=_p(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Ex(this.serializer,i))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Gt(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,vp(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Gt(Pt.UNKNOWN,s.toString())})}Lo(t,e,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(t,vp(e,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Gt(Pt.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class gS{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ms(e),this.D_=!1):Xt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>nt(this,null,function*(){Ya(this)&&(Xt("RemoteStore","Restarting streams for network reachability change."),yield function(l){return nt(this,null,function*(){const c=ye(l);c.L_.add(4),yield Mu(c),c.q_.set("Unknown"),c.L_.delete(4),yield Bd(c)})}(this))}))}),this.q_=new gS(i,r)}}function Bd(n){return nt(this,null,function*(){if(Ya(n))for(const t of n.B_)yield t(!0)})}function Mu(n){return nt(this,null,function*(){for(const t of n.B_)yield t(!1)})}function lv(n,t){const e=ye(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Ig(e)?Eg(e):sc(e).r_()&&Sg(e,t))}function xg(n,t){const e=ye(n),i=sc(e);e.N_.delete(t),i.r_()&&cv(e,t),e.N_.size===0&&(i.r_()?i.o_():Ya(e)&&e.q_.set("Unknown"))}function Sg(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}sc(n).A_(t)}function cv(n,t){n.Q_.xe(t),sc(n).R_(t)}function Eg(n){n.Q_=new yx({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),sc(n).start(),n.q_.v_()}function Ig(n){return Ya(n)&&!sc(n).n_()&&n.N_.size>0}function Ya(n){return ye(n).L_.size===0}function uv(n){n.Q_=void 0}function yS(n){return nt(this,null,function*(){n.q_.set("Online")})}function vS(n){return nt(this,null,function*(){n.N_.forEach((t,e)=>{Sg(n,t)})})}function bS(n,t){return nt(this,null,function*(){uv(n),Ig(n)?(n.q_.M_(t),Eg(n)):n.q_.set("Unknown")})}function _S(n,t,e){return nt(this,null,function*(){if(n.q_.set("Online"),t instanceof Xy&&t.state===2&&t.cause)try{yield function(r,s){return nt(this,null,function*(){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,t)}catch(i){Xt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield fd(n,i)}else if(t instanceof qh?n.Q_.Ke(t):t instanceof Yy?n.Q_.He(t):n.Q_.We(t),!e.isEqual(me.min()))try{const i=yield sv(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Yn.EMPTY_BYTE_STRING,h.snapshotVersion)),cv(s,l);const f=new Io(h.target,l,c,h.sequenceNumber);Sg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){Xt("RemoteStore","Failed to raise snapshot:",i),yield fd(n,i)}})}function fd(n,t,e){return nt(this,null,function*(){if(!Nu(t))throw t;n.L_.add(1),yield Mu(n),n.q_.set("Offline"),e||(e=()=>sv(n.localStore)),n.asyncQueue.enqueueRetryable(()=>nt(this,null,function*(){Xt("RemoteStore","Retrying IndexedDB access"),yield e(),n.L_.delete(1),yield Bd(n)}))})}function hv(n,t){return t().catch(e=>fd(n,e,t))}function jd(n){return nt(this,null,function*(){const t=ye(n),e=Ho(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;wS(t);)try{const r=yield rS(t.localStore,i);if(r===null){t.O_.length===0&&e.o_();break}i=r.batchId,AS(t,r)}catch(r){yield fd(t,r)}dv(t)&&fv(t)})}function wS(n){return Ya(n)&&n.O_.length<10}function AS(n,t){n.O_.push(t);const e=Ho(n);e.r_()&&e.V_&&e.m_(t.mutations)}function dv(n){return Ya(n)&&!Ho(n).n_()&&n.O_.length>0}function fv(n){Ho(n).start()}function xS(n){return nt(this,null,function*(){Ho(n).p_()})}function SS(n){return nt(this,null,function*(){const t=Ho(n);for(const e of n.O_)t.m_(e.mutations)})}function ES(n,t,e){return nt(this,null,function*(){const i=n.O_.shift(),r=yg.from(i,t,e);yield hv(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield jd(n)})}function IS(n,t){return nt(this,null,function*(){t&&Ho(n).V_&&(yield function(i,r){return nt(this,null,function*(){if(function(o){return px(o)&&o!==Pt.ABORTED}(r.code)){const s=i.O_.shift();Ho(i).s_(),yield hv(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield jd(i)}})}(n,t)),dv(n)&&fv(n)})}function D0(n,t){return nt(this,null,function*(){const e=ye(n);e.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const i=Ya(e);e.L_.add(3),yield Mu(e),i&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield Bd(e)})}function PS(n,t){return nt(this,null,function*(){const e=ye(n);t?(e.L_.delete(2),yield Bd(e)):t||(e.L_.add(2),yield Mu(e),e.q_.set("Unknown"))})}function sc(n){return n.K_||(n.K_=function(e,i,r){const s=ye(e);return s.w_(),new dS(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:yS.bind(null,n),Ro:vS.bind(null,n),mo:bS.bind(null,n),d_:_S.bind(null,n)}),n.B_.push(t=>nt(this,null,function*(){t?(n.K_.s_(),Ig(n)?Eg(n):n.q_.set("Unknown")):(yield n.K_.stop(),uv(n))}))),n.K_}function Ho(n){return n.U_||(n.U_=function(e,i,r){const s=ye(e);return s.w_(),new fS(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xS.bind(null,n),mo:IS.bind(null,n),f_:SS.bind(null,n),g_:ES.bind(null,n)}),n.B_.push(t=>nt(this,null,function*(){t?(n.U_.s_(),yield jd(n)):(yield n.U_.stop(),n.O_.length>0&&(Xt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new Pg(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Gt(Pt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(n,t){if(Ms("AsyncQueue",`${t}: ${n}`),Nu(n))return new Gt(Pt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Zt.comparator(e.key,i.key):(e,i)=>Zt.comparator(e.key,i.key),this.keyedMap=Mc(),this.sortedSet=new cn(this.comparator)}static emptySet(t){return new Rl(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Rl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Rl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.W_=new cn(Zt.comparator)}track(t){const e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):ue():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Yl{constructor(t,e,i,r,s,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,i,r,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Yl(t,e,Rl.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class LS{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){const r=ye(e),s=r.queries;r.queries=O0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new Gt(Pt.ABORTED,"Firestore shutting down"))}}function O0(){return new rc(n=>Oy(n),Rd)}function pv(n,t){return nt(this,null,function*(){const e=ye(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.H_()&&t.J_()&&(i=2):(s=new TS,i=t.J_()?0:1);try{switch(i){case 0:s.z_=yield e.onListen(r,!0);break;case 1:s.z_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){const a=Tg(o,`Initialization of query '${Pl(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.j_.push(t),t.Z_(e.onlineState),s.z_&&t.X_(s.z_)&&Lg(e)})}function gv(n,t){return nt(this,null,function*(){const e=ye(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function CS(n,t){const e=ye(n);let i=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Lg(e)}function kS(n,t,e){const i=ye(n),r=i.queries.get(t);if(r)for(const s of r.j_)s.onError(e);i.queries.delete(t)}function Lg(n){n.Y_.forEach(t=>{t.next()})}var Ap,F0;(F0=Ap||(Ap={})).ea="default",F0.Cache="cache";class mv{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Yl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Yl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t){this.key=t}}class vv{constructor(t){this.key=t}}class NS{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=Fy(t),this.Ra=new Rl(this.Aa)}get Va(){return this.Ta}ma(t,e){const i=e?e.fa:new M0,r=e?e.Ra:this.Ra;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,f)=>{const m=r.get(h),p=Dd(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let S=!1;m&&p?m.data.isEqual(p.data)?v!==_&&(i.track({type:3,doc:p}),S=!0):this.ga(m,p)||(i.track({type:2,doc:p}),S=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!m&&p?(i.track({type:0,doc:p}),S=!0):m&&!p&&(i.track({type:1,doc:m}),S=!0,(l||c)&&(a=!0)),S&&(p?(o=o.add(p),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const o=t.fa.G_();o.sort((h,f)=>function(p,v){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return _(p)-_(v)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(i),r=r!=null&&r;const a=e&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Yl(this.query,t.Ra,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const e=[];return t.forEach(i=>{this.da.has(i)||e.push(new vv(i))}),this.da.forEach(i=>{t.has(i)||e.push(new yv(i))}),e}ba(t){this.Ta=t.Ts,this.da=Se();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Yl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RS{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class DS{constructor(t){this.key=t,this.va=!1}}class MS{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new rc(a=>Oy(a),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new cn(Zt.comparator),this.Na=new Map,this.La=new _g,this.Ba={},this.ka=new Map,this.qa=Kl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}function OS(n,t,e=!0){return nt(this,null,function*(){const i=Sv(n);let r;const s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield bv(i,t,e,!0),r})}function FS(n,t){return nt(this,null,function*(){const e=Sv(n);yield bv(e,t,!0,!1)})}function bv(n,t,e,i){return nt(this,null,function*(){const r=yield sS(n.localStore,Kr(t)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,e);let a;return i&&(a=yield VS(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&lv(n.remoteStore,r),a})}function VS(n,t,e,i,r){return nt(this,null,function*(){n.Ka=(f,m,p)=>function(_,S,x,T){return nt(this,null,function*(){let N=S.view.ma(x);N.ns&&(N=yield k0(_.localStore,S.query,!1).then(({documents:P})=>S.view.ma(P,N)));const O=T&&T.targetChanges.get(S.targetId),B=T&&T.targetMismatches.get(S.targetId)!=null,W=S.view.applyChanges(N,_.isPrimaryClient,O,B);return B0(_,S.targetId,W.wa),W.snapshot})}(n,f,m,p);const s=yield k0(n.localStore,t,!0),o=new NS(t,s.Ts),a=o.ma(s.documents),l=Du.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);B0(n,e,c.wa);const h=new RS(t,e,o);return n.Fa.set(t,h),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),c.snapshot})}function BS(n,t,e){return nt(this,null,function*(){const i=ye(n),r=i.Fa.get(t),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Rd(o,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&xg(i.remoteStore,r.targetId),xp(i,r.targetId)}).catch(ku))):(xp(i,r.targetId),yield wp(i.localStore,r.targetId,!0))})}function jS(n,t){return nt(this,null,function*(){const e=ye(n),i=e.Fa.get(t),r=e.Ma.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),xg(e.remoteStore,i.targetId))})}function US(n,t,e){return nt(this,null,function*(){const i=KS(n);try{const r=yield function(o,a){const l=ye(o),c=On.now(),h=a.reduce((p,v)=>p.add(v.key),Se());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=Os(),_=Se();return l.cs.getEntries(p,h).next(S=>{v=S,v.forEach((x,T)=>{T.isValidDocument()||(_=_.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(S=>{f=S;const x=[];for(const T of a){const N=cx(T,f.get(T.key).overlayedDocument);N!=null&&x.push(new Xo(T.key,N,Ty(N.value.mapValue),Ar.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(S=>{m=S;const x=S.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(p,S.batchId,x)})}).then(()=>({batchId:m.batchId,changes:By(f)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new cn(Re)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,e),yield Ou(i,r.changes),yield jd(i.remoteStore)}catch(r){const s=Tg(r,"Failed to persist write");e.reject(s)}})}function _v(n,t){return nt(this,null,function*(){const e=ye(n);try{const i=yield nS(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Na.get(s);o&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?qe(o.va):r.removedDocuments.size>0&&(qe(o.va),o.va=!1))}),yield Ou(e,i,t)}catch(i){yield ku(i)}})}function V0(n,t,e){const i=ye(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&Lg(l)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function zS(n,t,e){return nt(this,null,function*(){const i=ye(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Na.get(t),s=r&&r.key;if(s){let o=new cn(Zt.comparator);o=o.insert(s,li.newNoDocument(s,me.min()));const a=Se().add(s),l=new Fd(me.min(),new Map,new cn(Re),o,a);yield _v(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(t),Cg(i)}else yield wp(i.localStore,t,!1).then(()=>xp(i,t,e)).catch(ku)})}function qS(n,t){return nt(this,null,function*(){const e=ye(n),i=t.batch.batchId;try{const r=yield eS(e.localStore,t);Av(e,i,null),wv(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ou(e,r)}catch(r){yield ku(r)}})}function HS(n,t,e){return nt(this,null,function*(){const i=ye(n);try{const r=yield function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(qe(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,t);Av(i,t,e),wv(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ou(i,r)}catch(r){yield ku(r)}})}function wv(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function Av(n,t,e){const i=ye(n);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function xp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Ma.get(t))n.Fa.delete(i),e&&n.Ca.$a(i,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(i=>{n.La.containsKey(i)||xv(n,i)})}function xv(n,t){n.xa.delete(t.path.canonicalString());const e=n.Oa.get(t);e!==null&&(xg(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),Cg(n))}function B0(n,t,e){for(const i of e)i instanceof yv?(n.La.addReference(i.key,t),WS(n,i)):i instanceof vv?(Xt("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,t),n.La.containsKey(i.key)||xv(n,i.key)):ue()}function WS(n,t){const e=t.key,i=e.path.canonicalString();n.Oa.get(e)||n.xa.has(i)||(Xt("SyncEngine","New document in limbo: "+e),n.xa.add(i),Cg(n))}function Cg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const e=new Zt(nn.fromString(t)),i=n.qa.next();n.Na.set(i,new DS(e)),n.Oa=n.Oa.insert(e,i),lv(n.remoteStore,new Io(Kr(pg(e.path)),i,"TargetPurposeLimboResolution",lg.oe))}}function Ou(n,t,e){return nt(this,null,function*(){const i=ye(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,t,e).then(c=>{var h;if((c||e)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=e==null?void 0:e.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=Ag.Wi(l.targetId,c);s.push(f)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,c){return nt(this,null,function*(){const h=ye(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Rt.forEach(c,m=>Rt.forEach(m.$i,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>Rt.forEach(m.Ui,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!Nu(f))throw f;Xt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const p=h.os.get(m),v=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(m,_)}}})}(i.localStore,s))})}function $S(n,t){return nt(this,null,function*(){const e=ye(n);if(!e.currentUser.isEqual(t)){Xt("SyncEngine","User change. New user:",t.toKey());const i=yield rv(e.localStore,t);e.currentUser=t,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Gt(Pt.CANCELLED,o))})}),s.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ou(e,i.hs)}})}function GS(n,t){const e=ye(n),i=e.Na.get(t);if(i&&i.va)return Se().add(i.key);{let r=Se();const s=e.Ma.get(t);if(!s)return r;for(const o of s){const a=e.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Sv(n){const t=ye(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=_v.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zS.bind(null,t),t.Ca.d_=CS.bind(null,t.eventManager),t.Ca.$a=kS.bind(null,t.eventManager),t}function KS(n){const t=ye(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HS.bind(null,t),t}class pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return nt(this,null,function*(){this.serializer=Vd(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,e){return null}Ha(t,e){return null}za(t){return tS(this.persistence,new Jx,t.initialUser,this.serializer)}Ga(t){return new Yx(wg.Zr,this.serializer)}Wa(t){return new aS}terminate(){return nt(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}pd.provider={build:()=>new pd};class Sp{initialize(t,e){return nt(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$S.bind(null,this.syncEngine),yield PS(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new LS}()}createDatastore(t){const e=Vd(t.databaseInfo.databaseId),i=function(s){return new hS(s)}(t.databaseInfo);return function(s,o,a,l){return new pS(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,a){return new mS(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>V0(this.syncEngine,e,0),function(){return R0.D()?new R0:new lS}())}createSyncEngine(t,e){return function(r,s,o,a,l,c,h){const f=new MS(r,s,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return nt(this,null,function*(){var t,e;yield function(r){return nt(this,null,function*(){const s=ye(r);Xt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Mu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Ms("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,e,i,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=ai.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>nt(this,null,function*(){Xt("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(Xt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>nt(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Tg(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Nf(n,t){return nt(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>nt(this,null,function*(){i.isEqual(r)||(yield rv(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function j0(n,t){return nt(this,null,function*(){n.asyncQueue.verifyOperationInProgress();const e=yield XS(n);Xt("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>D0(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>D0(t.remoteStore,r)),n._onlineComponents=t})}function XS(n){return nt(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Xt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Nf(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===Pt.FAILED_PRECONDITION||r.code===Pt.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;Hl("Error using user provided cache. Falling back to memory cache: "+e),yield Nf(n,new pd)}}else Xt("FirestoreClient","Using default OfflineComponentProvider"),yield Nf(n,new pd);return n._offlineComponents})}function Iv(n){return nt(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Xt("FirestoreClient","Using user provided OnlineComponentProvider"),yield j0(n,n._uninitializedComponentsProvider._online)):(Xt("FirestoreClient","Using default OnlineComponentProvider"),yield j0(n,new Sp))),n._onlineComponents})}function QS(n){return Iv(n).then(t=>t.syncEngine)}function Ep(n){return nt(this,null,function*(){const t=yield Iv(n),e=t.eventManager;return e.onListen=OS.bind(null,t.syncEngine),e.onUnlisten=BS.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=FS.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=jS.bind(null,t.syncEngine),e})}function JS(n,t,e={}){const i=new Vo;return n.asyncQueue.enqueueAndForget(()=>nt(this,null,function*(){return function(s,o,a,l,c){const h=new Ev({next:m=>{h.Za(),o.enqueueAndForget(()=>gv(s,f)),m.fromCache&&l.source==="server"?c.reject(new Gt(Pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new mv(a,h,{includeMetadataChanges:!0,_a:!0});return pv(s,f)}(yield Ep(n),n.asyncQueue,t,e,i)})),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n,t,e){if(!e)throw new Gt(Pt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function ZS(n,t,e,i){if(t===!0&&i===!0)throw new Gt(Pt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function z0(n){if(!Zt.isDocumentKey(n))throw new Gt(Pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q0(n){if(Zt.isDocumentKey(n))throw new Gt(Pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ud(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ue()}function Xr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Gt(Pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ud(n);throw new Gt(Pt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Gt(Pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Gt(Pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pv((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Gt(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Gt(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Gt(Pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Gt(Pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Gt(Pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new vA;switch(i.type){case"firstParty":return new AA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Gt(Pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return nt(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=U0.get(e);i&&(Xt("ComponentProvider","Removing Datastore"),U0.delete(e),i.terminate())}(this),Promise.resolve()}}function tE(n,t,e,i={}){var r;const s=(n=Xr(n,zd))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=ai.MOCK_USER;else{a=$_(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Gt(Pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ai(c)}n._authCredentials=new bA(new Sy(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Qo(this.firestore,t,this._query)}}class Ri{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ri(this.firestore,t,this._key)}}class Bo extends Qo{constructor(t,e,i){super(t,e,pg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ri(this.firestore,null,new Zt(t))}withConverter(t){return new Bo(this.firestore,t,this._path)}}function Wo(n,t,...e){if(n=di(n),Tv("collection","path",t),n instanceof zd){const i=nn.fromString(t,...e);return q0(i),new Bo(n,null,i)}{if(!(n instanceof Ri||n instanceof Bo))throw new Gt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nn.fromString(t,...e));return q0(i),new Bo(n.firestore,null,i)}}function qa(n,t,...e){if(n=di(n),arguments.length===1&&(t=Ey.newId()),Tv("doc","path",t),n instanceof zd){const i=nn.fromString(t,...e);return z0(i),new Ri(n,null,new Zt(i))}{if(!(n instanceof Ri||n instanceof Bo))throw new Gt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nn.fromString(t,...e));return z0(i),new Ri(n.firestore,n instanceof Bo?n.converter:null,new Zt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ov(this,"async_queue_retry"),this.Vu=()=>{const i=kf();i&&Xt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const e=kf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=kf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new Vo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return nt(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Nu(t))throw t;Xt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ms("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const r=Pg.createAndSchedule(this,t,e,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ue()}verifyOperationInProgress(){}wu(){return nt(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}function $0(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Ha extends zd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new W0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return nt(this,null,function*(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new W0(t),this._firestoreClient=void 0,yield t}})}}function eE(n,t){const e=typeof n=="object"?n:gy(),i=typeof n=="string"?n:"(default)",r=og(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=H_("firestore");s&&tE(r,...s)}return r}function kg(n){if(n._terminated)throw new Gt(Pt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nE(n),n._firestoreClient}function nE(n){var t,e,i;const r=n._freezeSettings(),s=function(a,l,c,h){return new MA(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Pv(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new YS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xl(Yn.fromBase64String(t))}catch(e){throw new Gt(Pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Xl(Yn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Gt(Pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gt(Pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gt(Pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Re(this._lat,t._lat)||Re(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=/^__.*__$/;class rE{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ru(t,this.data,e,this.fieldTransforms)}}class Lv{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Cv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Mg{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Mg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return gd(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(Cv(this.Cu)&&iE.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class sE{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Vd(t)}Qu(t,e,i,r=!1){return new Mg({Cu:t,methodName:e,qu:i,path:Gn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Og(n){const t=n._freezeSettings(),e=Vd(n._databaseId);return new sE(n._databaseId,!!t.ignoreUndefinedProperties,e)}function oE(n,t,e,i,r,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,t,e,r);Fg("Data must be an object, but it was:",o,i);const a=kv(i,o);let l,c;if(s.merge)l=new $i(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=Ip(t,f,e);if(!o.contains(m))throw new Gt(Pt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Rv(h,m)||h.push(m)}l=new $i(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new rE(new Ci(a),l,c)}class Hd extends Ng{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Hd}}function aE(n,t,e,i){const r=n.Qu(1,t,e);Fg("Data must be an object, but it was:",r,i);const s=[],o=Ci.empty();Ka(i,(l,c)=>{const h=Vg(t,l,e);c=di(c);const f=r.Nu(h);if(c instanceof Hd)s.push(h);else{const m=Fu(c,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new $i(s);return new Lv(o,a,r.fieldTransforms)}function lE(n,t,e,i,r,s){const o=n.Qu(1,t,e),a=[Ip(t,i,e)],l=[r];if(s.length%2!=0)throw new Gt(Pt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Ip(t,s[m])),l.push(s[m+1]);const c=[],h=Ci.empty();for(let m=a.length-1;m>=0;--m)if(!Rv(c,a[m])){const p=a[m];let v=l[m];v=di(v);const _=o.Nu(p);if(v instanceof Hd)c.push(p);else{const S=Fu(v,_);S!=null&&(c.push(p),h.set(p,S))}}const f=new $i(c);return new Lv(h,f,o.fieldTransforms)}function cE(n,t,e,i=!1){return Fu(e,n.Qu(i?4:3,t))}function Fu(n,t){if(Nv(n=di(n)))return Fg("Unsupported field value:",t,n),kv(n,t);if(n instanceof Ng)return function(i,r){if(!Cv(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Fu(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=di(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ix(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=On.fromDate(i);return{timestampValue:dd(r.serializer,s)}}if(i instanceof On){const s=new On(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dd(r.serializer,s)}}if(i instanceof Rg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xl)return{bytesValue:Qy(r.serializer,i._byteString)};if(i instanceof Ri){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Dg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return gg(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Ud(i)}`)}(n,t)}function kv(n,t){const e={};return Iy(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ka(n,(i,r)=>{const s=Fu(r,t.Mu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function Nv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof On||n instanceof Rg||n instanceof Xl||n instanceof Ri||n instanceof Ng||n instanceof Dg)}function Fg(n,t,e){if(!Nv(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=Ud(e);throw i==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+i)}}function Ip(n,t,e){if((t=di(t))instanceof qd)return t._internalPath;if(typeof t=="string")return Vg(n,t);throw gd("Field path arguments must be of type string or ",n,!1,void 0,e)}const uE=new RegExp("[~\\*/\\[\\]]");function Vg(n,t,e){if(t.search(uE)>=0)throw gd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new qd(...t.split("."))._internalPath}catch(i){throw gd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function gd(n,t,e,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Gt(Pt.INVALID_ARGUMENT,a+n+l)}function Rv(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new hE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Wd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class hE extends Dv{data(){return super.data()}}function Wd(n,t){return typeof t=="string"?Vg(n,t):t instanceof qd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Gt(Pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class Ov extends Bg{}function Hh(n,t,...e){let i=[];t instanceof Bg&&i.push(t),i=i.concat(e),function(s){const o=s.filter(l=>l instanceof jg).length,a=s.filter(l=>l instanceof $d).length;if(o>1||o>0&&a>0)throw new Gt(Pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class $d extends Ov{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new $d(t,e,i)}_apply(t){const e=this._parse(t);return Fv(t._query,e),new Qo(t.firestore,t.converter,gp(t._query,e))}_parse(t){const e=Og(t.firestore);return function(s,o,a,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Gt(Pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){K0(f,h);const p=[];for(const v of f)p.push(G0(l,s,v));m={arrayValue:{values:p}}}else m=G0(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||K0(f,h),m=cE(a,o,f,h==="in"||h==="not-in");return kn.create(c,h,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Al(n,t,e){const i=t,r=Wd("where",n);return $d._create(r,i,e)}class jg extends Bg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new jg(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Sr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)Fv(o,l),o=gp(o,l)}(t._query,e),new Qo(t.firestore,t.converter,gp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ug extends Ov{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ug(t,e)}_apply(t){const e=function(r,s,o){if(r.startAt!==null)throw new Gt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Gt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pu(s,o)}(t._query,this._field,this._direction);return new Qo(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new ic(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function Rf(n,t="asc"){const e=t,i=Wd("orderBy",n);return Ug._create(i,e)}function G0(n,t,e){if(typeof(e=di(e))=="string"){if(e==="")throw new Gt(Pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!My(t)&&e.indexOf("/")!==-1)throw new Gt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(nn.fromString(e));if(!Zt.isDocumentKey(i))throw new Gt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return p0(n,new Zt(i))}if(e instanceof Ri)return p0(n,e._key);throw new Gt(Pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(e)}.`)}function K0(n,t){if(!Array.isArray(n)||n.length===0)throw new Gt(Pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Fv(n,t){const e=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Gt(Pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Gt(Pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class dE{convertValue(t,e="none"){switch(za(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _n(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ua(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ue()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Ka(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertVectorValue(t){var e,i,r;const s=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>_n(o.doubleValue));return new Dg(s)}convertGeoPoint(t){return new Rg(_n(t.latitude),_n(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=ug(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(hu(t));default:return null}}convertTimestamp(t){const e=qo(t);return new On(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=nn.fromString(t);qe(iv(i));const r=new du(i.get(1),i.get(3)),s=new Zt(i.popFirst(5));return r.isEqual(e)||Ms(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vv extends Dv{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Wd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Wh extends Vv{data(t={}){return super.data(t)}}class Bv{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Fc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Wh(this._firestore,this._userDataWriter,i.key,i,new Fc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gt(Pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Wh(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Fc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Wh(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Fc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:pE(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}class zg extends dE{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ri(this.firestore,null,e)}}function Dl(n){n=Xr(n,Qo);const t=Xr(n.firestore,Ha),e=kg(t),i=new zg(t);return Mv(n._query),JS(e,n._query).then(r=>new Bv(t,i,n,r))}function qg(n,t,e,...i){n=Xr(n,Ri);const r=Xr(n.firestore,Ha),s=Og(r);let o;return o=typeof(t=di(t))=="string"||t instanceof qd?lE(s,"updateDoc",n._key,t,e,i):aE(s,"updateDoc",n._key,t),$g(r,[o.toMutation(n._key,Ar.exists(!0))])}function Hg(n){return $g(Xr(n.firestore,Ha),[new mg(n._key,Ar.none())])}function Wg(n,t){const e=Xr(n.firestore,Ha),i=qa(n),r=fE(n.converter,t);return $g(e,[oE(Og(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ar.exists(!1))]).then(()=>i)}function gE(n,...t){var e,i,r;n=di(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||$0(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($0(t[o])){const f=t[o];t[o]=(e=f.next)===null||e===void 0?void 0:e.bind(f),t[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),t[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,c,h;if(n instanceof Ri)c=Xr(n.firestore,Ha),h=pg(n._key.path),l={next:f=>{t[o]&&t[o](mE(c,n,f))},error:t[o+1],complete:t[o+2]};else{const f=Xr(n,Qo);c=Xr(f.firestore,Ha),h=f._query;const m=new zg(c);l={next:p=>{t[o]&&t[o](new Bv(c,m,f,p))},error:t[o+1],complete:t[o+2]},Mv(n._query)}return function(m,p,v,_){const S=new Ev(_),x=new mv(p,S,v);return m.asyncQueue.enqueueAndForget(()=>nt(this,null,function*(){return pv(yield Ep(m),x)})),()=>{S.Za(),m.asyncQueue.enqueueAndForget(()=>nt(this,null,function*(){return gv(yield Ep(m),x)}))}}(kg(c),h,a,l)}function $g(n,t){return function(i,r){const s=new Vo;return i.asyncQueue.enqueueAndForget(()=>nt(this,null,function*(){return US(yield QS(i),r,s)})),s.promise}(kg(n),t)}function mE(n,t,e){const i=e.docs.get(t._key),r=new zg(n);return new Vv(n,r,t._key,i,new Fc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){nc=r})(ec),ql(new Ba("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ha(new _A(i.getProvider("auth-internal")),new SA(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Gt(Pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Fo(c0,"4.7.3",t),Fo(c0,"4.7.3","esm2017")})();function Gg(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yE=jv,Uv=new Lu("auth","Firebase",jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new rg("@firebase/auth");function vE(n,...t){md.logLevel<=Pe.WARN&&md.warn(`Auth (${ec}): ${n}`,...t)}function $h(n,...t){md.logLevel<=Pe.ERROR&&md.error(`Auth (${ec}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,...t){throw Kg(n,...t)}function Qr(n,...t){return Kg(n,...t)}function zv(n,t,e){const i=Object.assign(Object.assign({},yE()),{[t]:e});return new Lu("auth","Firebase",i).create(t,{appName:n.name})}function Na(n){return zv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kg(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return Uv.create(n,...t)}function ce(n,t,...e){if(!n)throw Kg(t,...e)}function Ts(n){const t="INTERNAL ASSERTION FAILED: "+n;throw $h(t),new Error(t)}function Vs(n,t){n||Ts(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function bE(){return Y0()==="http:"||Y0()==="https:"}function Y0(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bE()||X_()||"connection"in navigator)?navigator.onLine:!0}function wE(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Vs(e>t,"Short delay should be less than long delay!"),this.isMobile=G_()||Q_()}get(){return _E()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(n,t){Vs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Vu(3e4,6e4);function Xg(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function oc(s,o,a,l){return nt(this,arguments,function*(n,t,e,i,r={}){return Hv(n,r,()=>nt(this,null,function*(){let c={},h={};i&&(t==="GET"?h=i:c={body:JSON.stringify(i)});const f=Cu(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:t,headers:m},c);return Y_()||(p.referrerPolicy="no-referrer"),qv.fetch()(Wv(n,n.config.apiHost,e,f),p)}))})}function Hv(n,t,e){return nt(this,null,function*(){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},AE),t);try{const r=new EE(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw vh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vh(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw vh(n,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zv(n,h,c);Fs(n,h)}}catch(r){if(r instanceof Bs)throw r;Fs(n,"network-request-failed",{message:String(r)})}})}function SE(s,o,a,l){return nt(this,arguments,function*(n,t,e,i,r={}){const c=yield oc(n,t,e,i,r);return"mfaPendingCredential"in c&&Fs(n,"multi-factor-auth-required",{_serverResponse:c}),c})}function Wv(n,t,e,i){const r=`${t}${e}?${i}`;return n.config.emulator?Yg(n.config,r):`${n.config.apiScheme}://${r}`}class EE{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Qr(this.auth,"network-request-failed")),xE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Qr(n,t,i);return r.customData._tokenResponse=e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(n,t){return nt(this,null,function*(){return oc(n,"POST","/v1/accounts:delete",t)})}function $v(n,t){return nt(this,null,function*(){return oc(n,"POST","/v1/accounts:lookup",t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function PE(n,t=!1){return nt(this,null,function*(){const e=di(n),i=yield e.getIdToken(t),r=Qg(i);ce(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Yc(Df(r.auth_time)),issuedAtTime:Yc(Df(r.iat)),expirationTime:Yc(Df(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}})}function Df(n){return Number(n)*1e3}function Qg(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const r=ly(e);return r?JSON.parse(r):($h("Failed to decode base64 JWT payload"),null)}catch(r){return $h("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function X0(n){const t=Qg(n);return ce(t,"internal-error"),ce(typeof t.exp!="undefined","internal-error"),ce(typeof t.iat!="undefined","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n,t,e=!1){return nt(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof Bs&&TE(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function TE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(()=>nt(this,null,function*(){yield this.iteration()}),e)}iteration(){return nt(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yc(this.lastLoginAt),this.creationTime=Yc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){return nt(this,null,function*(){var t;const e=n.auth,i=yield n.getIdToken(),r=yield yu(n,$v(e,{idToken:i}));ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Gv(s.providerUserInfo):[],a=kE(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function CE(n){return nt(this,null,function*(){const t=di(n);yield yd(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function kE(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Gv(n){return n.map(t=>{var{providerId:e}=t,i=Gg(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,t){return nt(this,null,function*(){const e=yield Hv(n,{},()=>nt(this,null,function*(){const i=Cu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Wv(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qv.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function RE(n,t){return nt(this,null,function*(){return oc(n,"POST","/v2/accounts:revokeToken",Xg(n,t))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ce(t.idToken,"internal-error"),ce(typeof t.idToken!="undefined","internal-error"),ce(typeof t.refreshToken!="undefined","internal-error");const e="expiresIn"in t&&typeof t.expiresIn!="undefined"?Number(t.expiresIn):X0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ce(t.length!==0,"internal-error");const e=X0(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return nt(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return nt(this,null,function*(){const{accessToken:i,refreshToken:r,expiresIn:s}=yield NE(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:s}=e,o=new Ml;return i&&(ce(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(ce(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(ce(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,t){ce(typeof n=="string"||typeof n=="undefined","internal-error",{appName:t})}class Ls{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=Gg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return nt(this,null,function*(){const e=yield yu(this,this.stsTokenManager.getToken(this.auth,t));return ce(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return PE(this,t)}reload(){return CE(this)}_assign(t){this!==t&&(ce(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ls(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return nt(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield yd(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return nt(this,null,function*(){if(Eo(this.auth.app))return Promise.reject(Na(this.auth));const t=yield this.getIdToken();return yield yu(this,IE(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,o,a,l,c,h;const f=(i=e.displayName)!==null&&i!==void 0?i:void 0,m=(r=e.email)!==null&&r!==void 0?r:void 0,p=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=e.photoURL)!==null&&o!==void 0?o:void 0,_=(a=e.tenantId)!==null&&a!==void 0?a:void 0,S=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=e.createdAt)!==null&&c!==void 0?c:void 0,T=(h=e.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:O,isAnonymous:B,providerData:W,stsTokenManager:P}=e;ce(N&&P,t,"internal-error");const A=Ml.fromJSON(this.name,P);ce(typeof N=="string",t,"internal-error"),yo(f,t.name),yo(m,t.name),ce(typeof O=="boolean",t,"internal-error"),ce(typeof B=="boolean",t,"internal-error"),yo(p,t.name),yo(v,t.name),yo(_,t.name),yo(S,t.name),yo(x,t.name),yo(T,t.name);const C=new Ls({uid:N,auth:t,email:m,emailVerified:O,displayName:f,isAnonymous:B,photoURL:v,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:x,lastLoginAt:T});return W&&Array.isArray(W)&&(C.providerData=W.map(D=>Object.assign({},D))),S&&(C._redirectEventId=S),C}static _fromIdTokenResponse(t,e,i=!1){return nt(this,null,function*(){const r=new Ml;r.updateFromServerResponse(e);const s=new Ls({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield yd(s),s})}static _fromGetAccountInfoResponse(t,e,i){return nt(this,null,function*(){const r=e.users[0];ce(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Gv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ml;a.updateFromIdToken(i);const l=new Ls({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Tp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;function Cs(n){Vs(n instanceof Function,"Expected a class definition");let t=Q0.get(n);return t?(Vs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Q0.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return nt(this,null,function*(){return!0})}_set(t,e){return nt(this,null,function*(){this.storage[t]=e})}_get(t){return nt(this,null,function*(){const e=this.storage[t];return e===void 0?null:e})}_remove(t){return nt(this,null,function*(){delete this.storage[t]})}_addListener(t,e){}_removeListener(t,e){}}Kv.type="NONE";const J0=Kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n,t,e){return`firebase:${n}:${t}:${e}`}class Ol{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Gh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Gh("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return nt(this,null,function*(){const t=yield this.persistence._get(this.fullUserKey);return t?Ls._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return nt(this,null,function*(){if(this.persistence===t)return;const e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return nt(this,null,function*(){if(!e.length)return new Ol(Cs(J0),t,i);const r=(yield Promise.all(e.map(c=>nt(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c);let s=r[0]||Cs(J0);const o=Gh(i,t.config.apiKey,t.name);let a=null;for(const c of e)try{const h=yield c._get(o);if(h){const f=Ls._fromJSON(t,h);c!==s&&(a=f),s=c;break}}catch(h){}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ol(s,t,i):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(e.map(c=>nt(this,null,function*(){if(c!==s)try{yield c._remove(o)}catch(h){}}))),new Ol(s,t,i))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(t5(t))return"Blackberry";if(e5(t))return"Webos";if(Xv(t))return"Safari";if((t.includes("chrome/")||Qv(t))&&!t.includes("edge/"))return"Chrome";if(Zv(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Yv(n=hi()){return/firefox\//i.test(n)}function Xv(n=hi()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Qv(n=hi()){return/crios\//i.test(n)}function Jv(n=hi()){return/iemobile/i.test(n)}function Zv(n=hi()){return/android/i.test(n)}function t5(n=hi()){return/blackberry/i.test(n)}function e5(n=hi()){return/webos/i.test(n)}function Jg(n=hi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DE(n=hi()){var t;return Jg(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ME(){return J_()&&document.documentMode===10}function n5(n=hi()){return Jg(n)||Zv(n)||e5(n)||t5(n)||/windows phone/i.test(n)||Jv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(n,t=[]){let e;switch(n){case"Browser":e=Z0(hi());break;case"Worker":e=`${Z0(hi())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ec}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return nt(this,null,function*(){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(e){return nt(this,arguments,function*(n,t={}){return oc(n,"GET","/v2/passwordPolicy",Xg(n,t))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=6;class BE{constructor(t){var e,i,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:VE,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t1(this),this.idTokenSubscription=new t1(this),this.beforeStateQueue=new OE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Cs(e)),this._initializationPromise=this.queue(()=>nt(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Ol.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(s){}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return nt(this,null,function*(){if(this._deleted)return;const t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return nt(this,null,function*(){try{const e=yield $v(this,{idToken:t}),i=yield Ls._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return nt(this,null,function*(){var e;if(Eo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=yield this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,a=r==null?void 0:r._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return nt(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(i){yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return nt(this,null,function*(){try{yield yd(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=wE()}_delete(){return nt(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return nt(this,null,function*(){if(Eo(this.app))return Promise.reject(Na(this));const e=t?di(t):null;return e&&ce(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return nt(this,null,function*(){if(!this._deleted)return t&&ce(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>nt(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return nt(this,null,function*(){return Eo(this.app)?Promise.reject(Na(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Eo(this.app)?Promise.reject(Na(this)):this.queue(()=>nt(this,null,function*(){yield this.assertedPersistence.setPersistence(Cs(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return nt(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return nt(this,null,function*(){const t=yield FE(this),e=new BE(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Lu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return nt(this,null,function*(){if(this.currentUser){const e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield RE(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return nt(this,null,function*(){const i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return nt(this,null,function*(){if(!this.redirectPersistenceManager){const e=t&&Cs(t)||this._popupRedirectResolver;ce(e,this,"argument-error"),this.redirectPersistenceManager=yield Ol.create(this,[Cs(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return nt(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>nt(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return nt(this,null,function*(){if(t===this.currentUser)return this.queue(()=>nt(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,i,r);return()=>{o=!0,l()}}else{const l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return nt(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=i5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return nt(this,null,function*(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return nt(this,null,function*(){var t;const e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e!=null&&e.error&&vE(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token})}}function Zg(n){return di(n)}class t1{constructor(t){this.auth=t,this.observer=null,this.addObserver=ow(e=>this.observer=e)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm={loadJS(){return nt(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UE(n){tm=n}function zE(n){return tm.loadJS(n)}function qE(){return tm.gapiScript}function HE(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,t){const e=og(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),s=e.getOptions();if(od(s,t!=null?t:{}))return r;Fs(r,"already-initialized")}return e.initialize({options:t})}function $E(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Cs);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function GE(n,t,e){const i=Zg(n);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=r5(t),{host:o,port:a}=KE(t),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),YE()}function r5(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function KE(n){const t=r5(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:e1(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:e1(o)}}}function e1(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function YE(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ts("not implemented")}_getIdTokenResponse(t){return Ts("not implemented")}_linkToIdToken(t,e){return Ts("not implemented")}_getReauthenticationResolver(t){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(n,t){return nt(this,null,function*(){return SE(n,"POST","/v1/accounts:signInWithIdp",Xg(n,t))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="http://localhost";class Wa extends s5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Wa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Fs("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,s=Gg(e,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Wa(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return Fl(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Fl(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Fl(t,e)}buildRequest(){const t={requestUri:XE,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Cu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends o5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Bu{constructor(){super("facebook.com")}static credential(t){return Wa._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _o.credentialFromTaggedObject(t)}static credentialFromError(t){return _o.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _o.credential(t.oauthAccessToken)}catch(e){return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Wa._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return wo.credentialFromTaggedObject(t)}static credentialFromError(t){return wo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return wo.credential(e,i)}catch(r){return null}}}wo.GOOGLE_SIGN_IN_METHOD="google.com";wo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Bu{constructor(){super("github.com")}static credential(t){return Wa._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ao.credentialFromTaggedObject(t)}static credentialFromError(t){return Ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ao.credential(t.oauthAccessToken)}catch(e){return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Bu{constructor(){super("twitter.com")}static credential(t,e){return Wa._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return xo.credentialFromTaggedObject(t)}static credentialFromError(t){return xo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return xo.credential(e,i)}catch(r){return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return nt(this,null,function*(){const s=yield Ls._fromIdTokenResponse(t,i,r),o=n1(i);return new Ql({user:s,providerId:o,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return nt(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);const r=n1(i);return new Ql({user:t,providerId:r,_tokenResponse:i,operationType:e})})}}function n1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Bs{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new vd(t,e,i,r)}}function a5(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(n,s,t,i):s})}function QE(n,t,e=!1){return nt(this,null,function*(){const i=yield yu(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return Ql._forOperation(n,"link",i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n,t,e=!1){return nt(this,null,function*(){const{auth:i}=n;if(Eo(i.app))return Promise.reject(Na(i));const r="reauthenticate";try{const s=yield yu(n,a5(i,r,t,n),e);ce(s.idToken,i,"internal-error");const o=Qg(s.idToken);ce(o,i,"internal-error");const{sub:a}=o;return ce(n.uid===a,i,"user-mismatch"),Ql._forOperation(n,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fs(i,"user-mismatch"),s}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,t,e=!1){return nt(this,null,function*(){if(Eo(n.app))return Promise.reject(Na(n));const i="signIn",r=yield a5(n,i,t),s=yield Ql._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function t4(n,t,e,i){return di(n).onIdTokenChanged(t,e,i)}function e4(n,t,e){return di(n).beforeAuthStateChanged(t,e)}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,i4=10;class Vl extends l5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!e&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);ME()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,i4):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},n4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,e){return nt(this,null,function*(){yield ba(Vl.prototype,this,"_set").call(this,t,e),this.localCache[t]=JSON.stringify(e)})}_get(t){return nt(this,null,function*(){const e=yield ba(Vl.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(e),e})}_remove(t){return nt(this,null,function*(){yield ba(Vl.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}Vl.type="LOCAL";const r4=Vl;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5 extends l5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}c5.type="SESSION";const u5=c5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){return Promise.all(n.map(t=>nt(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Gd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return nt(this,null,function*(){const e=t,{eventId:i,eventType:r,data:s}=e.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(c=>nt(this,null,function*(){return c(e.origin,s)})),l=yield s4(a);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return nt(this,null,function*(){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=em("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function a4(n){Jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(){return typeof Jr().WorkerGlobalScope!="undefined"&&typeof Jr().importScripts=="function"}function l4(){return nt(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})}function c4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function u4(){return h5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="firebaseLocalStorageDb",h4=1,_d="firebaseLocalStorage",f5="fbase_key";class ju{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Kd(n,t){return n.transaction([_d],t?"readwrite":"readonly").objectStore(_d)}function d4(){const n=indexedDB.deleteDatabase(d5);return new ju(n).toPromise()}function Lp(){const n=indexedDB.open(d5,h4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_d,{keyPath:f5})}catch(r){e(r)}}),n.addEventListener("success",()=>nt(this,null,function*(){const i=n.result;i.objectStoreNames.contains(_d)?t(i):(i.close(),yield d4(),t(yield Lp()))}))})}function i1(n,t,e){return nt(this,null,function*(){const i=Kd(n,!0).put({[f5]:t,value:e});return new ju(i).toPromise()})}function f4(n,t){return nt(this,null,function*(){const e=Kd(n,!1).get(t),i=yield new ju(e).toPromise();return i===void 0?null:i.value})}function r1(n,t){const e=Kd(n,!0).delete(t);return new ju(e).toPromise()}const p4=800,g4=3;class p5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return nt(this,null,function*(){return this.db?this.db:(this.db=yield Lp(),this.db)})}_withRetries(t){return nt(this,null,function*(){let e=0;for(;;)try{const i=yield this._openDb();return yield t(i)}catch(i){if(e++>g4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return nt(this,null,function*(){return h5()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return nt(this,null,function*(){this.receiver=Gd._getInstance(u4()),this.receiver._subscribe("keyChanged",(t,e)=>nt(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(e.key)}})),this.receiver._subscribe("ping",(t,e)=>nt(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return nt(this,null,function*(){var t,e;if(this.activeServiceWorker=yield l4(),!this.activeServiceWorker)return;this.sender=new o4(this.activeServiceWorker);const i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return nt(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||c4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}})}_isAvailable(){return nt(this,null,function*(){try{if(!indexedDB)return!1;const t=yield Lp();return yield i1(t,bd,"1"),yield r1(t,bd),!0}catch(t){}return!1})}_withPendingWrite(t){return nt(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,e){return nt(this,null,function*(){return this._withPendingWrite(()=>nt(this,null,function*(){return yield this._withRetries(i=>i1(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)}))})}_get(t){return nt(this,null,function*(){const e=yield this._withRetries(i=>f4(i,t));return this.localCache[t]=e,e})}_remove(t){return nt(this,null,function*(){return this._withPendingWrite(()=>nt(this,null,function*(){return yield this._withRetries(e=>r1(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return nt(this,null,function*(){const t=yield this._withRetries(r=>{const s=Kd(r,!1).getAll();return new ju(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e})}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>nt(this,null,function*(){return this._poll()}),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p5.type="LOCAL";const m4=p5;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(n,t){return t?Cs(t):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends s5{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Fl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Fl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Fl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function v4(n){return ZE(n.auth,new nm(n),n.bypassAuthState)}function b4(n){const{auth:t,user:e}=n;return ce(e,t,"internal-error"),JE(e,new nm(n),n.bypassAuthState)}function _4(n){return nt(this,null,function*(){const{auth:t,user:e}=n;return ce(e,t,"internal-error"),QE(e,new nm(n),n.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>nt(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return nt(this,null,function*(){const{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return _4;case"reauthViaPopup":case"reauthViaRedirect":return b4;default:Fs(this.auth,"internal-error")}}resolve(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new Vu(2e3,1e4);class Nl extends g5{constructor(t,e,i,r,s){super(t,e,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Nl.currentPopupAction&&Nl.currentPopupAction.cancel(),Nl.currentPopupAction=this}executeNotNull(){return nt(this,null,function*(){const t=yield this.execute();return ce(t,this.auth,"internal-error"),t})}onExecution(){return nt(this,null,function*(){Vs(this.filter.length===1,"Popup operations only handle one event");const t=em();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nl.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,w4.get())};t()}}Nl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="pendingRedirect",Kh=new Map;class Xc extends g5{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return nt(this,null,function*(){let t=Kh.get(this.auth._key());if(!t){try{const i=(yield x4(this.resolver,this.auth))?yield ba(Xc.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Kh.set(this.auth._key(),t)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return nt(this,null,function*(){if(t.type==="signInViaRedirect")return ba(Xc.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,ba(Xc.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return nt(this,null,function*(){})}cleanUp(){}}function x4(n,t){return nt(this,null,function*(){const e=I4(t),i=E4(n);if(!(yield i._isAvailable()))return!1;const r=(yield i._get(e))==="true";return yield i._remove(e),r})}function S4(n,t){Kh.set(n._key(),t)}function E4(n){return Cs(n._redirectPersistence)}function I4(n){return Gh(A4,n.config.apiKey,n.name)}function P4(n,t,e=!1){return nt(this,null,function*(){if(Eo(n.app))return Promise.reject(Na(n));const i=Zg(n),r=y4(i,t),o=yield new Xc(i,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=10*60*1e3;class L4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!C4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!m5(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Qr(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=T4&&this.cachedEventUids.clear(),this.cachedEventUids.has(s1(t))}saveEventToCache(t){this.cachedEventUids.add(s1(t)),this.lastProcessedEventTime=Date.now()}}function s1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function m5({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function C4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m5(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(e){return nt(this,arguments,function*(n,t={}){return oc(n,"GET","/v1/projects",t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R4=/^https?/;function D4(n){return nt(this,null,function*(){if(n.config.emulator)return;const{authorizedDomains:t}=yield k4(n);for(const e of t)try{if(M4(e))return}catch(i){}Fs(n,"unauthorized-domain")})}function M4(n){const t=Pp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!R4.test(e))return!1;if(N4.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Vu(3e4,6e4);function o1(){const n=Jr().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function F4(n){return new Promise((t,e)=>{var i,r,s;function o(){o1(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{o1(),e(Qr(n,"network-request-failed"))},timeout:O4.get()})}if(!((r=(i=Jr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Jr().gapi)===null||s===void 0)&&s.load)o();else{const a=HE("iframefcb");return Jr()[a]=()=>{gapi.load?o():e(Qr(n,"network-request-failed"))},zE(`${qE()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Yh=null,t})}let Yh=null;function V4(n){return Yh=Yh||F4(n),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Vu(5e3,15e3),j4="__/auth/iframe",U4="emulator/auth/iframe",z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H4(n){const t=n.config;ce(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Yg(t,U4):`https://${n.config.authDomain}/${j4}`,i={apiKey:t.apiKey,appName:n.name,v:ec},r=q4.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${Cu(i).slice(1)}`}function W4(n){return nt(this,null,function*(){const t=yield V4(n),e=Jr().gapi;return ce(e,n,"internal-error"),t.open({where:document.body,url:H4(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z4,dontclear:!0},i=>new Promise((r,s)=>nt(this,null,function*(){yield i.restyle({setHideOnLeave:!1});const o=Qr(n,"network-request-failed"),a=Jr().setTimeout(()=>{s(o)},B4.get());function l(){Jr().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,K4=600,Y4="_blank",X4="http://localhost";class a1{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Q4(n,t,e,i=G4,r=K4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$4),{width:i.toString(),height:r.toString(),top:s,left:o}),c=hi().toLowerCase();e&&(a=Qv(c)?Y4:e),Yv(c)&&(t=t||X4,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,v])=>`${m}${p}=${v},`,"");if(DE(c)&&a!=="_self")return J4(t||"",a),new a1(null);const f=window.open(t||"",a,h);ce(f,n,"popup-blocked");try{f.focus()}catch(m){}return new a1(f)}function J4(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="__/auth/handler",tI="emulator/auth/handler",eI=encodeURIComponent("fac");function l1(n,t,e,i,r,s){return nt(this,null,function*(){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:ec,eventId:r};if(t instanceof o5){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",sw(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(t instanceof Bu){const h=t.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=yield n._getAppCheckToken(),c=l?`#${eI}=${encodeURIComponent(l)}`:"";return`${nI(n)}?${Cu(a).slice(1)}${c}`})}function nI({config:n}){return n.emulator?Yg(n,tI):`https://${n.authDomain}/${Z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class iI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u5,this._completeRedirectFn=P4,this._overrideRedirectResult=S4}_openPopup(t,e,i,r){return nt(this,null,function*(){var s;Vs((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=yield l1(t,e,i,Pp(),r);return Q4(t,o,em())})}_openRedirect(t,e,i,r){return nt(this,null,function*(){yield this._originValidation(t);const s=yield l1(t,e,i,Pp(),r);return a4(s),new Promise(()=>{})})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Vs(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return nt(this,null,function*(){const e=yield W4(t),i=new L4(t);return e.register("authEvent",r=>(ce(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Mf,{type:Mf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Mf];o!==void 0&&e(!!o),Fs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=D4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return n5()||Xv()||Jg()}}const rI=iI;var c1="@firebase/auth",u1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return nt(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aI(n){ql(new Ba("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i5(n)},c=new jE(i,r,s,l);return $E(c,e),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),ql(new Ba("auth-internal",t=>{const e=Zg(t.getProvider("auth").getImmediate());return(i=>new sI(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fo(c1,u1,oI(n)),Fo(c1,u1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=5*60,cI=hy("authIdTokenMaxAge")||lI;let h1=null;const uI=n=>t=>nt(void 0,null,function*(){const e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>cI)return;const r=e==null?void 0:e.token;h1!==r&&(h1=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function hI(n=gy()){const t=og(n,"auth");if(t.isInitialized())return t.getImmediate();const e=WE(n,{popupRedirectResolver:rI,persistence:[m4,r4,u5]}),i=hy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=uI(s.toString());e4(e,o,()=>o(e.currentUser)),t4(e,a=>o(a))}}const r=cy("auth");return r&&GE(e,`http://${r}`),e}function dI(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}UE({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const s=Qr("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",dI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aI("Browser");const fI={apiKey:"AIzaSyD4ZPOmpN36xKbWmOzmD53ARJ7YrRucjqQ",authDomain:"proyecto-5d779.firebaseapp.com",projectId:"proyecto-5d779",storageBucket:"proyecto-5d779.firebasestorage.app",messagingSenderId:"728824922149",appId:"1:728824922149:web:db80819d34f8b65bbebfcc"},y5=py(fI),Ni=eE(y5);hI(y5);const bh="usuarios";class Wr{constructor(t){this.id=t.id,this.nombreUsuario=t.nombreUsuario,this.rol=t.rol,this.contrasena=t.contrasena}static obtenerTodos(){return nt(this,null,function*(){try{return(yield Dl(Wo(Ni,bh))).docs.map(e=>new Wr(ti({id:e.id},e.data())))}catch(t){throw console.error("Error al obtener usuarios:",t),t}})}static crear(t){return nt(this,null,function*(){try{const e=yield Wg(Wo(Ni,bh),t);return new Wr(ti({id:e.id},t))}catch(e){throw console.error("Error al crear usuario:",e),e}})}static actualizar(t,e){return nt(this,null,function*(){try{const i=qa(Ni,bh,t);return yield qg(i,e),new Wr(ti({id:t},e))}catch(i){throw console.error("Error al actualizar usuario:",i),i}})}static eliminar(t){return nt(this,null,function*(){try{return yield Hg(qa(Ni,bh,t)),!0}catch(e){throw console.error("Error al eliminar usuario:",e),e}})}static autenticar(t,e){return nt(this,null,function*(){try{return(yield Wr.obtenerTodos()).find(s=>s.nombreUsuario===t&&s.contrasena===e)||null}catch(i){return console.error("Error en autenticación:",i),null}})}obtenerVistaDefecto(){return this.rol==="admin"?"admin":this.rol}puedeAccederVista(t){return this.rol==="admin"?t==="admin":this.obtenerVistaDefecto()===t}}class pI{static iniciarSesion(t,e){return nt(this,null,function*(){try{const i=yield Wr.autenticar(t,e);return i?{exito:!0,usuario:i}:{exito:!1,mensaje:"Credenciales inválidas"}}catch(i){return{exito:!1,mensaje:i.message}}})}}function v5(n){document.getElementById("loginForm").addEventListener("submit",e=>nt(this,null,function*(){e.preventDefault();const i=document.getElementById("username").value,r=document.getElementById("password").value,s=yield pI.iniciarSesion(i,r);s.exito?n.onLoginSuccess(s.usuario):alert("Error de inicio de sesión: "+s.mensaje)}))}function gI(n,t){document.addEventListener("click",e=>nt(this,null,function*(){if(e.target.classList.contains("nav-link")){e.preventDefault();const i=e.target.dataset.view,r=e.target.dataset.section;if(i&&n.puedeAccederVista(i))t.onNavigate(i);else if(r){document.querySelectorAll(".nav-link").forEach(a=>a.classList.remove("active")),e.target.classList.add("active");const o={pedidos:document.getElementById("pedidosSection"),historial:document.getElementById("historialSection")};Object.keys(o).forEach(a=>{o[a]&&(o[a].style.display=a===r?"block":"none")})}}else e.target.id==="logoutBtn"&&t.onLogout()}))}const _h="pedidos";class Ps{constructor(t){this.id=t.id,this.nombreCliente=t.nombreCliente,this.productos=t.productos,this.estado=t.estado,this.fechaEntrega=t.fechaEntrega,this.instruccionesEspeciales=t.instruccionesEspeciales,this.fechaCreacion=t.fechaCreacion,this.total=t.total}static obtenerTodos(){return nt(this,null,function*(){try{return(yield Dl(Wo(Ni,_h))).docs.map(e=>new Ps(ti({id:e.id},e.data())))}catch(t){throw console.error("Error al obtener pedidos:",t),t}})}static crear(t){return nt(this,null,function*(){try{const e=yield Wg(Wo(Ni,_h),mo(ti({},t),{fechaCreacion:new Date().toISOString()}));return new Ps(mo(ti({id:e.id},t),{fechaCreacion:new Date().toISOString()}))}catch(e){throw console.error("Error al crear pedido:",e),e}})}static actualizar(t,e){return nt(this,null,function*(){try{const i=qa(Ni,_h,t);return yield qg(i,e),new Ps(ti({id:t},e))}catch(i){throw console.error("Error al actualizar pedido:",i),i}})}static eliminar(t){return nt(this,null,function*(){try{return yield Hg(qa(Ni,_h,t)),!0}catch(e){throw console.error("Error al eliminar pedido:",e),e}})}}class sr{static obtenerTodosPedidos(){return nt(this,null,function*(){try{return{exito:!0,datos:yield Ps.obtenerTodos()}}catch(t){return{exito:!1,mensaje:t.message}}})}static crearPedido(t){return nt(this,null,function*(){try{return{exito:!0,datos:yield Ps.crear(t)}}catch(e){return{exito:!1,mensaje:e.message}}})}static actualizarPedido(t,e){return nt(this,null,function*(){try{return{exito:!0,datos:yield Ps.actualizar(t,e)}}catch(i){return{exito:!1,mensaje:i.message}}})}static eliminarPedido(t){return nt(this,null,function*(){try{return yield Ps.eliminar(t),{exito:!0}}catch(e){return{exito:!1,mensaje:e.message}}})}static actualizarEstadoPedido(t,e){return nt(this,null,function*(){try{return{exito:!0,datos:yield Ps.actualizar(t,{estado:e})}}catch(i){return{exito:!1,mensaje:i.message}}})}}const wh="productos";class Po{constructor(t){this.id=t.id,this.nombre=t.nombre,this.cantidad=t.cantidad,this.unidad=t.unidad,this.precio=t.precio,this.tipo=t.tipo||"ingrediente"}static obtenerTodos(){return nt(this,null,function*(){try{return(yield Dl(Wo(Ni,wh))).docs.map(e=>new Po(ti({id:e.id},e.data())))}catch(t){throw console.error("Error al obtener productos:",t),t}})}static crear(t){return nt(this,null,function*(){try{const e=yield Wg(Wo(Ni,wh),t);return new Po(ti({id:e.id},t))}catch(e){throw console.error("Error al crear producto:",e),e}})}static actualizar(t,e){return nt(this,null,function*(){try{const i=qa(Ni,wh,t);return yield qg(i,e),new Po(ti({id:t},e))}catch(i){throw console.error("Error al actualizar producto:",i),i}})}static eliminar(t){return nt(this,null,function*(){try{return yield Hg(qa(Ni,wh,t)),!0}catch(e){throw console.error("Error al eliminar producto:",e),e}})}}class _i{static obtenerTodosProductos(){return nt(this,null,function*(){try{return{exito:!0,datos:yield Po.obtenerTodos()}}catch(t){return{exito:!1,mensaje:t.message}}})}static crearProducto(t){return nt(this,null,function*(){try{return{exito:!0,datos:yield Po.crear(t)}}catch(e){return{exito:!1,mensaje:e.message}}})}static actualizarProducto(t,e){return nt(this,null,function*(){try{return{exito:!0,datos:yield Po.actualizar(t,e)}}catch(i){return{exito:!1,mensaje:i.message}}})}static eliminarProducto(t){return nt(this,null,function*(){try{return yield Po.eliminar(t),{exito:!0}}catch(e){return{exito:!1,mensaje:e.message}}})}}function Yd(n,t){const e=document.getElementById("modalConfirmacionEliminar");e&&e.remove();const i=document.createElement("div");return i.id="modalConfirmacionEliminar",i.className="modal",i.style.display="flex",i.innerHTML=`
    <div class="modal-content">
      <h3>Confirmar Eliminación</h3>
      <p>${t}</p>
      <div class="form-actions">
        <button id="botonConfirmar" class="delete-btn">Eliminar</button>
        <button id="botonCancelar">Cancelar</button>
      </div>
    </div>
  `,document.body.appendChild(i),new Promise(r=>{const s=document.getElementById("botonConfirmar"),o=document.getElementById("botonCancelar"),a=()=>{s.removeEventListener("click",l),o.removeEventListener("click",c),i.remove()},l=()=>{a(),r(!0)},c=()=>{a(),r(!1)};s.addEventListener("click",l),o.addEventListener("click",c)})}function mI(n){const t=/^[A-Za-zÁáÉéÍíÓóÚúÑñ\s]+$/;return!n||n.trim()===""?{esValido:!1,mensaje:"El nombre del cliente es requerido"}:t.test(n)?{esValido:!0,mensaje:""}:{esValido:!1,mensaje:"El nombre solo puede contener letras y espacios"}}function yI(n){vI(n),bI(n),_I(n)}function b5(n,t=null){return nt(this,null,function*(){const e=n.datos.filter(p=>p.tipo==="terminado"),i=t?"Editar Pedido":"Crear Nuevo Pedido",r=document.createElement("div");r.className="modal",r.style.display="flex",r.innerHTML=`
    <div class="modal-content">
      <h3>${i}</h3>
      <form id="orderForm" class="order-form">
        <div class="form-group">
          <label for="customerName">Nombre del Cliente:</label>
          <input type="text" id="customerName" required value="${(t==null?void 0:t.nombreCliente)||""}">
          <span class="error-message" id="customerName-error"></span>
        </div>
        
        <div class="order-products">
          <h4>Productos</h4>
          <div id="productsList">
            ${t?t.productos.map(p=>`
              <div class="product-item">
                <select class="product-select" required>
                  <option value="">Seleccionar producto</option>
                  ${e.map(v=>`
                    <option value="${v.id}" data-precio="${v.precio}" 
                      ${v.id===p.id?"selected":""}>
                      ${v.nombre} - $${v.precio}
                    </option>
                  `).join("")}
                </select>
                <input type="number" class="product-quantity" min="1" value="${p.cantidad}" required>
                <button type="button" class="remove-product">Eliminar</button>
              </div>
            `).join(""):`
              <div class="product-item">
                <select class="product-select" required>
                  <option value="">Seleccionar producto</option>
                  ${e.map(p=>`
                    <option value="${p.id}" data-precio="${p.precio}">
                      ${p.nombre} - $${p.precio}
                    </option>
                  `).join("")}
                </select>
                <input type="number" class="product-quantity" min="1" value="1" required>
                <button type="button" class="remove-product">Eliminar</button>
              </div>
            `}
          </div>
          <button type="button" id="addProductBtn" class="add-product-btn">Agregar Producto</button>
          <div class="order-total">Total: $<span id="orderTotal">0.00</span></div>
        </div>

        <div class="form-group">
          <label for="deliveryDate">Fecha de Entrega:</label>
          <input type="date" id="deliveryDate" required value="${(t==null?void 0:t.fechaEntrega)||""}">
        </div>
        
        <div class="form-group">
          <label for="specialInstructions">Instrucciones Especiales:</label>
          <textarea id="specialInstructions" rows="3">${(t==null?void 0:t.instruccionesEspeciales)||""}</textarea>
        </div>

        <div class="form-actions">
          <button type="submit">${t?"Guardar Cambios":"Crear Pedido"}</button>
          <button type="button" id="cancelOrderBtn">Cancelar</button>
        </div>
      </form>
    </div>
  `,document.body.appendChild(r);const s=document.getElementById("orderForm"),o=document.getElementById("cancelOrderBtn"),a=document.getElementById("addProductBtn"),l=document.getElementById("productsList"),c=document.getElementById("customerName"),h=document.getElementById("customerName-error");c.addEventListener("input",()=>{h.style.display="none",c.classList.remove("error")});function f(){let p=0;document.querySelectorAll(".product-item").forEach(v=>{const _=v.querySelector(".product-select"),S=v.querySelector(".product-quantity"),x=_.selectedOptions[0];x&&x.dataset.precio&&(p+=parseFloat(x.dataset.precio)*parseInt(S.value||0))}),document.getElementById("orderTotal").textContent=p.toFixed(2)}function m(){const p=document.createElement("div");p.className="product-item",p.innerHTML=`
      <select class="product-select" required>
        <option value="">Seleccionar producto</option>
        ${e.map(x=>`
          <option value="${x.id}" data-precio="${x.precio}">${x.nombre} - $${x.precio}</option>
        `).join("")}
      </select>
      <input type="number" class="product-quantity" min="1" value="1" required>
      <button type="button" class="remove-product">Eliminar</button>
    `,l.appendChild(p);const v=p.querySelector(".remove-product"),_=p.querySelector(".product-select"),S=p.querySelector(".product-quantity");v.addEventListener("click",()=>{document.querySelectorAll(".product-item").length>1&&(p.remove(),f())}),_.addEventListener("change",f),S.addEventListener("input",f)}return document.querySelectorAll(".product-item").forEach(p=>{const v=p.querySelector(".remove-product"),_=p.querySelector(".product-select"),S=p.querySelector(".product-quantity");v.addEventListener("click",()=>{document.querySelectorAll(".product-item").length>1&&(p.remove(),f())}),_.addEventListener("change",f),S.addEventListener("input",f)}),a.addEventListener("click",m),f(),new Promise(p=>{s.addEventListener("submit",v=>nt(this,null,function*(){v.preventDefault();const _=c.value,S=mI(_);if(!S.esValido){h.textContent=S.mensaje,h.style.display="block",c.classList.add("error");return}const x=[];document.querySelectorAll(".product-item").forEach(N=>{const O=N.querySelector(".product-select"),B=N.querySelector(".product-quantity"),W=O.selectedOptions[0];O.value&&W&&x.push({id:parseInt(O.value),nombre:W.text.split(" - ")[0],cantidad:parseInt(B.value),precio:parseFloat(W.dataset.precio)})});const T={nombreCliente:_,productos:x,fechaEntrega:document.getElementById("deliveryDate").value,instruccionesEspeciales:document.getElementById("specialInstructions").value,estado:(t==null?void 0:t.estado)||"pending",total:parseFloat(document.getElementById("orderTotal").textContent)};r.remove(),p(T)})),o.addEventListener("click",()=>{r.remove(),p(null)})})})}function vI(n){const t=document.getElementById("newOrderBtn");t&&t.addEventListener("click",()=>nt(this,null,function*(){try{const e=yield _i.obtenerTodosProductos();if(!e.exito){alert("Error al cargar productos");return}const i=yield b5(e);if(i){const r=yield sr.crearPedido(i);r.exito?n.onStatusUpdate&&(yield n.onStatusUpdate()):alert("Error al crear pedido: "+r.mensaje)}}catch(e){console.error("Error al crear pedido:",e),alert("Error al crear pedido")}}))}function bI(n){document.querySelectorAll(".edit-btn").forEach(t=>{t.addEventListener("click",()=>nt(this,null,function*(){try{const e=t.dataset.id,i=yield sr.obtenerTodosPedidos(),r=yield _i.obtenerTodosProductos();if(!i.exito||!r.exito){alert("Error al cargar datos");return}const s=i.datos.find(a=>a.id===e);if(!s){alert("Pedido no encontrado");return}const o=yield b5(r,s);if(o){const a=yield sr.actualizarPedido(e,o);a.exito?n.onStatusUpdate&&(yield n.onStatusUpdate()):alert("Error al actualizar pedido: "+a.mensaje)}}catch(e){console.error("Error al editar pedido:",e),alert("Error al editar pedido")}}))})}function _I(n){document.querySelectorAll(".delete-btn").forEach(t=>{t.addEventListener("click",()=>nt(this,null,function*(){const e=t.dataset.id;if(yield Yd("pedido","¿Está seguro de que desea eliminar este pedido?"))try{const r=yield sr.eliminarPedido(e);r.exito?n.onStatusUpdate&&(yield n.onStatusUpdate()):alert("Error al eliminar el pedido: "+r.mensaje)}catch(r){console.error("Error al eliminar pedido:",r),alert("Error al eliminar pedido")}}))})}let Bl="pedidos";function wI(n){AI(),SI(n),EI(n),PI(),jl(Bl)}function jl(n){const t=document.querySelectorAll(".nav-link"),e={pedidos:document.getElementById("pedidosSection"),inventario:document.getElementById("inventarioSection")};t.forEach(i=>{i.dataset.section===n?i.classList.add("active"):i.classList.remove("active")}),Object.keys(e).forEach(i=>{e[i]&&(e[i].style.display=i===n?"block":"none")}),Bl=n}function AI(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.dataset.section;i&&jl(i)})})}function xI(n,t,e){return nt(this,null,function*(){const i=document.createElement("div");i.className="modal",i.style.display="flex";const r=t.datos.filter(a=>a.tipo==="ingrediente");i.innerHTML=`
    <div class="modal-content">
      <h3>Registrar Consumo de Ingredientes</h3>
      <form id="consumptionForm">
        <div class="ingredients-list">
          ${r.map(a=>`
            <div class="form-group">
              <label for="ingredient_${a.id}">
                ${a.nombre} (${a.unidad}) - Disponible: ${a.cantidad}
              </label>
              <input 
                type="number" 
                id="ingredient_${a.id}" 
                min="0" 
                max="${a.cantidad}"
                step="0.01"
                placeholder="Cantidad consumida"
              >
            </div>
          `).join("")}
        </div>
        <div class="form-actions">
          <button type="submit">Confirmar y Marcar como Listo</button>
          <button type="button" id="cancelConsumptionBtn">Cancelar</button>
        </div>
      </form>
    </div>
  `,document.body.appendChild(i);const s=document.getElementById("consumptionForm"),o=document.getElementById("cancelConsumptionBtn");s.addEventListener("submit",a=>nt(this,null,function*(){a.preventDefault();const l=[];r.forEach(c=>{const h=document.getElementById(`ingredient_${c.id}`).value;h&&h>0&&l.push({id:c.id,cantidad:parseFloat(h)})});try{for(const h of l){const f=t.datos.find(m=>m.id===h.id);if(f){const m=f.cantidad-h.cantidad;if(m<0){alert(`No hay suficiente cantidad de ${f.nombre}`);return}yield _i.actualizarProducto(h.id,mo(ti({},f),{cantidad:m}))}}const c=yield sr.actualizarEstadoPedido(n,"ready_for_decoration");c.exito?(i.remove(),e.onStatusUpdate&&(yield e.onStatusUpdate()),jl(Bl)):alert("Error al actualizar el estado del pedido: "+c.mensaje)}catch(c){console.error("Error al procesar el pedido:",c),alert("Error al procesar el pedido")}})),o.addEventListener("click",()=>{i.remove()})})}function SI(n){document.querySelectorAll(".ready-for-decoration-btn").forEach(t=>{t.addEventListener("click",()=>nt(this,null,function*(){const e=t.dataset.id,i=yield _i.obtenerTodosProductos();i.exito?yield xI(e,i,n):alert("Error al cargar productos: "+i.mensaje)}))})}function EI(n){const t=document.getElementById("newProductBtn");t&&t.addEventListener("click",()=>{const e=document.getElementById("productModal"),i=document.getElementById("productForm");i.reset(),e.style.display="flex";const r=s=>nt(this,null,function*(){s.preventDefault();const o={nombre:document.getElementById("productName").value,cantidad:parseFloat(document.getElementById("productQuantity").value),unidad:document.getElementById("productUnit").value,precio:parseFloat(document.getElementById("productPrice").value),tipo:document.getElementById("productType").value};try{const a=yield _i.crearProducto(o);a.exito?(e.style.display="none",i.removeEventListener("submit",r),n.onStatusUpdate&&(yield n.onStatusUpdate()),jl(Bl)):alert("Error al crear producto: "+a.mensaje)}catch(a){console.error("Error al crear producto:",a),alert("Error al crear producto")}});i.addEventListener("submit",r),document.getElementById("cancelProductBtn").addEventListener("click",()=>{e.style.display="none",i.removeEventListener("submit",r)})}),document.querySelectorAll('.edit-btn[data-type="product"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id;try{const s=(yield _i.obtenerTodosProductos()).datos.find(o=>o.id===i);if(s){const o=document.getElementById("productModal"),a=document.getElementById("productForm");document.getElementById("productName").value=s.nombre,document.getElementById("productQuantity").value=s.cantidad,document.getElementById("productUnit").value=s.unidad,document.getElementById("productPrice").value=s.precio,document.getElementById("productType").value=s.tipo,o.style.display="flex";const l=c=>nt(this,null,function*(){c.preventDefault();const h={nombre:document.getElementById("productName").value,cantidad:parseFloat(document.getElementById("productQuantity").value),unidad:document.getElementById("productUnit").value,precio:parseFloat(document.getElementById("productPrice").value),tipo:document.getElementById("productType").value};try{const f=yield _i.actualizarProducto(i,h);f.exito?(o.style.display="none",a.removeEventListener("submit",l),n.onStatusUpdate&&(yield n.onStatusUpdate()),jl(Bl)):alert("Error al actualizar producto: "+f.mensaje)}catch(f){console.error("Error al actualizar producto:",f),alert("Error al actualizar producto")}});a.addEventListener("submit",l),document.getElementById("cancelProductBtn").addEventListener("click",()=>{o.style.display="none",a.removeEventListener("submit",l)})}}catch(r){console.error("Error al cargar producto:",r),alert("Error al cargar producto")}}))}),document.querySelectorAll('.delete-btn[data-type="product"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id;if(yield Yd("producto","¿Está seguro de que desea eliminar este producto?"))try{const s=yield _i.eliminarProducto(i);s.exito?(n.onStatusUpdate&&(yield n.onStatusUpdate()),jl(Bl)):alert("Error al eliminar producto: "+s.mensaje)}catch(s){console.error("Error al eliminar producto:",s),alert("Error al eliminar producto")}}))})}function II(n){return nt(this,null,function*(){const t=document.getElementById("orderDetailsModal"),e=t==null?void 0:t.querySelector(".modal-body"),r=(yield sr.obtenerTodosPedidos()).datos.find(s=>s.id===n);r&&t&&e&&(e.innerHTML=`
      <div class="order-details-content">
        <div class="detail-section">
          <h4>Información del Cliente</h4>
          <p><strong>Nombre:</strong> ${r.nombreCliente}</p>
          <p><strong>Fecha de Entrega:</strong> ${Gr(r.fechaEntrega)}</p>
          <p><strong>Estado:</strong> ${Tu(r.estado)}</p>
        </div>

        <div class="detail-section">
          <h4>Productos</h4>
          <div class="products-grid">
            ${r.productos.map(s=>`
              <div class="product-card">
                <h5>${s.nombre}</h5>
                <p>Cantidad: ${s.cantidad}</p>
                <p>Precio: $${s.precio.toFixed(2)}</p>
              </div>
            `).join("")}
          </div>
        </div>

        <div class="detail-section">
          <h4>Instrucciones Especiales</h4>
          <div class="special-instructions">
            ${r.instruccionesEspeciales||"No hay instrucciones especiales"}
          </div>
        </div>

        <div class="detail-section">
          <h4>Resumen</h4>
          <p><strong>Total del Pedido:</strong> $${r.total.toFixed(2)}</p>
          <p><strong>Fecha de Creación:</strong> ${Gr(r.fechaCreacion)}</p>
        </div>
      </div>
    `,t.style.display="flex")})}function PI(){const n=document.getElementById("orderDetailsModal");n==null||n.querySelector(".close-modal").addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",t=>{t.target===n&&(n.style.display="none")}),document.querySelectorAll(".pedido-row").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.id;II(e)})})}function TI(n){LI(n),kI()}function LI(n){document.querySelectorAll(".finish-order-btn").forEach(t=>{t.addEventListener("click",e=>nt(this,null,function*(){e.stopPropagation();const i=t.dataset.id,r=yield sr.actualizarEstadoPedido(i,"completed");r.exito?n.onStatusUpdate():alert("Error al finalizar el pedido: "+r.mensaje)}))})}function CI(n){return nt(this,null,function*(){const t=document.getElementById("orderDetailsModal"),e=t==null?void 0:t.querySelector(".modal-body"),r=(yield sr.obtenerTodosPedidos()).datos.find(s=>s.id===n);r&&t&&e&&(e.innerHTML=`
      <div class="order-details-content">
        <div class="detail-section">
          <h4>Información del Cliente</h4>
          <p><strong>Nombre:</strong> ${r.nombreCliente}</p>
          <p><strong>Fecha de Entrega:</strong> ${Gr(r.fechaEntrega)}</p>
          <p><strong>Estado:</strong> ${Tu(r.estado)}</p>
        </div>

        <div class="detail-section">
          <h4>Productos</h4>
          <div class="products-grid">
            ${r.productos.map(s=>`
              <div class="product-card">
                <h5>${s.nombre}</h5>
                <p>Cantidad: ${s.cantidad}</p>
                <p>Precio: $${s.precio.toFixed(2)}</p>
              </div>
            `).join("")}
          </div>
        </div>

        <div class="detail-section">
          <h4>Instrucciones Especiales</h4>
          <div class="special-instructions">
            ${r.instruccionesEspeciales||"No hay instrucciones especiales"}
          </div>
        </div>

        <div class="detail-section">
          <h4>Resumen</h4>
          <p><strong>Total del Pedido:</strong> $${r.total.toFixed(2)}</p>
          <p><strong>Fecha de Creación:</strong> ${Gr(r.fechaCreacion)}</p>
        </div>
      </div>
    `,t.style.display="flex")})}function kI(){const n=document.getElementById("orderDetailsModal");n==null||n.querySelector(".close-modal").addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",t=>{t.target===n&&(n.style.display="none")}),document.querySelectorAll(".pedido-row").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.id;CI(e)})})}class Vc{static obtenerTodos(){return nt(this,null,function*(){try{return{exito:!0,datos:yield Wr.obtenerTodos()}}catch(t){return{exito:!1,mensaje:t.message}}})}static crear(t){return nt(this,null,function*(){try{return{exito:!0,datos:yield Wr.crear(t)}}catch(e){return{exito:!1,mensaje:e.message}}})}static actualizarUsuario(t,e){return nt(this,null,function*(){try{return{exito:!0,datos:yield Wr.actualizar(t,e)}}catch(i){return{exito:!1,mensaje:i.message}}})}static eliminarUsuario(t){return nt(this,null,function*(){try{return yield Wr.eliminar(t),{exito:!0}}catch(e){return{exito:!1,mensaje:e.message}}})}}function d1(n){return n?n.length<3?{esValido:!1,mensaje:"El nombre de usuario debe tener al menos 3 caracteres"}:n.length>15?{esValido:!1,mensaje:"El nombre de usuario no puede tener más de 15 caracteres"}:n.match(/^[a-zA-Z]/)?(n.match(/\d/g)||[]).length>4?{esValido:!1,mensaje:"El nombre de usuario no puede contener más de 4 números"}:n.match(/^[a-zA-Z][a-zA-Z0-9]{2,14}$/)?{esValido:!0,mensaje:""}:{esValido:!1,mensaje:"El nombre de usuario solo puede contener letras y números"}:{esValido:!1,mensaje:"El nombre de usuario debe comenzar con una letra"}:{esValido:!1,mensaje:"El nombre de usuario es requerido"}}function f1(n){return n?n.length<6?{esValido:!1,mensaje:"La contraseña debe tener al menos 6 caracteres"}:n.length>20?{esValido:!1,mensaje:"La contraseña no puede tener más de 20 caracteres"}:{esValido:!0,mensaje:""}:{esValido:!1,mensaje:"La contraseña es requerida"}}function NI(n){const t=document.getElementById("newUserBtn");t&&t.addEventListener("click",()=>{const e=document.getElementById("userModal"),i=document.getElementById("userForm"),r=document.getElementById("username"),s=document.getElementById("password"),o=document.getElementById("username-error"),a=document.getElementById("password-error");i.reset(),o.style.display="none",a.style.display="none",e.style.display="flex",r.addEventListener("input",()=>{o.style.display="none",r.classList.remove("error")}),s.addEventListener("input",()=>{a.style.display="none",s.classList.remove("error")});const l=c=>nt(this,null,function*(){c.preventDefault();const h=r.value,f=s.value,m=d1(h);if(!m.esValido){o.textContent=m.mensaje,o.style.display="block",r.classList.add("error");return}const p=f1(f);if(!p.esValido){a.textContent=p.mensaje,a.style.display="block",s.classList.add("error");return}const v={nombreUsuario:h,contrasena:f,rol:document.getElementById("role").value};try{const _=yield Vc.crear(v);_.exito?(e.style.display="none",i.removeEventListener("submit",l),n.onStatusUpdate&&(yield n.onStatusUpdate())):alert("Error al crear usuario: "+_.mensaje)}catch(_){console.error("Error al crear usuario:",_),alert("Error al crear usuario")}});i.addEventListener("submit",l),document.getElementById("cancelUserBtn").addEventListener("click",()=>{e.style.display="none",i.removeEventListener("submit",l)})}),document.querySelectorAll('.edit-btn[data-type="user"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id,s=(yield Vc.obtenerTodos()).datos.find(o=>o.id===i);if(s){const o=document.getElementById("userModal"),a=document.getElementById("userForm"),l=document.getElementById("username"),c=document.getElementById("password"),h=document.getElementById("username-error"),f=document.getElementById("password-error");l.value=s.nombreUsuario,c.value=s.contrasena,document.getElementById("role").value=s.rol,h.style.display="none",f.style.display="none",o.style.display="flex",l.addEventListener("input",()=>{h.style.display="none",l.classList.remove("error")}),c.addEventListener("input",()=>{f.style.display="none",c.classList.remove("error")});const m=p=>nt(this,null,function*(){p.preventDefault();const v=l.value,_=c.value,S=d1(v);if(!S.esValido){h.textContent=S.mensaje,h.style.display="block",l.classList.add("error");return}const x=f1(_);if(!x.esValido){f.textContent=x.mensaje,f.style.display="block",c.classList.add("error");return}const T={nombreUsuario:v,contrasena:_,rol:document.getElementById("role").value};try{const N=yield Vc.actualizarUsuario(i,T);N.exito?(o.style.display="none",a.removeEventListener("submit",m),n.onStatusUpdate&&(yield n.onStatusUpdate())):alert("Error al actualizar usuario: "+N.mensaje)}catch(N){console.error("Error al actualizar usuario:",N),alert("Error al actualizar usuario")}});a.addEventListener("submit",m),document.getElementById("cancelUserBtn").addEventListener("click",()=>{o.style.display="none",a.removeEventListener("submit",m)})}}))}),document.querySelectorAll('.delete-btn[data-type="user"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id;if(yield Yd("usuario","¿Está seguro de que desea eliminar este usuario?"))try{const s=yield Vc.eliminarUsuario(i);s.exito?n.onStatusUpdate&&(yield n.onStatusUpdate()):alert("Error al eliminar usuario: "+s.mensaje)}catch(s){console.error("Error al eliminar usuario:",s),alert("Error al eliminar usuario")}}))})}const RI="modulepreload",DI=function(n){return"/"+n},p1={},Cp=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(e.map(l=>{if(l=DI(l),l in p1)return;p1[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":RI,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function ze(n){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(n)}var ci=Uint8Array,Gi=Uint16Array,im=Int32Array,Xd=new ci([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qd=new ci([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kp=new ci([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_5=function(n,t){for(var e=new Gi(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var r=new im(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)r[s]=s-e[i]<<5|i;return{b:e,r}},w5=_5(Xd,2),A5=w5.b,Np=w5.r;A5[28]=258,Np[258]=28;var x5=_5(Qd,0),MI=x5.b,g1=x5.r,Rp=new Gi(32768);for(var rn=0;rn<32768;++rn){var vo=(rn&43690)>>1|(rn&21845)<<1;vo=(vo&52428)>>2|(vo&13107)<<2,vo=(vo&61680)>>4|(vo&3855)<<4,Rp[rn]=((vo&65280)>>8|(vo&255)<<8)>>1}var Zr=function(n,t,e){for(var i=n.length,r=0,s=new Gi(t);r<i;++r)n[r]&&++s[n[r]-1];var o=new Gi(t);for(r=1;r<t;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(e){a=new Gi(1<<t);var l=15-t;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],h=t-n[r],f=o[n[r]-1]++<<h,m=f|(1<<h)-1;f<=m;++f)a[Rp[f]>>l]=c}else for(a=new Gi(i),r=0;r<i;++r)n[r]&&(a[r]=Rp[o[n[r]-1]++]>>15-n[r]);return a},$o=new ci(288);for(var rn=0;rn<144;++rn)$o[rn]=8;for(var rn=144;rn<256;++rn)$o[rn]=9;for(var rn=256;rn<280;++rn)$o[rn]=7;for(var rn=280;rn<288;++rn)$o[rn]=8;var vu=new ci(32);for(var rn=0;rn<32;++rn)vu[rn]=5;var OI=Zr($o,9,0),FI=Zr($o,9,1),VI=Zr(vu,5,0),BI=Zr(vu,5,1),Of=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},yr=function(n,t,e){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&e},Ff=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},rm=function(n){return(n+7)/8|0},S5=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new ci(n.subarray(t,e))},jI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],br=function(n,t,e){var i=new Error(t||jI[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,br),!e)throw i;return i},UI=function(n,t,e,i){var r=n.length,s=0;if(!r||t.f&&!t.l)return e||new ci(0);var o=!e,a=o||t.i!=2,l=t.i;o&&(e=new ci(r*3));var c=function(kt){var Ot=e.length;if(kt>Ot){var Vt=new ci(Math.max(Ot*2,kt));Vt.set(e),e=Vt}},h=t.f||0,f=t.p||0,m=t.b||0,p=t.l,v=t.d,_=t.m,S=t.n,x=r*8;do{if(!p){h=yr(n,f,1);var T=yr(n,f+1,3);if(f+=3,T)if(T==1)p=FI,v=BI,_=9,S=5;else if(T==2){var W=yr(n,f,31)+257,P=yr(n,f+10,15)+4,A=W+yr(n,f+5,31)+1;f+=14;for(var C=new ci(A),D=new ci(19),E=0;E<P;++E)D[kp[E]]=yr(n,f+E*3,7);f+=P*3;for(var I=Of(D),R=(1<<I)-1,G=Zr(D,I,1),E=0;E<A;){var ot=G[yr(n,f,R)];f+=ot&15;var N=ot>>4;if(N<16)C[E++]=N;else{var Y=0,K=0;for(N==16?(K=3+yr(n,f,3),f+=2,Y=C[E-1]):N==17?(K=3+yr(n,f,7),f+=3):N==18&&(K=11+yr(n,f,127),f+=7);K--;)C[E++]=Y}}var et=C.subarray(0,W),J=C.subarray(W);_=Of(et),S=Of(J),p=Zr(et,_,1),v=Zr(J,S,1)}else br(1);else{var N=rm(f)+4,O=n[N-4]|n[N-3]<<8,B=N+O;if(B>r){l&&br(0);break}a&&c(m+O),e.set(n.subarray(N,B),m),t.b=m+=O,t.p=f=B*8,t.f=h;continue}if(f>x){l&&br(0);break}}a&&c(m+131072);for(var ct=(1<<_)-1,_t=(1<<S)-1,M=f;;M=f){var Y=p[Ff(n,f)&ct],H=Y>>4;if(f+=Y&15,f>x){l&&br(0);break}if(Y||br(2),H<256)e[m++]=H;else if(H==256){M=f,p=null;break}else{var X=H-254;if(H>264){var E=H-257,tt=Xd[E];X=yr(n,f,(1<<tt)-1)+A5[E],f+=tt}var it=v[Ff(n,f)&_t],pt=it>>4;it||br(3),f+=it&15;var J=MI[pt];if(pt>3){var tt=Qd[pt];J+=Ff(n,f)&(1<<tt)-1,f+=tt}if(f>x){l&&br(0);break}a&&c(m+131072);var gt=m+X;if(m<J){var bt=s-J,Nt=Math.min(J,gt);for(bt+m<0&&br(3);m<Nt;++m)e[m]=i[bt+m]}for(;m<gt;++m)e[m]=e[m-J]}}t.l=p,t.p=M,t.b=m,t.f=h,p&&(h=1,t.m=_,t.d=v,t.n=S)}while(!h);return m!=e.length&&o?S5(e,0,m):e.subarray(0,m)},ws=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},Ic=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},Vf=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var r=e.length,s=e.slice();if(!r)return{t:I5,l:0};if(r==1){var o=new ci(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(B,W){return B.f-W.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],c=0,h=1,f=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=r-1;)a=e[e[c].f<e[f].f?c++:f++],l=e[c!=h&&e[c].f<e[f].f?c++:f++],e[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,i=1;i<r;++i)s[i].s>m&&(m=s[i].s);var p=new Gi(m+1),v=Dp(e[h-1],p,0);if(v>t){var i=0,_=0,S=v-t,x=1<<S;for(s.sort(function(W,P){return p[P.s]-p[W.s]||W.f-P.f});i<r;++i){var T=s[i].s;if(p[T]>t)_+=x-(1<<v-p[T]),p[T]=t;else break}for(_>>=S;_>0;){var N=s[i].s;p[N]<t?_-=1<<t-p[N]++-1:++i}for(;i>=0&&_;--i){var O=s[i].s;p[O]==t&&(--p[O],++_)}v=t}return{t:new ci(p),l:v}},Dp=function(n,t,e){return n.s==-1?Math.max(Dp(n.l,t,e+1),Dp(n.r,t,e+1)):t[n.s]=e},m1=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new Gi(++t),i=0,r=n[0],s=1,o=function(l){e[i++]=l},a=1;a<=t;++a)if(n[a]==r&&a!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=n[a]}return{c:e.subarray(0,i),n:t}},Pc=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},E5=function(n,t,e){var i=e.length,r=rm(t+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=e[s];return(r+4+i)*8},y1=function(n,t,e,i,r,s,o,a,l,c,h){ws(t,h++,e),++r[256];for(var f=Vf(r,15),m=f.t,p=f.l,v=Vf(s,15),_=v.t,S=v.l,x=m1(m),T=x.c,N=x.n,O=m1(_),B=O.c,W=O.n,P=new Gi(19),A=0;A<T.length;++A)++P[T[A]&31];for(var A=0;A<B.length;++A)++P[B[A]&31];for(var C=Vf(P,7),D=C.t,E=C.l,I=19;I>4&&!D[kp[I-1]];--I);var R=c+5<<3,G=Pc(r,$o)+Pc(s,vu)+o,ot=Pc(r,m)+Pc(s,_)+o+14+3*I+Pc(P,D)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&R<=G&&R<=ot)return E5(t,h,n.subarray(l,l+c));var Y,K,et,J;if(ws(t,h,1+(ot<G)),h+=2,ot<G){Y=Zr(m,p,0),K=m,et=Zr(_,S,0),J=_;var ct=Zr(D,E,0);ws(t,h,N-257),ws(t,h+5,W-1),ws(t,h+10,I-4),h+=14;for(var A=0;A<I;++A)ws(t,h+3*A,D[kp[A]]);h+=3*I;for(var _t=[T,B],M=0;M<2;++M)for(var H=_t[M],A=0;A<H.length;++A){var X=H[A]&31;ws(t,h,ct[X]),h+=D[X],X>15&&(ws(t,h,H[A]>>5&127),h+=H[A]>>12)}}else Y=OI,K=$o,et=VI,J=vu;for(var A=0;A<a;++A){var tt=i[A];if(tt>255){var X=tt>>18&31;Ic(t,h,Y[X+257]),h+=K[X+257],X>7&&(ws(t,h,tt>>23&31),h+=Xd[X]);var it=tt&31;Ic(t,h,et[it]),h+=J[it],it>3&&(Ic(t,h,tt>>5&8191),h+=Qd[it])}else Ic(t,h,Y[tt]),h+=K[tt]}return Ic(t,h,Y[256]),h+K[256]},zI=new im([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),I5=new ci(0),qI=function(n,t,e,i,r,s){var o=s.z||n.length,a=new ci(i+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(i,a.length-r),c=s.l,h=(s.r||0)&7;if(t){h&&(l[0]=s.r>>3);for(var f=zI[t-1],m=f>>13,p=f&8191,v=(1<<e)-1,_=s.p||new Gi(32768),S=s.h||new Gi(v+1),x=Math.ceil(e/3),T=2*x,N=function(te){return(n[te]^n[te+1]<<x^n[te+2]<<T)&v},O=new im(25e3),B=new Gi(288),W=new Gi(32),P=0,A=0,C=s.i||0,D=0,E=s.w||0,I=0;C+2<o;++C){var R=N(C),G=C&32767,ot=S[R];if(_[G]=ot,S[R]=G,E<=C){var Y=o-C;if((P>7e3||D>24576)&&(Y>423||!c)){h=y1(n,l,0,O,B,W,A,D,I,C-I,h),D=P=A=0,I=C;for(var K=0;K<286;++K)B[K]=0;for(var K=0;K<30;++K)W[K]=0}var et=2,J=0,ct=p,_t=G-ot&32767;if(Y>2&&R==N(C-_t))for(var M=Math.min(m,Y)-1,H=Math.min(32767,C),X=Math.min(258,Y);_t<=H&&--ct&&G!=ot;){if(n[C+et]==n[C+et-_t]){for(var tt=0;tt<X&&n[C+tt]==n[C+tt-_t];++tt);if(tt>et){if(et=tt,J=_t,tt>M)break;for(var it=Math.min(_t,tt-2),pt=0,K=0;K<it;++K){var gt=C-_t+K&32767,bt=_[gt],Nt=gt-bt&32767;Nt>pt&&(pt=Nt,ot=gt)}}}G=ot,ot=_[G],_t+=G-ot&32767}if(J){O[D++]=268435456|Np[et]<<18|g1[J];var kt=Np[et]&31,Ot=g1[J]&31;A+=Xd[kt]+Qd[Ot],++B[257+kt],++W[Ot],E=C+et,++P}else O[D++]=n[C],++B[n[C]]}}for(C=Math.max(C,E);C<o;++C)O[D++]=n[C],++B[n[C]];h=y1(n,l,c,O,B,W,A,D,I,C-I,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=S,s.p=_,s.i=C,s.w=E)}else{for(var C=s.w||0;C<o+c;C+=65535){var Vt=C+65535;Vt>=o&&(l[h/8|0]=c,Vt=o),h=E5(l,h+1,n.subarray(C,Vt))}s.i=o}return S5(a,0,i+rm(h)+r)},P5=function(){var n=1,t=0;return{p:function(e){for(var i=n,r=t,s=e.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=i+=e[o];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,t=r},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},HI=function(n,t,e,i,r){if(!r&&(r={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new ci(s.length+n.length);o.set(s),o.set(n,s.length),n=o,r.w=s.length}return qI(n,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,r)},T5=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},WI=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var r=P5();r.p(t.dictionary),T5(n,2,r.d())}},$I=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&br(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&br(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Mp(n,t){t||(t={});var e=P5();e.p(n);var i=HI(n,t,t.dictionary?6:2,4);return WI(i,t),T5(i,i.length-4,e.d()),i}function GI(n,t){return UI(n.subarray($I(n,t),-4),{i:2},t,t)}var KI=typeof TextDecoder!="undefined"&&new TextDecoder,YI=0;try{KI.decode(I5,{stream:!0}),YI=1}catch(n){}var oe=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function Bf(){oe.console&&typeof oe.console.log=="function"&&oe.console.log.apply(oe.console,arguments)}var Ge={log:Bf,warn:function(n){oe.console&&(typeof oe.console.warn=="function"?oe.console.warn.apply(oe.console,arguments):Bf.call(null,arguments))},error:function(n){oe.console&&(typeof oe.console.error=="function"?oe.console.error.apply(oe.console,arguments):Bf(n))}};function jf(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Ea(i.response,t,e)},i.onerror=function(){Ge.error("could not download file")},i.send()}function v1(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function Ah(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Qc,Op,Ea=oe.saveAs||((typeof window=="undefined"?"undefined":ze(window))!=="object"||window!==oe?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=oe.URL||oe.webkitURL,r=document.createElement("a");t=t||n.name||"download",r.download=t,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?v1(r.href)?jf(n,t,e):Ah(r,r.target="_blank"):Ah(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Ah(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(v1(n))jf(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Ah(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:ze(s)!=="object"&&(Ge.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return jf(n,t,e);var r=n.type==="application/octet-stream",s=/constructor/i.test(oe.HTMLElement)||oe.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&(typeof FileReader=="undefined"?"undefined":ze(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},a.readAsDataURL(n)}else{var l=oe.URL||oe.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function L5(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<e.length;i++){var r=e[i].re,s=e[i].process,o=r.exec(n);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Uf(n,t){var e=n[0],i=n[1],r=n[2],s=n[3];e=ni(e,i,r,s,t[0],7,-680876936),s=ni(s,e,i,r,t[1],12,-389564586),r=ni(r,s,e,i,t[2],17,606105819),i=ni(i,r,s,e,t[3],22,-1044525330),e=ni(e,i,r,s,t[4],7,-176418897),s=ni(s,e,i,r,t[5],12,1200080426),r=ni(r,s,e,i,t[6],17,-1473231341),i=ni(i,r,s,e,t[7],22,-45705983),e=ni(e,i,r,s,t[8],7,1770035416),s=ni(s,e,i,r,t[9],12,-1958414417),r=ni(r,s,e,i,t[10],17,-42063),i=ni(i,r,s,e,t[11],22,-1990404162),e=ni(e,i,r,s,t[12],7,1804603682),s=ni(s,e,i,r,t[13],12,-40341101),r=ni(r,s,e,i,t[14],17,-1502002290),e=ii(e,i=ni(i,r,s,e,t[15],22,1236535329),r,s,t[1],5,-165796510),s=ii(s,e,i,r,t[6],9,-1069501632),r=ii(r,s,e,i,t[11],14,643717713),i=ii(i,r,s,e,t[0],20,-373897302),e=ii(e,i,r,s,t[5],5,-701558691),s=ii(s,e,i,r,t[10],9,38016083),r=ii(r,s,e,i,t[15],14,-660478335),i=ii(i,r,s,e,t[4],20,-405537848),e=ii(e,i,r,s,t[9],5,568446438),s=ii(s,e,i,r,t[14],9,-1019803690),r=ii(r,s,e,i,t[3],14,-187363961),i=ii(i,r,s,e,t[8],20,1163531501),e=ii(e,i,r,s,t[13],5,-1444681467),s=ii(s,e,i,r,t[2],9,-51403784),r=ii(r,s,e,i,t[7],14,1735328473),e=ri(e,i=ii(i,r,s,e,t[12],20,-1926607734),r,s,t[5],4,-378558),s=ri(s,e,i,r,t[8],11,-2022574463),r=ri(r,s,e,i,t[11],16,1839030562),i=ri(i,r,s,e,t[14],23,-35309556),e=ri(e,i,r,s,t[1],4,-1530992060),s=ri(s,e,i,r,t[4],11,1272893353),r=ri(r,s,e,i,t[7],16,-155497632),i=ri(i,r,s,e,t[10],23,-1094730640),e=ri(e,i,r,s,t[13],4,681279174),s=ri(s,e,i,r,t[0],11,-358537222),r=ri(r,s,e,i,t[3],16,-722521979),i=ri(i,r,s,e,t[6],23,76029189),e=ri(e,i,r,s,t[9],4,-640364487),s=ri(s,e,i,r,t[12],11,-421815835),r=ri(r,s,e,i,t[15],16,530742520),e=si(e,i=ri(i,r,s,e,t[2],23,-995338651),r,s,t[0],6,-198630844),s=si(s,e,i,r,t[7],10,1126891415),r=si(r,s,e,i,t[14],15,-1416354905),i=si(i,r,s,e,t[5],21,-57434055),e=si(e,i,r,s,t[12],6,1700485571),s=si(s,e,i,r,t[3],10,-1894986606),r=si(r,s,e,i,t[10],15,-1051523),i=si(i,r,s,e,t[1],21,-2054922799),e=si(e,i,r,s,t[8],6,1873313359),s=si(s,e,i,r,t[15],10,-30611744),r=si(r,s,e,i,t[6],15,-1560198380),i=si(i,r,s,e,t[13],21,1309151649),e=si(e,i,r,s,t[4],6,-145523070),s=si(s,e,i,r,t[11],10,-1120210379),r=si(r,s,e,i,t[2],15,718787259),i=si(i,r,s,e,t[9],21,-343485551),n[0]=To(e,n[0]),n[1]=To(i,n[1]),n[2]=To(r,n[2]),n[3]=To(s,n[3])}function Jd(n,t,e,i,r,s){return t=To(To(t,n),To(i,s)),To(t<<r|t>>>32-r,e)}function ni(n,t,e,i,r,s,o){return Jd(t&e|~t&i,n,t,r,s,o)}function ii(n,t,e,i,r,s,o){return Jd(t&i|e&~i,n,t,r,s,o)}function ri(n,t,e,i,r,s,o){return Jd(t^e^i,n,t,r,s,o)}function si(n,t,e,i,r,s,o){return Jd(e^(t|~i),n,t,r,s,o)}function C5(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Uf(i,XI(n.substring(t-64,t)));n=n.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)r[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(Uf(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,Uf(i,r),i}function XI(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}Qc=oe.atob.bind(oe),Op=oe.btoa.bind(oe);var b1="0123456789abcdef".split("");function QI(n){for(var t="",e=0;e<4;e++)t+=b1[n>>8*e+4&15]+b1[n>>8*e&15];return t}function JI(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Fp(n){return C5(n).map(JI).join("")}var ZI=function(n){for(var t=0;t<n.length;t++)n[t]=QI(n[t]);return n.join("")}(C5("hello"))!="5d41402abc4b2a76b9719d911017c592";function To(n,t){if(ZI){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Vp(n,t){var e,i,r,s;if(n!==e){for(var o=(r=n,s=1+(256/n.length>>0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}e=n,i=a}else a=i;var f=t.length,m=0,p=0,v="";for(l=0;l<f;l++)p=(p+(h=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=h,o=a[(a[m]+a[p])%256],v+=String.fromCharCode(t.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _1={print:4,modify:8,copy:16,"annot-forms":32};function Cl(n,t,e,i){this.v=1,this.r=2;var r=192;n.forEach(function(a){if(_1.perm!==void 0)throw new Error("Invalid permission: "+a);r+=_1[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=Fp(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Vp(this.encryptionKey,this.padding)}function kl(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var r=n.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?t+="#"+("0"+r.toString(16)).slice(-2):t+=n[i]}return t}function w1(n){if(ze(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,r){if(r=r||!1,typeof e!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!r],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[e]){var o=t[e][s];try{o[0].apply(n,i)}catch(a){oe.console&&Ge.error("jsPDF PubSub Error",a.message,a)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function bu(n){if(!(this instanceof bu))return new bu(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function k5(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function So(n,t,e,i,r){if(!(this instanceof So))return new So(n,t,e,i,r);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,k5.call(this,i,r)}function La(n,t,e,i,r){if(!(this instanceof La))return new La(n,t,e,i,r);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,k5.call(this,i,r)}function ie(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;ze(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,r=n.format||r,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),i=i||"mm",e=(""+(e||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=w1;var v="1.3",_=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(y){v=y};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var x=p.__private__.getPageFormat=function(y){return S[y]};r=r||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},N=T.COMPAT;function O(){this.saveGraphicsState(),rt(new $t(Ht,0,0,-Ht,0,Zn()*Ht).toString()+" cm"),this.setFontSize(this.getFontSize()/Ht),c="n",N=T.ADVANCED}function B(){this.restoreGraphicsState(),c="S",N=T.COMPAT}var W=p.__private__.combineFontStyleAndFontWeight=function(y,F){if(y=="bold"&&F=="normal"||y=="bold"&&F==400||y=="normal"&&F=="italic"||y=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(y=F==400||F==="normal"?y==="italic"?"italic":"normal":F!=700&&F!=="bold"||y!=="normal"?(F==700?"bold":F)+""+y:"bold"),y};p.advancedAPI=function(y){var F=N===T.COMPAT;return F&&O.call(this),typeof y!="function"||(y(this),F&&B.call(this)),this},p.compatAPI=function(y){var F=N===T.ADVANCED;return F&&B.call(this),typeof y!="function"||(y(this),F&&O.call(this)),this},p.isAdvancedAPI=function(){return N===T.ADVANCED};var P,A=function(y){if(N!==T.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=p.roundToPrecision=p.__private__.roundToPrecision=function(y,F){var Z=t||F;if(isNaN(y)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(Z).replace(/0+$/,"")};P=p.hpf=p.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,16)};var D=p.f2=p.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return C(y,2)},E=p.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return C(y,3)},I=p.scale=p.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return N===T.COMPAT?y*Ht:N===T.ADVANCED?y:void 0},R=function(y){return N===T.COMPAT?Zn()-y:N===T.ADVANCED?y:void 0},G=function(y){return I(R(y))};p.__private__.setPrecision=p.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(t=parseInt(y,10))};var ot,Y="00000000000000000000000000000000",K=p.__private__.getFileId=function(){return Y},et=p.__private__.setFileId=function(y){return Y=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(en=new Cl(h.userPermissions,h.userPassword,h.ownerPassword,Y)),Y};p.setFileId=function(y){return et(y),this},p.getFileId=function(){return K()};var J=p.__private__.convertDateToPDFDate=function(y){var F=y.getTimezoneOffset(),Z=F<0?"+":"-",st=Math.floor(Math.abs(F/60)),dt=Math.abs(F%60),At=[Z,X(st),"'",X(dt),"'"].join("");return["D:",y.getFullYear(),X(y.getMonth()+1),X(y.getDate()),X(y.getHours()),X(y.getMinutes()),X(y.getSeconds()),At].join("")},ct=p.__private__.convertPDFDateToDate=function(y){var F=parseInt(y.substr(2,4),10),Z=parseInt(y.substr(6,2),10)-1,st=parseInt(y.substr(8,2),10),dt=parseInt(y.substr(10,2),10),At=parseInt(y.substr(12,2),10),Lt=parseInt(y.substr(14,2),10);return new Date(F,Z,st,dt,At,Lt,0)},_t=p.__private__.setCreationDate=function(y){var F;if(y===void 0&&(y=new Date),y instanceof Date)F=J(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=y}return ot=F},M=p.__private__.getCreationDate=function(y){var F=ot;return y==="jsDate"&&(F=ct(ot)),F};p.setCreationDate=function(y){return _t(y),this},p.getCreationDate=function(y){return M(y)};var H,X=p.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},tt=p.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},it=0,pt=[],gt=[],bt=0,Nt=[],kt=[],Ot=!1,Vt=gt,te=function(){it=0,bt=0,gt=[],pt=[],Nt=[],or=hn(),Jn=hn()};p.__private__.setCustomOutputDestination=function(y){Ot=!0,Vt=y};var xt=function(y){Ot||(Vt=y)};p.__private__.resetCustomOutputDestination=function(){Ot=!1,Vt=gt};var rt=p.__private__.out=function(y){return y=y.toString(),bt+=y.length+1,Vt.push(y),Vt},he=p.__private__.write=function(y){return rt(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Yt=p.__private__.getArrayBuffer=function(y){for(var F=y.length,Z=new ArrayBuffer(F),st=new Uint8Array(Z);F--;)st[F]=y.charCodeAt(F);return Z},Dt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Dt};var Mt=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(y){return Mt=N===T.ADVANCED?y/Ht:y,this};var qt,Ut=p.__private__.getFontSize=p.getFontSize=function(){return N===T.COMPAT?Mt:Mt*Ht},Qt=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(y){return Qt=y,this},p.__private__.getR2L=p.getR2L=function(){return Qt};var ae,de=p.__private__.setZoomMode=function(y){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))qt=y;else if(isNaN(y)){if(F.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');qt=y}else qt=parseInt(y,10)};p.__private__.getZoomMode=function(){return qt};var Jt,se=p.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');ae=y};p.__private__.getPageMode=function(){return ae};var Ce=p.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');Jt=y};p.__private__.getLayoutMode=function(){return Jt},p.__private__.setDisplayMode=p.setDisplayMode=function(y,F,Z){return de(y),Ce(F),se(Z),this};var re={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(y){if(Object.keys(re).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return re[y]},p.__private__.getDocumentProperties=function(){return re},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(y){for(var F in re)re.hasOwnProperty(F)&&y[F]&&(re[F]=y[F]);return this},p.__private__.setDocumentProperty=function(y,F){if(Object.keys(re).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return re[y]=F};var _e,Ht,un,Ie,wi,De={},Ke={},Ki=[],Te={},Tr={},Ze={},Un={},Mi=null,Ye=0,ee=[],ke=new w1(p),Yi=n.hotfixes||[],En={},Xn={},Oi=[],$t=function y(F,Z,st,dt,At,Lt){if(!(this instanceof y))return new y(F,Z,st,dt,At,Lt);isNaN(F)&&(F=1),isNaN(Z)&&(Z=0),isNaN(st)&&(st=0),isNaN(dt)&&(dt=1),isNaN(At)&&(At=0),isNaN(Lt)&&(Lt=0),this._matrix=[F,Z,st,dt,At,Lt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(y)},$t.prototype.multiply=function(y){var F=y.sx*this.sx+y.shy*this.shx,Z=y.sx*this.shy+y.shy*this.sy,st=y.shx*this.sx+y.sy*this.shx,dt=y.shx*this.shy+y.sy*this.sy,At=y.tx*this.sx+y.ty*this.shx+this.tx,Lt=y.tx*this.shy+y.ty*this.sy+this.ty;return new $t(F,Z,st,dt,At,Lt)},$t.prototype.decompose=function(){var y=this.sx,F=this.shy,Z=this.shx,st=this.sy,dt=this.tx,At=this.ty,Lt=Math.sqrt(y*y+F*F),jt=(y/=Lt)*Z+(F/=Lt)*st;Z-=y*jt,st-=F*jt;var d=Math.sqrt(Z*Z+st*st);return jt/=d,y*(st/=d)<F*(Z/=d)&&(y=-y,F=-F,jt=-jt,Lt=-Lt),{scale:new $t(Lt,0,0,d,0,0),translate:new $t(1,0,0,1,dt,At),rotate:new $t(y,F,-F,y,0,0),skew:new $t(1,0,jt,1,0,0)}},$t.prototype.toString=function(y){return this.join(" ")},$t.prototype.inversed=function(){var y=this.sx,F=this.shy,Z=this.shx,st=this.sy,dt=this.tx,At=this.ty,Lt=1/(y*st-F*Z),jt=st*Lt,d=-F*Lt,w=-Z*Lt,k=y*Lt;return new $t(jt,d,w,k,-jt*dt-w*At,-d*dt-k*At)},$t.prototype.applyToPoint=function(y){var F=y.x*this.sx+y.y*this.shx+this.tx,Z=y.x*this.shy+y.y*this.sy+this.ty;return new ds(F,Z)},$t.prototype.applyToRectangle=function(y){var F=this.applyToPoint(y),Z=this.applyToPoint(new ds(y.x+y.w,y.y+y.h));return new to(F.x,F.y,Z.x-F.x,Z.y-F.y)},$t.prototype.clone=function(){var y=this.sx,F=this.shy,Z=this.shx,st=this.sy,dt=this.tx,At=this.ty;return new $t(y,F,Z,st,dt,At)},p.Matrix=$t;var Ai=p.matrixMult=function(y,F){return F.multiply(y)},Qn=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Qn;var In=function(y,F){if(!Tr[y]){var Z=(F instanceof So?"Sh":"P")+(Object.keys(Te).length+1).toString(10);F.id=Z,Tr[y]=Z,Te[Z]=F,ke.publish("addPattern",F)}};p.ShadingPattern=So,p.TilingPattern=La,p.addShadingPattern=function(y,F){return A("addShadingPattern()"),In(y,F),this},p.beginTilingPattern=function(y){A("beginTilingPattern()"),eo(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},p.endTilingPattern=function(y,F){A("endTilingPattern()"),F.stream=kt[H].join(`
`),In(y,F),ke.publish("endTilingPattern",F),Oi.pop().restore()};var mn=p.__private__.newObject=function(){var y=hn();return Pn(y,!0),y},hn=p.__private__.newObjectDeferred=function(){return it++,pt[it]=function(){return bt},it},Pn=function(y,F){return F=typeof F=="boolean"&&F,pt[y]=bt,F&&rt(y+" 0 obj"),y},js=p.__private__.newAdditionalObject=function(){var y={objId:hn(),content:""};return Nt.push(y),y},or=hn(),Jn=hn(),xi=p.__private__.decodeColorString=function(y){var F=y.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var Z=parseFloat(F[0]);F=[Z,Z,Z,"r"]}for(var st="#",dt=0;dt<3;dt++)st+=("0"+Math.floor(255*parseFloat(F[dt])).toString(16)).slice(-2);return st},pi=p.__private__.encodeColorString=function(y){var F;typeof y=="string"&&(y={ch1:y});var Z=y.ch1,st=y.ch2,dt=y.ch3,At=y.ch4,Lt=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var jt=new L5(Z);if(jt.ok)Z=jt.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var d=parseInt(Z.substr(1),16);Z=d>>16&255,st=d>>8&255,dt=255&d}if(st===void 0||At===void 0&&Z===st&&st===dt)if(typeof Z=="string")F=Z+" "+Lt[0];else switch(y.precision){case 2:F=D(Z/255)+" "+Lt[0];break;case 3:default:F=E(Z/255)+" "+Lt[0]}else if(At===void 0||ze(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return F=["1.","1.","1.",Lt[1]].join(" ");if(typeof Z=="string")F=[Z,st,dt,Lt[1]].join(" ");else switch(y.precision){case 2:F=[D(Z/255),D(st/255),D(dt/255),Lt[1]].join(" ");break;default:case 3:F=[E(Z/255),E(st/255),E(dt/255),Lt[1]].join(" ")}}else if(typeof Z=="string")F=[Z,st,dt,At,Lt[2]].join(" ");else switch(y.precision){case 2:F=[D(Z),D(st),D(dt),D(At),Lt[2]].join(" ");break;case 3:default:F=[E(Z),E(st),E(dt),E(At),Lt[2]].join(" ")}return F},gi=p.__private__.getFilters=function(){return o},yn=p.__private__.putStream=function(y){var F=(y=y||{}).data||"",Z=y.filters||gi(),st=y.alreadyAppliedFilters||[],dt=y.addLength1||!1,At=F.length,Lt=y.objectId,jt=function(fe){return fe};if(h!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(jt=en.encryptor(Lt,0));var d={};Z===!0&&(Z=["FlateEncode"]);var w=y.additionalKeyValues||[],k=(d=ie.API.processDataByFilters!==void 0?ie.API.processDataByFilters(F,Z):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(st)?st.join(" "):st.toString());if(d.data.length!==0&&(w.push({key:"Length",value:d.data.length}),dt===!0&&w.push({key:"Length1",value:At})),k.length!=0)if(k.split("/").length-1==1)w.push({key:"Filter",value:k});else{w.push({key:"Filter",value:"["+k+"]"});for(var z=0;z<w.length;z+=1)if(w[z].key==="DecodeParms"){for(var ht=[],vt=0;vt<d.reverseChain.split("/").length-1;vt+=1)ht.push("null");ht.push(w[z].value),w[z].value="["+ht.join(" ")+"]"}}rt("<<");for(var Ct=0;Ct<w.length;Ct++)rt("/"+w[Ct].key+" "+w[Ct].value);rt(">>"),d.data.length!==0&&(rt("stream"),rt(jt(d.data)),rt("endstream"))},Fi=p.__private__.putPage=function(y){var F=y.number,Z=y.data,st=y.objId,dt=y.contentsObjId;Pn(st,!0),rt("<</Type /Page"),rt("/Parent "+y.rootDictionaryObjId+" 0 R"),rt("/Resources "+y.resourceDictionaryObjId+" 0 R"),rt("/MediaBox ["+parseFloat(P(y.mediaBox.bottomLeftX))+" "+parseFloat(P(y.mediaBox.bottomLeftY))+" "+P(y.mediaBox.topRightX)+" "+P(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&rt("/CropBox ["+P(y.cropBox.bottomLeftX)+" "+P(y.cropBox.bottomLeftY)+" "+P(y.cropBox.topRightX)+" "+P(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&rt("/BleedBox ["+P(y.bleedBox.bottomLeftX)+" "+P(y.bleedBox.bottomLeftY)+" "+P(y.bleedBox.topRightX)+" "+P(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&rt("/TrimBox ["+P(y.trimBox.bottomLeftX)+" "+P(y.trimBox.bottomLeftY)+" "+P(y.trimBox.topRightX)+" "+P(y.trimBox.topRightY)+"]"),y.artBox!==null&&rt("/ArtBox ["+P(y.artBox.bottomLeftX)+" "+P(y.artBox.bottomLeftY)+" "+P(y.artBox.topRightX)+" "+P(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&rt("/UserUnit "+y.userUnit),ke.publish("putPage",{objId:st,pageContext:ee[F],pageNumber:F,page:Z}),rt("/Contents "+dt+" 0 R"),rt(">>"),rt("endobj");var At=Z.join(`
`);return N===T.ADVANCED&&(At+=`
Q`),Pn(dt,!0),yn({data:At,filters:gi(),objectId:dt}),rt("endobj"),st},Lr=p.__private__.putPages=function(){var y,F,Z=[];for(y=1;y<=Ye;y++)ee[y].objId=hn(),ee[y].contentsObjId=hn();for(y=1;y<=Ye;y++)Z.push(Fi({number:y,data:kt[y],objId:ee[y].objId,contentsObjId:ee[y].contentsObjId,mediaBox:ee[y].mediaBox,cropBox:ee[y].cropBox,bleedBox:ee[y].bleedBox,trimBox:ee[y].trimBox,artBox:ee[y].artBox,userUnit:ee[y].userUnit,rootDictionaryObjId:or,resourceDictionaryObjId:Jn}));Pn(or,!0),rt("<</Type /Pages");var st="/Kids [";for(F=0;F<Ye;F++)st+=Z[F]+" 0 R ";rt(st+"]"),rt("/Count "+Ye),rt(">>"),rt("endobj"),ke.publish("postPutPages")},Cr=function(y){ke.publish("putFont",{font:y,out:rt,newObject:mn,putStream:yn}),y.isAlreadyPutted!==!0&&(y.objectNumber=mn(),rt("<<"),rt("/Type /Font"),rt("/BaseFont /"+kl(y.postScriptName)),rt("/Subtype /Type1"),typeof y.encoding=="string"&&rt("/Encoding /"+y.encoding),rt("/FirstChar 32"),rt("/LastChar 255"),rt(">>"),rt("endobj"))},kr=function(){for(var y in De)De.hasOwnProperty(y)&&(f===!1||f===!0&&m.hasOwnProperty(y))&&Cr(De[y])},is=function(y){y.objectNumber=mn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[P(y.x),P(y.y),P(y.x+y.width),P(y.y+y.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var Z=y.pages[1].join(`
`);yn({data:Z,additionalKeyValues:F,objectId:y.objectNumber}),rt("endobj")},rs=function(){for(var y in En)En.hasOwnProperty(y)&&is(En[y])},Ja=function(y,F){var Z,st=[],dt=1/(F-1);for(Z=0;Z<1;Z+=dt)st.push(Z);if(st.push(1),y[0].offset!=0){var At={offset:0,color:y[0].color};y.unshift(At)}if(y[y.length-1].offset!=1){var Lt={offset:1,color:y[y.length-1].color};y.push(Lt)}for(var jt="",d=0,w=0;w<st.length;w++){for(Z=st[w];Z>y[d+1].offset;)d++;var k=y[d].offset,z=(Z-k)/(y[d+1].offset-k),ht=y[d].color,vt=y[d+1].color;jt+=tt(Math.round((1-z)*ht[0]+z*vt[0]).toString(16))+tt(Math.round((1-z)*ht[1]+z*vt[1]).toString(16))+tt(Math.round((1-z)*ht[2]+z*vt[2]).toString(16))}return jt.trim()},Us=function(y,F){F||(F=21);var Z=mn(),st=Ja(y.colors,F),dt=[];dt.push({key:"FunctionType",value:"0"}),dt.push({key:"Domain",value:"[0.0 1.0]"}),dt.push({key:"Size",value:"["+F+"]"}),dt.push({key:"BitsPerSample",value:"8"}),dt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yn({data:st,additionalKeyValues:dt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),rt("endobj"),y.objectNumber=mn(),rt("<< /ShadingType "+y.type),rt("/ColorSpace /DeviceRGB");var At="/Coords ["+P(parseFloat(y.coords[0]))+" "+P(parseFloat(y.coords[1]))+" ";y.type===2?At+=P(parseFloat(y.coords[2]))+" "+P(parseFloat(y.coords[3])):At+=P(parseFloat(y.coords[2]))+" "+P(parseFloat(y.coords[3]))+" "+P(parseFloat(y.coords[4]))+" "+P(parseFloat(y.coords[5])),rt(At+="]"),y.matrix&&rt("/Matrix ["+y.matrix.toString()+"]"),rt("/Function "+Z+" 0 R"),rt("/Extend [true true]"),rt(">>"),rt("endobj")},Za=function(y,F){var Z=hn(),st=mn();F.push({resourcesOid:Z,objectOid:st}),y.objectNumber=st;var dt=[];dt.push({key:"Type",value:"/Pattern"}),dt.push({key:"PatternType",value:"1"}),dt.push({key:"PaintType",value:"1"}),dt.push({key:"TilingType",value:"1"}),dt.push({key:"BBox",value:"["+y.boundingBox.map(P).join(" ")+"]"}),dt.push({key:"XStep",value:P(y.xStep)}),dt.push({key:"YStep",value:P(y.yStep)}),dt.push({key:"Resources",value:Z+" 0 R"}),y.matrix&&dt.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),yn({data:y.stream,additionalKeyValues:dt,objectId:y.objectNumber}),rt("endobj")},Nr=function(y){var F;for(F in Te)Te.hasOwnProperty(F)&&(Te[F]instanceof So?Us(Te[F]):Te[F]instanceof La&&Za(Te[F],y))},Rr=function(y){for(var F in y.objectNumber=mn(),rt("<<"),y)switch(F){case"opacity":rt("/ca "+D(y[F]));break;case"stroke-opacity":rt("/CA "+D(y[F]))}rt(">>"),rt("endobj")},ar=function(){var y;for(y in Ze)Ze.hasOwnProperty(y)&&Rr(Ze[y])},ss=function(){for(var y in rt("/XObject <<"),En)En.hasOwnProperty(y)&&En[y].objectNumber>=0&&rt("/"+y+" "+En[y].objectNumber+" 0 R");ke.publish("putXobjectDict"),rt(">>")},ac=function(){en.oid=mn(),rt("<<"),rt("/Filter /Standard"),rt("/V "+en.v),rt("/R "+en.r),rt("/U <"+en.toHexString(en.U)+">"),rt("/O <"+en.toHexString(en.O)+">"),rt("/P "+en.P),rt(">>"),rt("endobj")},Zo=function(){for(var y in rt("/Font <<"),De)De.hasOwnProperty(y)&&(f===!1||f===!0&&m.hasOwnProperty(y))&&rt("/"+y+" "+De[y].objectNumber+" 0 R");rt(">>")},tl=function(){if(Object.keys(Te).length>0){for(var y in rt("/Shading <<"),Te)Te.hasOwnProperty(y)&&Te[y]instanceof So&&Te[y].objectNumber>=0&&rt("/"+y+" "+Te[y].objectNumber+" 0 R");ke.publish("putShadingPatternDict"),rt(">>")}},os=function(y){if(Object.keys(Te).length>0){for(var F in rt("/Pattern <<"),Te)Te.hasOwnProperty(F)&&Te[F]instanceof p.TilingPattern&&Te[F].objectNumber>=0&&Te[F].objectNumber<y&&rt("/"+F+" "+Te[F].objectNumber+" 0 R");ke.publish("putTilingPatternDict"),rt(">>")}},ta=function(){if(Object.keys(Ze).length>0){var y;for(y in rt("/ExtGState <<"),Ze)Ze.hasOwnProperty(y)&&Ze[y].objectNumber>=0&&rt("/"+y+" "+Ze[y].objectNumber+" 0 R");ke.publish("putGStateDict"),rt(">>")}},tn=function(y){Pn(y.resourcesOid,!0),rt("<<"),rt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zo(),tl(),os(y.objectOid),ta(),ss(),rt(">>"),rt("endobj")},ea=function(){var y=[];kr(),ar(),rs(),Nr(y),ke.publish("putResources"),y.forEach(tn),tn({resourcesOid:Jn,objectOid:Number.MAX_SAFE_INTEGER}),ke.publish("postPutResources")},na=function(){ke.publish("putAdditionalObjects");for(var y=0;y<Nt.length;y++){var F=Nt[y];Pn(F.objId,!0),rt(F.content),rt("endobj")}ke.publish("postPutAdditionalObjects")},el=function(y){Ke[y.fontName]=Ke[y.fontName]||{},Ke[y.fontName][y.fontStyle]=y.id},ia=function(y,F,Z,st,dt){var At={id:"F"+(Object.keys(De).length+1).toString(10),postScriptName:y,fontName:F,fontStyle:Z,encoding:st,isStandardFont:dt||!1,metadata:{}};return ke.publish("addFont",{font:At,instance:this}),De[At.id]=At,el(At),At.id},nl=function(y){for(var F=0,Z=Dt.length;F<Z;F++){var st=ia.call(this,y[F][0],y[F][1],y[F][2],Dt[F][3],!0);f===!1&&(m[st]=!0);var dt=y[F][0].split("-");el({id:st,fontName:dt[0],fontStyle:dt[1]||""})}ke.publish("addFonts",{fonts:De,dictionary:Ke})},Si=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(st){var F=st.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var Z="Error in function "+F.split(`
`)[0].split("<")[0]+": "+st.message;if(!oe.console)throw new Error(Z);oe.console.error(Z,st),oe.alert&&alert(Z)}},y.foo.bar=y,y.foo},zs=function(y,F){var Z,st,dt,At,Lt,jt,d,w,k;if(dt=(F=F||{}).sourceEncoding||"Unicode",Lt=F.outputEncoding,(F.autoencode||Lt)&&De[_e].metadata&&De[_e].metadata[dt]&&De[_e].metadata[dt].encoding&&(At=De[_e].metadata[dt].encoding,!Lt&&De[_e].encoding&&(Lt=De[_e].encoding),!Lt&&At.codePages&&(Lt=At.codePages[0]),typeof Lt=="string"&&(Lt=At[Lt]),Lt)){for(d=!1,jt=[],Z=0,st=y.length;Z<st;Z++)(w=Lt[y.charCodeAt(Z)])?jt.push(String.fromCharCode(w)):jt.push(y[Z]),jt[Z].charCodeAt(0)>>8&&(d=!0);y=jt.join("")}for(Z=y.length;d===void 0&&Z!==0;)y.charCodeAt(Z-1)>>8&&(d=!0),Z--;if(!d)return y;for(jt=F.noBOM?[]:[254,255],Z=0,st=y.length;Z<st;Z++){if((k=(w=y.charCodeAt(Z))>>8)>>8)throw new Error("Character at position "+Z+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(k),jt.push(w-(k<<8))}return String.fromCharCode.apply(void 0,jt)},dn=p.__private__.pdfEscape=p.pdfEscape=function(y,F){return zs(y,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mi=p.__private__.beginPage=function(y){kt[++Ye]=[],ee[Ye]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},ra(Ye),xt(kt[H])},as=function(y,F){var Z,st,dt;switch(e=F||e,typeof y=="string"&&(Z=x(y.toLowerCase()),Array.isArray(Z)&&(st=Z[0],dt=Z[1])),Array.isArray(y)&&(st=y[0]*Ht,dt=y[1]*Ht),isNaN(st)&&(st=r[0],dt=r[1]),(st>14400||dt>14400)&&(Ge.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),st=Math.min(14400,st),dt=Math.min(14400,dt)),r=[st,dt],e.substr(0,1)){case"l":dt>st&&(r=[dt,st]);break;case"p":st>dt&&(r=[dt,st])}mi(r),ca(la),rt(zn),da!==0&&rt(da+" J"),Zs!==0&&rt(Zs+" j"),ke.publish("addPage",{pageNumber:Ye})},qs=function(y){y>0&&y<=Ye&&(kt.splice(y,1),ee.splice(y,1),Ye--,H>Ye&&(H=Ye),this.setPage(H))},ra=function(y){y>0&&y<=Ye&&(H=y)},Ve=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return kt.length-1},ls=function(y,F,Z){var st,dt=void 0;return Z=Z||{},y=y!==void 0?y:De[_e].fontName,F=F!==void 0?F:De[_e].fontStyle,st=y.toLowerCase(),Ke[st]!==void 0&&Ke[st][F]!==void 0?dt=Ke[st][F]:Ke[y]!==void 0&&Ke[y][F]!==void 0?dt=Ke[y][F]:Z.disableWarning===!1&&Ge.warn("Unable to look up font label for font '"+y+"', '"+F+"'. Refer to getFontList() for available fonts."),dt||Z.noFallback||(dt=Ke.times[F])==null&&(dt=Ke.times.normal),dt},cs=p.__private__.putInfo=function(){var y=mn(),F=function(st){return st};for(var Z in h!==null&&(F=en.encryptor(y,0)),rt("<<"),rt("/Producer ("+dn(F("jsPDF "+ie.version))+")"),re)re.hasOwnProperty(Z)&&re[Z]&&rt("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+dn(F(re[Z]))+")");rt("/CreationDate ("+dn(F(ot))+")"),rt(">>"),rt("endobj")},lr=p.__private__.putCatalog=function(y){var F=(y=y||{}).rootDictionaryObjId||or;switch(mn(),rt("<<"),rt("/Type /Catalog"),rt("/Pages "+F+" 0 R"),qt||(qt="fullwidth"),qt){case"fullwidth":rt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":rt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":rt("/OpenAction [3 0 R /Fit]");break;case"original":rt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+qt;Z.substr(Z.length-1)==="%"&&(qt=parseInt(qt)/100),typeof qt=="number"&&rt("/OpenAction [3 0 R /XYZ null null "+D(qt)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":rt("/PageLayout /OneColumn");break;case"single":rt("/PageLayout /SinglePage");break;case"two":case"twoleft":rt("/PageLayout /TwoColumnLeft");break;case"tworight":rt("/PageLayout /TwoColumnRight")}ae&&rt("/PageMode /"+ae),ke.publish("putCatalog"),rt(">>"),rt("endobj")},lc=p.__private__.putTrailer=function(){rt("trailer"),rt("<<"),rt("/Size "+(it+1)),rt("/Root "+it+" 0 R"),rt("/Info "+(it-1)+" 0 R"),h!==null&&rt("/Encrypt "+en.oid+" 0 R"),rt("/ID [ <"+Y+"> <"+Y+"> ]"),rt(">>")},il=p.__private__.putHeader=function(){rt("%PDF-"+v),rt("%ºß¬à")},cc=p.__private__.putXRef=function(){var y="0000000000";rt("xref"),rt("0 "+(it+1)),rt("0000000000 65535 f ");for(var F=1;F<=it;F++)typeof pt[F]=="function"?rt((y+pt[F]()).slice(-10)+" 00000 n "):pt[F]!==void 0?rt((y+pt[F]).slice(-10)+" 00000 n "):rt("0000000000 00000 n ")},cr=p.__private__.buildDocument=function(){te(),xt(gt),ke.publish("buildDocument"),il(),Lr(),na(),ea(),h!==null&&ac(),cs(),lr();var y=bt;return cc(),lc(),rt("startxref"),rt(""+y),rt("%%EOF"),xt(kt[H]),gt.join(`
`)},Hs=p.__private__.getBlob=function(y){return new Blob([Yt(y)],{type:"application/pdf"})},Ws=p.output=p.__private__.output=Si(function(y,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",y){case void 0:return cr();case"save":p.save(F.filename);break;case"arraybuffer":return Yt(cr());case"blob":return Hs(cr());case"bloburi":case"bloburl":if(oe.URL!==void 0&&typeof oe.URL.createObjectURL=="function")return oe.URL&&oe.URL.createObjectURL(Hs(cr()))||void 0;Ge.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",st=cr();try{Z=Op(st)}catch(vt){Z=Op(unescape(encodeURIComponent(st)))}return"data:application/pdf;filename="+F.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var dt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(dt=F.pdfObjectUrl,At="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+dt+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",jt=oe.open();return jt!==null&&jt.document.write(Lt),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',w=oe.open();if(w!==null){w.document.write(d);var k=this;w.document.documentElement.querySelector("#pdfViewer").onload=function(){w.document.title=F.filename,w.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(k.output("bloburl"))}}return w}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(oe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var z='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',ht=oe.open();if(ht!==null&&(ht.document.write(z),ht.document.title=F.filename),ht||typeof safari=="undefined")return ht;break;case"datauri":case"dataurl":return oe.document.location.href=this.output("datauristring",F);default:return null}}),Dr=function(y){return Array.isArray(Yi)===!0&&Yi.indexOf(y)>-1};switch(i){case"pt":Ht=1;break;case"mm":Ht=72/25.4;break;case"cm":Ht=72/2.54;break;case"in":Ht=72;break;case"px":Ht=Dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ht=12;break;case"ex":Ht=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ht=i}var en=null;_t(),et();var rl=function(y){return h!==null?en.encryptor(y,0):function(F){return F}},sa=p.__private__.getPageInfo=p.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ee[y].objId,pageNumber:y,pageContext:ee[y]}},le=p.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in ee)if(ee[F].objId===y)break;return sa(F)},Mr=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ee[H].objId,pageNumber:H,pageContext:ee[H]}};p.addPage=function(){return as.apply(this,arguments),this},p.setPage=function(){return ra.apply(this,arguments),xt.call(this,kt[H]),this},p.insertPage=function(y){return this.addPage(),this.movePage(H,y),this},p.movePage=function(y,F){var Z,st;if(y>F){Z=kt[y],st=ee[y];for(var dt=y;dt>F;dt--)kt[dt]=kt[dt-1],ee[dt]=ee[dt-1];kt[F]=Z,ee[F]=st,this.setPage(F)}else if(y<F){Z=kt[y],st=ee[y];for(var At=y;At<F;At++)kt[At]=kt[At+1],ee[At]=ee[At+1];kt[F]=Z,ee[F]=st,this.setPage(F)}return this},p.deletePage=function(){return qs.apply(this,arguments),this},p.__private__.text=p.text=function(y,F,Z,st,dt){var At,Lt,jt,d,w,k,z,ht,vt,Ct=(st=st||{}).scope||this;if(typeof y=="number"&&typeof F=="number"&&(typeof Z=="string"||Array.isArray(Z))){var fe=Z;Z=F,F=y,y=fe}if(arguments[3]instanceof $t?(A("The transform parameter of text() with a Matrix value"),vt=dt):(jt=arguments[4],d=arguments[5],ze(z=arguments[3])==="object"&&z!==null||(typeof jt=="string"&&(d=jt,jt=null),typeof z=="string"&&(d=z,z=null),typeof z=="number"&&(jt=z,z=null),st={flags:z,angle:jt,align:d})),isNaN(F)||isNaN(Z)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Ct;var Ae="",pe=!1,Fe=typeof st.lineHeightFactor=="number"?st.lineHeightFactor:Oe,We=Ct.internal.scaleFactor;function pr(Xe){return Xe=Xe.split("	").join(Array(st.TabLen||9).join(" ")),dn(Xe,z)}function qn(Xe){for(var Qe,bn=Xe.concat(),Rn=[],ys=bn.length;ys--;)typeof(Qe=bn.shift())=="string"?Rn.push(Qe):Array.isArray(Xe)&&(Qe.length===1||Qe[1]===void 0&&Qe[2]===void 0)?Rn.push(Qe[0]):Rn.push([Qe[0],Qe[1],Qe[2]]);return Rn}function Br(Xe,Qe){var bn;if(typeof Xe=="string")bn=Qe(Xe)[0];else if(Array.isArray(Xe)){for(var Rn,ys,vc=Xe.concat(),yl=[],Ku=vc.length;Ku--;)typeof(Rn=vc.shift())=="string"?yl.push(Qe(Rn)[0]):Array.isArray(Rn)&&typeof Rn[0]=="string"&&(ys=Qe(Rn[0],Rn[1],Rn[2]),yl.push([ys[0],ys[1],ys[2]]));bn=yl}return bn}var jr=!1,hc=!0;if(typeof y=="string")jr=!0;else if(Array.isArray(y)){var dc=y.concat();Lt=[];for(var cl,Hn=dc.length;Hn--;)(typeof(cl=dc.shift())!="string"||Array.isArray(cl)&&typeof cl[0]!="string")&&(hc=!1);jr=hc}if(jr===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var ul=Mt/Ct.internal.scaleFactor,hl=ul*(Fe-1);switch(st.baseline){case"bottom":Z-=hl;break;case"top":Z+=ul-hl;break;case"hanging":Z+=ul-2*hl;break;case"middle":Z+=ul/2-hl}if((k=st.maxWidth||0)>0&&(typeof y=="string"?y=Ct.splitTextToSize(y,k):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Xe,Qe){return Xe.concat(Ct.splitTextToSize(Qe,k))},[]))),At={text:y,x:F,y:Z,options:st,mutex:{pdfEscape:dn,activeFontKey:_e,fonts:De,activeFontSize:Mt}},ke.publish("preProcessText",At),y=At.text,jt=(st=At.options).angle,!(vt instanceof $t)&&jt&&typeof jt=="number"){jt*=Math.PI/180,st.rotationDirection===0&&(jt=-jt),N===T.ADVANCED&&(jt=-jt);var dl=Math.cos(jt),fc=Math.sin(jt);vt=new $t(dl,fc,-fc,dl,0,0)}else jt&&jt instanceof $t&&(vt=jt);N!==T.ADVANCED||vt||(vt=Qn),(w=st.charSpace||hs)!==void 0&&(Ae+=P(I(w))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ht=st.horizontalScale)!==void 0&&(Ae+=P(100*ht)+` Tz
`),st.lang;var Ei=-1,sf=st.renderingMode!==void 0?st.renderingMode:st.stroke,pc=Ct.internal.getCurrentPageInfo().pageContext;switch(sf){case 0:case!1:case"fill":Ei=0;break;case 1:case!0:case"stroke":Ei=1;break;case 2:case"fillThenStroke":Ei=2;break;case 3:case"invisible":Ei=3;break;case 4:case"fillAndAddForClipping":Ei=4;break;case 5:case"strokeAndAddPathForClipping":Ei=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ei=6;break;case 7:case"addToPathForClipping":Ei=7}var Hu=pc.usedRenderingMode!==void 0?pc.usedRenderingMode:-1;Ei!==-1?Ae+=Ei+` Tr
`:Hu!==-1&&(Ae+=`0 Tr
`),Ei!==-1&&(pc.usedRenderingMode=Ei),d=st.align||"left";var Qi,fl=Mt*Fe,Wu=Ct.internal.pageSize.getWidth(),$u=De[_e];w=st.charSpace||hs,k=st.maxWidth||0,z=Object.assign({autoencode:!0,noBOM:!0},st.flags);var ro=[],fa=function(Xe){return Ct.getStringUnitWidth(Xe,{font:$u,charSpace:w,fontSize:Mt,doKerning:!1})*Mt/We};if(Object.prototype.toString.call(y)==="[object Array]"){var Ii;Lt=qn(y),d!=="left"&&(Qi=Lt.map(fa));var yi,so=0;if(d==="right"){F-=Qi[0],y=[],Hn=Lt.length;for(var ps=0;ps<Hn;ps++)ps===0?(yi=ji(F),Ii=Nn(Z)):(yi=I(so-Qi[ps]),Ii=-fl),y.push([Lt[ps],yi,Ii]),so=Qi[ps]}else if(d==="center"){F-=Qi[0]/2,y=[],Hn=Lt.length;for(var gs=0;gs<Hn;gs++)gs===0?(yi=ji(F),Ii=Nn(Z)):(yi=I((so-Qi[gs])/2),Ii=-fl),y.push([Lt[gs],yi,Ii]),so=Qi[gs]}else if(d==="left"){y=[],Hn=Lt.length;for(var pl=0;pl<Hn;pl++)y.push(Lt[pl])}else if(d==="justify"&&$u.encoding==="Identity-H"){y=[],Hn=Lt.length,k=k!==0?k:Wu;for(var ms=0,vn=0;vn<Hn;vn++)if(Ii=vn===0?Nn(Z):-fl,yi=vn===0?ji(F):ms,vn<Hn-1){var gc=I((k-Qi[vn])/(Lt[vn].split(" ").length-1)),vi=Lt[vn].split(" ");y.push([vi[0]+" ",yi,Ii]),ms=0;for(var Ji=1;Ji<vi.length;Ji++){var gl=(fa(vi[Ji-1]+" "+vi[Ji])-fa(vi[Ji]))*We+gc;Ji==vi.length-1?y.push([vi[Ji],gl,0]):y.push([vi[Ji]+" ",gl,0]),ms-=gl}}else y.push([Lt[vn],yi,Ii]);y.push(["",ms,0])}else{if(d!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Hn=Lt.length,k=k!==0?k:Wu,vn=0;vn<Hn;vn++)Ii=vn===0?Nn(Z):-fl,yi=vn===0?ji(F):0,vn<Hn-1?ro.push(P(I((k-Qi[vn])/(Lt[vn].split(" ").length-1)))):ro.push(0),y.push([Lt[vn],yi,Ii])}}var Gu=typeof st.R2L=="boolean"?st.R2L:Qt;Gu===!0&&(y=Br(y,function(Xe,Qe,bn){return[Xe.split("").reverse().join(""),Qe,bn]})),At={text:y,x:F,y:Z,options:st,mutex:{pdfEscape:dn,activeFontKey:_e,fonts:De,activeFontSize:Mt}},ke.publish("postProcessText",At),y=At.text,pe=At.mutex.isHex||!1;var mc=De[_e].encoding;mc!=="WinAnsiEncoding"&&mc!=="StandardEncoding"||(y=Br(y,function(Xe,Qe,bn){return[pr(Xe),Qe,bn]})),Lt=qn(y),y=[];for(var pa,ga,oo,ma=0,ml=1,ya=Array.isArray(Lt[0])?ml:ma,ao="",yc=function(Xe,Qe,bn){var Rn="";return bn instanceof $t?(bn=typeof st.angle=="number"?Ai(bn,new $t(1,0,0,1,Xe,Qe)):Ai(new $t(1,0,0,1,Xe,Qe),bn),N===T.ADVANCED&&(bn=Ai(new $t(1,0,0,-1,0,0),bn)),Rn=bn.join(" ")+` Tm
`):Rn=P(Xe)+" "+P(Qe)+` Td
`,Rn},Zi=0;Zi<Lt.length;Zi++){switch(ao="",ya){case ml:oo=(pe?"<":"(")+Lt[Zi][0]+(pe?">":")"),pa=parseFloat(Lt[Zi][1]),ga=parseFloat(Lt[Zi][2]);break;case ma:oo=(pe?"<":"(")+Lt[Zi]+(pe?">":")"),pa=ji(F),ga=Nn(Z)}ro!==void 0&&ro[Zi]!==void 0&&(ao=ro[Zi]+` Tw
`),Zi===0?y.push(ao+yc(pa,ga,vt)+oo):ya===ma?y.push(ao+oo):ya===ml&&y.push(ao+yc(pa,ga,vt)+oo)}y=ya===ma?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var tr=`BT
/`;return tr+=_e+" "+Mt+` Tf
`,tr+=P(Mt*Fe)+` TL
`,tr+=dr+`
`,tr+=Ae,tr+=y,rt(tr+="ET"),m[_e]=!0,Ct};var uc=p.__private__.clip=p.clip=function(y){return rt(y==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return uc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return rt("n"),this};var Xi=p.__private__.isValidStyle=function(y){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(y){return Xi(y)&&(c=y),this};var sl=p.__private__.getStyle=p.getStyle=function(y){var F=c;switch(y){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=y}return F},Vi=p.close=function(){return rt("h"),this};p.stroke=function(){return rt("S"),this},p.fill=function(y){return $s("f",y),this},p.fillEvenOdd=function(y){return $s("f*",y),this},p.fillStroke=function(y){return $s("B",y),this},p.fillStrokeEvenOdd=function(y){return $s("B*",y),this};var $s=function(y,F){ze(F)==="object"?Ks(F,y):rt(y)},oa=function(y){y===null||N===T.ADVANCED&&y===void 0||(y=sl(y),rt(y))};function Gs(y,F,Z,st,dt){var At=new La(F||this.boundingBox,Z||this.xStep,st||this.yStep,this.gState,dt||this.matrix);At.stream=this.stream;var Lt=y+"$$"+this.cloneIndex+++"$$";return In(Lt,At),At}var Ks=function(y,F){var Z=Tr[y.key],st=Te[Z];if(st instanceof So)rt("q"),rt(ol(F)),st.gState&&p.setGState(st.gState),rt(y.matrix.toString()+" cm"),rt("/"+Z+" sh"),rt("Q");else if(st instanceof La){var dt=new $t(1,0,0,-1,0,Zn());y.matrix&&(dt=dt.multiply(y.matrix||Qn),Z=Gs.call(st,y.key,y.boundingBox,y.xStep,y.yStep,dt).id),rt("q"),rt("/Pattern cs"),rt("/"+Z+" scn"),st.gState&&p.setGState(st.gState),rt(F),rt("Q")}},ol=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ur=p.moveTo=function(y,F){return rt(P(I(y))+" "+P(G(F))+" m"),this},Bi=p.lineTo=function(y,F){return rt(P(I(y))+" "+P(G(F))+" l"),this},hr=p.curveTo=function(y,F,Z,st,dt,At){return rt([P(I(y)),P(G(F)),P(I(Z)),P(G(st)),P(I(dt)),P(G(At)),"c"].join(" ")),this};p.__private__.line=p.line=function(y,F,Z,st,dt){if(isNaN(y)||isNaN(F)||isNaN(Z)||isNaN(st)||!Xi(dt))throw new Error("Invalid arguments passed to jsPDF.line");return N===T.COMPAT?this.lines([[Z-y,st-F]],y,F,[1,1],dt||"S"):this.lines([[Z-y,st-F]],y,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(y,F,Z,st,dt,At){var Lt,jt,d,w,k,z,ht,vt,Ct,fe,Ae,pe;if(typeof y=="number"&&(pe=Z,Z=F,F=y,y=pe),st=st||[1,1],At=At||!1,isNaN(F)||isNaN(Z)||!Array.isArray(y)||!Array.isArray(st)||!Xi(dt)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ur(F,Z),Lt=st[0],jt=st[1],w=y.length,fe=F,Ae=Z,d=0;d<w;d++)(k=y[d]).length===2?(fe=k[0]*Lt+fe,Ae=k[1]*jt+Ae,Bi(fe,Ae)):(z=k[0]*Lt+fe,ht=k[1]*jt+Ae,vt=k[2]*Lt+fe,Ct=k[3]*jt+Ae,fe=k[4]*Lt+fe,Ae=k[5]*jt+Ae,hr(z,ht,vt,Ct,fe,Ae));return At&&Vi(),oa(dt),this},p.path=function(y){for(var F=0;F<y.length;F++){var Z=y[F],st=Z.c;switch(Z.op){case"m":ur(st[0],st[1]);break;case"l":Bi(st[0],st[1]);break;case"c":hr.apply(this,st);break;case"h":Vi()}}return this},p.__private__.rect=p.rect=function(y,F,Z,st,dt){if(isNaN(y)||isNaN(F)||isNaN(Z)||isNaN(st)||!Xi(dt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===T.COMPAT&&(st=-st),rt([P(I(y)),P(G(F)),P(I(Z)),P(I(st)),"re"].join(" ")),oa(dt),this},p.__private__.triangle=p.triangle=function(y,F,Z,st,dt,At,Lt){if(isNaN(y)||isNaN(F)||isNaN(Z)||isNaN(st)||isNaN(dt)||isNaN(At)||!Xi(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-y,st-F],[dt-Z,At-st],[y-dt,F-At]],y,F,[1,1],Lt,!0),this},p.__private__.roundedRect=p.roundedRect=function(y,F,Z,st,dt,At,Lt){if(isNaN(y)||isNaN(F)||isNaN(Z)||isNaN(st)||isNaN(dt)||isNaN(At)||!Xi(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return dt=Math.min(dt,.5*Z),At=Math.min(At,.5*st),this.lines([[Z-2*dt,0],[dt*jt,0,dt,At-At*jt,dt,At],[0,st-2*At],[0,At*jt,-dt*jt,At,-dt,At],[2*dt-Z,0],[-dt*jt,0,-dt,-At*jt,-dt,-At],[0,2*At-st],[0,-At*jt,dt*jt,-At,dt,-At]],y+dt,F,[1,1],Lt,!0),this},p.__private__.ellipse=p.ellipse=function(y,F,Z,st,dt){if(isNaN(y)||isNaN(F)||isNaN(Z)||isNaN(st)||!Xi(dt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*Z,Lt=4/3*(Math.SQRT2-1)*st;return ur(y+Z,F),hr(y+Z,F-Lt,y+At,F-st,y,F-st),hr(y-At,F-st,y-Z,F-Lt,y-Z,F),hr(y-Z,F+Lt,y-At,F+st,y,F+st),hr(y+At,F+st,y+Z,F+Lt,y+Z,F),oa(dt),this},p.__private__.circle=p.circle=function(y,F,Z,st){if(isNaN(y)||isNaN(F)||isNaN(Z)||!Xi(st))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,F,Z,Z,st)},p.setFont=function(y,F,Z){return Z&&(F=W(F,Z)),_e=ls(y,F,{disableWarning:!1}),this};var aa=p.__private__.getFont=p.getFont=function(){return De[ls.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var y,F,Z={};for(y in Ke)if(Ke.hasOwnProperty(y))for(F in Z[y]=[],Ke[y])Ke[y].hasOwnProperty(F)&&Z[y].push(F);return Z},p.addFont=function(y,F,Z,st,dt){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?dt=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&(Z=W(Z,st)),dt=dt||"Identity-H",ia.call(this,y,F,Z,dt)};var Oe,la=n.lineWidth||.200025,Ys=p.__private__.getLineWidth=p.getLineWidth=function(){return la},ca=p.__private__.setLineWidth=p.setLineWidth=function(y){return la=y,rt(P(I(y))+" w"),this};p.__private__.setLineDash=ie.API.setLineDash=ie.API.setLineDashPattern=function(y,F){if(y=y||[],F=F||0,isNaN(F)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(Z){return P(I(Z))}).join(" "),F=P(I(F)),rt("["+y+"] "+F+" d"),this};var ua=p.__private__.getLineHeight=p.getLineHeight=function(){return Mt*Oe};p.__private__.getLineHeight=p.getLineHeight=function(){return Mt*Oe};var ha=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(Oe=y),this},us=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Oe};ha(n.lineHeight);var ji=p.__private__.getHorizontalCoordinate=function(y){return I(y)},Nn=p.__private__.getVerticalCoordinate=function(y){return N===T.ADVANCED?y:ee[H].mediaBox.topRightY-ee[H].mediaBox.bottomLeftY-I(y)},al=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(y){return P(ji(y))},Or=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(y){return P(Nn(y))},zn=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return xi(zn)},p.__private__.setStrokeColor=p.setDrawColor=function(y,F,Z,st){return zn=pi({ch1:y,ch2:F,ch3:Z,ch4:st,pdfColorType:"draw",precision:2}),rt(zn),this};var Xs=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return xi(Xs)},p.__private__.setFillColor=p.setFillColor=function(y,F,Z,st){return Xs=pi({ch1:y,ch2:F,ch3:Z,ch4:st,pdfColorType:"fill",precision:2}),rt(Xs),this};var dr=n.textColor||"0 g",Qs=p.__private__.getTextColor=p.getTextColor=function(){return xi(dr)};p.__private__.setTextColor=p.setTextColor=function(y,F,Z,st){return dr=pi({ch1:y,ch2:F,ch3:Z,ch4:st,pdfColorType:"text",precision:3}),this};var hs=n.charSpace,Js=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(hs||0)};p.__private__.setCharSpace=p.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hs=y,this};var da=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(y){var F=p.CapJoinStyles[y];if(F===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return da=F,rt(F+" J"),this};var Zs=0;p.__private__.setLineJoin=p.setLineJoin=function(y){var F=p.CapJoinStyles[y];if(F===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zs=F,rt(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return rt(P(I(y))+" M"),this},p.GState=bu,p.setGState=function(y){(y=typeof y=="string"?Ze[Un[y]]:Fr(null,y)).equals(Mi)||(rt("/"+y.id+" gs"),Mi=y)};var Fr=function(y,F){if(!y||!Un[y]){var Z=!1;for(var st in Ze)if(Ze.hasOwnProperty(st)&&Ze[st].equals(F)){Z=!0;break}if(Z)F=Ze[st];else{var dt="GS"+(Object.keys(Ze).length+1).toString(10);Ze[dt]=F,F.id=dt}return y&&(Un[y]=F.id),ke.publish("addGState",F),F}};p.addGState=function(y,F){return Fr(y,F),this},p.saveGraphicsState=function(){return rt("q"),Ki.push({key:_e,size:Mt,color:dr}),this},p.restoreGraphicsState=function(){rt("Q");var y=Ki.pop();return _e=y.key,Mt=y.size,dr=y.color,Mi=null,this},p.setCurrentTransformationMatrix=function(y){return rt(y.toString()+" cm"),this},p.comment=function(y){return rt("#"+y),this};var ds=function(y,F){var Z=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(At){isNaN(At)||(Z=parseFloat(At))}});var st=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return st},set:function(At){isNaN(At)||(st=parseFloat(At))}});var dt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return dt},set:function(At){dt=At.toString()}}),this},to=function(y,F,Z,st){ds.call(this,y,F),this.type="rect";var dt=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return dt},set:function(Lt){isNaN(Lt)||(dt=parseFloat(Lt))}});var At=st||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(Lt){isNaN(Lt)||(At=parseFloat(Lt))}}),this},fs=function(){this.page=Ye,this.currentPage=H,this.pages=kt.slice(0),this.pagesContext=ee.slice(0),this.x=un,this.y=Ie,this.matrix=wi,this.width=Vr(H),this.height=Zn(H),this.outputDestination=Vt,this.id="",this.objectNumber=-1};fs.prototype.restore=function(){Ye=this.page,H=this.currentPage,ee=this.pagesContext,kt=this.pages,un=this.x,Ie=this.y,wi=this.matrix,no(H,this.width),io(H,this.height),Vt=this.outputDestination};var eo=function(y,F,Z,st,dt){Oi.push(new fs),Ye=H=0,kt=[],un=y,Ie=F,wi=dt,mi([Z,st])},ll=function(y){if(Xn[y])Oi.pop().restore();else{var F=new fs,Z="Xo"+(Object.keys(En).length+1).toString(10);F.id=Z,Xn[y]=Z,En[Z]=F,ke.publish("addFormObject",F),Oi.pop().restore()}};for(var fr in p.beginFormObject=function(y,F,Z,st,dt){return eo(y,F,Z,st,dt),this},p.endFormObject=function(y){return ll(y),this},p.doFormObject=function(y,F){var Z=En[Xn[y]];return rt("q"),rt(F.toString()+" cm"),rt("/"+Z.id+" Do"),rt("Q"),this},p.getFormObject=function(y){var F=En[Xn[y]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(y,F){return y=y||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Ea(Hs(cr()),y),typeof Ea.unload=="function"&&oe.setTimeout&&setTimeout(Ea.unload,911),this):new Promise(function(Z,st){try{var dt=Ea(Hs(cr()),y);typeof Ea.unload=="function"&&oe.setTimeout&&setTimeout(Ea.unload,911),Z(dt)}catch(At){st(At.message)}})},ie.API)ie.API.hasOwnProperty(fr)&&(fr==="events"&&ie.API.events.length?function(y,F){var Z,st,dt;for(dt=F.length-1;dt!==-1;dt--)Z=F[dt][0],st=F[dt][1],y.subscribe.apply(y,[Z].concat(typeof st=="function"?[st]:st))}(ke,ie.API.events):p[fr]=ie.API[fr]);var Vr=p.getPageWidth=function(y){return(ee[y=y||H].mediaBox.topRightX-ee[y].mediaBox.bottomLeftX)/Ht},no=p.setPageWidth=function(y,F){ee[y].mediaBox.topRightX=F*Ht+ee[y].mediaBox.bottomLeftX},Zn=p.getPageHeight=function(y){return(ee[y=y||H].mediaBox.topRightY-ee[y].mediaBox.bottomLeftY)/Ht},io=p.setPageHeight=function(y,F){ee[y].mediaBox.topRightY=F*Ht+ee[y].mediaBox.bottomLeftY};return p.internal={pdfEscape:dn,getStyle:sl,getFont:aa,getFontSize:Ut,getCharSpace:Js,getTextColor:Qs,getLineHeight:ua,getLineHeightFactor:us,getLineWidth:Ys,write:he,getHorizontalCoordinate:ji,getVerticalCoordinate:Nn,getCoordinateString:al,getVerticalCoordinateString:Or,collections:{},newObject:mn,newAdditionalObject:js,newObjectDeferred:hn,newObjectDeferredBegin:Pn,getFilters:gi,putStream:yn,events:ke,scaleFactor:Ht,pageSize:{getWidth:function(){return Vr(H)},setWidth:function(y){no(H,y)},getHeight:function(){return Zn(H)},setHeight:function(y){io(H,y)}},encryptionOptions:h,encryption:en,getEncryptor:rl,output:Ws,getNumberOfPages:Ve,pages:kt,out:rt,f2:D,f3:E,getPageInfo:sa,getPageInfoByObjId:le,getCurrentPageInfo:Mr,getPDFVersion:_,Point:ds,Rectangle:to,Matrix:$t,hasHotfix:Dr},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Vr(H)},set:function(y){no(H,y)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Zn(H)},set:function(y){io(H,y)},enumerable:!0,configurable:!0}),nl.call(p,Dt),_e="F1",as(r,e),ke.publish("initialized"),p}Cl.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Cl.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cl.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Cl.prototype.processOwnerPassword=function(n,t){return Vp(Fp(t).substr(0,5),n)},Cl.prototype.encryptor=function(n,t){var e=Fp(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return Vp(e,i)}},bu.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||ze(n)!==ze(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},ie.API={events:[]},ie.version="2.5.2";var pn=ie.API,sm=1,Xa=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xl=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ge=function(n){return n.toFixed(2)},bo=function(n){return n.toFixed(5)};pn.__acroform__={};var Di=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},A1=function(n){return n*sm},zr=function(n){var t=new R5,e=Kt.internal.getHeight(n)||0,i=Kt.internal.getWidth(n)||0;return t.BBox=[0,0,Number(ge(i)),Number(ge(e))],t},tP=pn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},eP=pn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},nP=pn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},wn=pn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return nP(n,t-1)},An=pn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tP(n,t-1)},xn=pn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eP(n,t-1)},iP=pn.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=e(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=e(r+o)||0,l.upperRight_Y=i(s)||0,[Number(ge(l.lowerLeft_X)),Number(ge(l.lowerLeft_Y)),Number(ge(l.upperRight_X)),Number(ge(l.upperRight_Y))]},rP=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=Bp(n,e),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+r+" "+ge(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=zr(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},Bp=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=n.multiline?r.map(function(E){return E.split(`
`)}):r.map(function(E){return[E]});var s=e,o=Kt.internal.getHeight(n)||0;o=o<0?-o:o;var a=Kt.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(E,I,R){if(E+1<r.length){var G=I+" "+r[E+1][0];return xh(G,n,R).width<=a-4}return!1};s++;t:for(;s>0;){t="",s--;var c,h,f=xh("3",n,s).height,m=n.multiline?o-s:(o-f)/2,p=m+=2,v=0,_=0,S=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+xh(t,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",T=0,N=0;N<r.length;N++)if(r.hasOwnProperty(N)){var O=!1;if(r[N].length!==1&&S!==r[N].length-1){if((f+2)*(T+2)+2>o)continue t;x+=r[N][S],O=!0,_=N,N--}else{x=(x+=r[N][S]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var B=parseInt(N),W=l(B,x,s),P=N>=r.length-1;if(W&&!P){x+=" ",S=0;continue}if(W||P){if(P)_=B;else if(n.multiline&&(f+2)*(T+2)+2>o)continue t}else{if(!n.multiline||(f+2)*(T+2)+2>o)continue t;_=B}}for(var A="",C=v;C<=_;C++){var D=r[C];if(n.multiline){if(C===_){A+=D[S]+" ",S=(S+1)%D.length;continue}if(C===v){A+=D[D.length-1]+" ";continue}}A+=D[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,h=xh(A,n,s).width,n.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}t+=ge(c)+" "+ge(p)+` Td
`,t+="("+Xa(A)+`) Tj
`,t+=-ge(c)+` 0 Td
`,p=-(s+2),h=0,v=O?_:_+1,T++,x=""}break}return i.text=t,i.fontSize=s,i},xh=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:r}},sP={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},oP=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},aP=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var i=e,r=n[e];t.internal.newObjectDeferredBegin(r.objId,!0),ze(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[i]}},lP=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ir.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(sP)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sm=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new D5,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&oP(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,r){var s=!i;for(var o in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=iP(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Kt.createDefaultAppearanceStream(a),ze(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=rP(a);l.push({key:"AP",value:"<</N "+h+">>"}),r.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var f="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(r,a)),f+="/"+o+" "+v+" ",r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(r,a)),f+="/"+o+" "+v,r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}s&&aP(r.internal.acroformPlugin.xForms,r)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},N5=pn.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(o){return o};if(Array.isArray(n)){for(var r="[",s=0;s<n.length;s++)switch(s!==0&&(r+=" "),ze(n[s])){case"boolean":case"number":case"object":r+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),r+="("+Xa(i(n[s].toString()))+")"):r+=n[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zf=function(n,t,e){var i=function(r){return r};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Xa(i(n))+")"},$r=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$r.prototype.toString=function(){return this.objId+" 0 R"},$r.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},$r.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:N5(r,this.objId,this.scope)}):r instanceof $r?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var R5=function(){$r.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Di(R5,$r);var D5=function(){$r.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Xa(e(n))+")"}},set:function(e){n=e}})};Di(D5,$r);var Ir=function n(){$r.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wn(t,3)},set:function(x){x?this.F=An(t,3):this.F=xn(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');e=x}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(x){i=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(x){i[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(x){i[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(x){i[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(x){i[3]=x}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof wd)return;s="FieldObject"+n.FieldNum++}var x=function(T){return T};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Xa(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/sm:c},set:function(x){c=x}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(x){h=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof wd||this instanceof jo))return zf(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Dn?m:zf(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof Dn?x:x.substr(0,1)==="("?xl(x.substr(1,x.length-2)):xl(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?xl(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Dn?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Dn?p:zf(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof Dn?x:x.substr(0,1)==="("?xl(x.substr(1,x.length-2)):xl(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?xl(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Dn?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(x){x=!!x,_=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,1)},set:function(x){x?this.Ff=An(this.Ff,1):this.Ff=xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,2)},set:function(x){x?this.Ff=An(this.Ff,2):this.Ff=xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,3)},set:function(x){x?this.Ff=An(this.Ff,3):this.Ff=xn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');S=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(S){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Di(Ir,$r);var Ra=function(){Ir.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return N5(t,this.objId,this.scope)},set:function(e){var i,r;r=[],typeof(i=e)=="string"&&(r=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,18)},set:function(e){e?this.Ff=An(this.Ff,18):this.Ff=xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=An(this.Ff,19):this.Ff=xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,20)},set:function(e){e?(this.Ff=An(this.Ff,20),t.sort()):this.Ff=xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,22)},set:function(e){e?this.Ff=An(this.Ff,22):this.Ff=xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(e){e?this.Ff=An(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,27)},set:function(e){e?this.Ff=An(this.Ff,27):this.Ff=xn(this.Ff,27)}}),this.hasAppearanceStream=!1};Di(Ra,Ir);var Da=function(){Ra.call(this),this.fontName="helvetica",this.combo=!1};Di(Da,Ra);var Ma=function(){Da.call(this),this.combo=!0};Di(Ma,Da);var Jc=function(){Ma.call(this),this.edit=!0};Di(Jc,Ma);var Dn=function(){Ir.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,15)},set:function(e){e?this.Ff=An(this.Ff,15):this.Ff=xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,16)},set:function(e){e?this.Ff=An(this.Ff,16):this.Ff=xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,17)},set:function(e){e?this.Ff=An(this.Ff,17):this.Ff=xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(e){e?this.Ff=An(this.Ff,26):this.Ff=xn(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+Xa(e(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(e){ze(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Di(Dn,Ir);var Zc=function(){Dn.call(this),this.pushButton=!0};Di(Zc,Dn);var Oa=function(){Dn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Di(Oa,Dn);var wd=function(){var n,t;Ir.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),i)o.push("/"+s+" ("+Xa(r(i[s]))+")");return o.push(">>"),o.join(`
`)},set:function(r){ze(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Di(wd,Ir),Oa.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Oa.prototype.createOption=function(n){var t=new wd;return t.Parent=this,t.optionName=n,this.Kids.push(t),cP.call(this.scope,t),t};var tu=function(){Dn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kt.CheckBox.createAppearanceStream()};Di(tu,Dn);var jo=function(){Ir.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,13)},set:function(t){t?this.Ff=An(this.Ff,13):this.Ff=xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,21)},set:function(t){t?this.Ff=An(this.Ff,21):this.Ff=xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(t){t?this.Ff=An(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,24)},set:function(t){t?this.Ff=An(this.Ff,24):this.Ff=xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,25)},set:function(t){t?this.Ff=An(this.Ff,25):this.Ff=xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(t){t?this.Ff=An(this.Ff,26):this.Ff=xn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Di(jo,Ir);var eu=function(){jo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,14)},set:function(n){n?this.Ff=An(this.Ff,14):this.Ff=xn(this.Ff,14)}}),this.password=!0};Di(eu,jo);var Kt={CheckBox:{createAppearanceStream:function(){return{N:{On:Kt.CheckBox.YesNormal},D:{On:Kt.CheckBox.YesPushDown,Off:Kt.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=Bp(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+ge(Kt.internal.getWidth(n))+" "+ge(Kt.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+ge(s.fontSize)+" Tf "+r),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=zr(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],s=Kt.internal.getHeight(n),o=Kt.internal.getWidth(n),a=Bp(n,n.caption);return r.push("1 g"),r.push("0 0 "+ge(o)+" "+ge(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+ge(o-1)+" "+ge(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+e+" "+ge(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ge(Kt.internal.getWidth(n))+" "+ge(Kt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:Kt.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=Kt.RadioButton.Circle.YesNormal,t.D[n]=Kt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=zr(n);t.scope=n.scope;var e=[],i=Kt.internal.getWidth(n)<=Kt.internal.getHeight(n)?Kt.internal.getWidth(n)/4:Kt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Kt.internal.Bezier_C,s=Number((i*r).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+bo(Kt.internal.getWidth(n)/2)+" "+bo(Kt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=[],i=Kt.internal.getWidth(n)<=Kt.internal.getHeight(n)?Kt.internal.getWidth(n)/4:Kt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Kt.internal.Bezier_C).toFixed(5)),o=Number((i*Kt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bo(Kt.internal.getWidth(n)/2)+" "+bo(Kt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+bo(Kt.internal.getWidth(n)/2)+" "+bo(Kt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=[],i=Kt.internal.getWidth(n)<=Kt.internal.getHeight(n)?Kt.internal.getWidth(n)/4:Kt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Kt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bo(Kt.internal.getWidth(n)/2)+" "+bo(Kt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:Kt.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=Kt.RadioButton.Cross.YesNormal,t.D[n]=Kt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=zr(n);t.scope=n.scope;var e=[],i=Kt.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+ge(Kt.internal.getWidth(n)-2)+" "+ge(Kt.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(ge(i.x1.x)+" "+ge(i.x1.y)+" m"),e.push(ge(i.x2.x)+" "+ge(i.x2.y)+" l"),e.push(ge(i.x4.x)+" "+ge(i.x4.y)+" m"),e.push(ge(i.x3.x)+" "+ge(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=Kt.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+ge(Kt.internal.getWidth(n))+" "+ge(Kt.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+ge(Kt.internal.getWidth(n)-2)+" "+ge(Kt.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(ge(e.x1.x)+" "+ge(e.x1.y)+" m"),i.push(ge(e.x2.x)+" "+ge(e.x2.y)+" l"),i.push(ge(e.x4.x)+" "+ge(e.x4.y)+" m"),i.push(ge(e.x3.x)+" "+ge(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=zr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ge(Kt.internal.getWidth(n))+" "+ge(Kt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};Kt.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=Kt.internal.getWidth(n),e=Kt.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},Kt.internal.getWidth=function(n){var t=0;return ze(n)==="object"&&(t=A1(n.Rect[2])),t},Kt.internal.getHeight=function(n){var t=0;return ze(n)==="object"&&(t=A1(n.Rect[3])),t};var cP=pn.addField=function(n){if(lP(this,n),!(n instanceof Ir))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};pn.AcroFormChoiceField=Ra,pn.AcroFormListBox=Da,pn.AcroFormComboBox=Ma,pn.AcroFormEditBox=Jc,pn.AcroFormButton=Dn,pn.AcroFormPushButton=Zc,pn.AcroFormRadioButton=Oa,pn.AcroFormCheckBox=tu,pn.AcroFormTextField=jo,pn.AcroFormPasswordField=eu,pn.AcroFormAppearance=Kt,pn.AcroForm={ChoiceField:Ra,ListBox:Da,ComboBox:Ma,EditBox:Jc,Button:Dn,PushButton:Zc,RadioButton:Oa,CheckBox:tu,TextField:jo,PasswordField:eu,Appearance:Kt},ie.AcroForm={ChoiceField:Ra,ListBox:Da,ComboBox:Ma,EditBox:Jc,Button:Dn,PushButton:Zc,RadioButton:Oa,CheckBox:tu,TextField:jo,PasswordField:eu,Appearance:Kt};var uP=ie.AcroForm;function M5(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(E,I){var R,G,ot,Y,K,et=t;if((I=I||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(W(E))for(K in e)for(ot=e[K],R=0;R<ot.length;R+=1){for(Y=!0,G=0;G<ot[R].length;G+=1)if(ot[R][G]!==void 0&&ot[R][G]!==E[G]){Y=!1;break}if(Y===!0){et=K;break}}else for(K in e)for(ot=e[K],R=0;R<ot.length;R+=1){for(Y=!0,G=0;G<ot[R].length;G+=1)if(ot[R][G]!==void 0&&ot[R][G]!==E.charCodeAt(G)){Y=!1;break}if(Y===!0){et=K;break}}return et===t&&I!==t&&(et=I),et},r=function E(I){for(var R=this.internal.write,G=this.internal.putStream,ot=(0,this.internal.getFilters)();ot.indexOf("FlateEncode")!==-1;)ot.splice(ot.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:I.width}),Y.push({key:"Height",value:I.height}),I.colorSpace===S.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===S.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var K="",et=0,J=I.transparency.length;et<J;et++)K+=I.transparency[et]+" "+I.transparency[et]+" ";Y.push({key:"Mask",value:"["+K+"]"})}I.sMask!==void 0&&Y.push({key:"SMask",value:I.objectId+1+" 0 R"});var ct=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:Y,alreadyAppliedFilters:ct,objectId:I.objectId}),R("endobj"),"sMask"in I&&I.sMask!==void 0){var _t="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,M={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:_t,data:I.sMask};"filter"in I&&(M.filter=I.filter),E.call(this,M)}if(I.colorSpace===S.INDEXED){var H=this.internal.newObject();G({data:A(new Uint8Array(I.palette)),objectId:H}),R("endobj")}},s=function(){var E=this.internal.collections.addImage_images;for(var I in E)r.call(this,E[I])},o=function(){var E,I=this.internal.collections.addImage_images,R=this.internal.write;for(var G in I)R("/I"+(E=I[G]).index,E.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var E=this.internal.collections.addImage_images;return a.call(this),E},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(E){return typeof n["process"+E.toUpperCase()]=="function"},f=function(E){return ze(E)==="object"&&E.nodeType===1},m=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var R=""+E.getAttribute("src");if(R.indexOf("data:image/")===0)return Qc(unescape(R).split("base64,").pop());var G=n.loadFile(R,!0);if(G!==void 0)return G}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var ot;switch(I){case"PNG":ot="image/png";break;case"WEBP":ot="image/webp";break;case"JPEG":case"JPG":default:ot="image/jpeg"}return Qc(E.toDataURL(ot,1).split("base64,").pop())}},p=function(E){var I=this.internal.collections.addImage_images;if(I){for(var R in I)if(E===I[R].alias)return I[R]}},v=function(E,I,R){return E||I||(E=-96,I=-96),E<0&&(E=-1*R.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*R.height*72/I/this.internal.scaleFactor),E===0&&(E=I*R.width/R.height),I===0&&(I=E*R.height/R.width),[E,I]},_=function(E,I,R,G,ot,Y){var K=v.call(this,R,G,ot),et=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,ct=l.call(this);if(R=K[0],G=K[1],ct[ot.index]=ot,Y){Y*=Math.PI/180;var _t=Math.cos(Y),M=Math.sin(Y),H=function(tt){return tt.toFixed(4)},X=[H(_t),H(M),H(-1*M),H(_t),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,et(E),J(I+G),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([et(R),"0","0",et(G),"0","0","cm"].join(" "))):this.internal.write([et(R),"0","0",et(G),et(E),J(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ot.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=n.__addimage__.sHashCode=function(E){var I,R,G=0;if(typeof E=="string")for(R=E.length,I=0;I<R;I++)G=(G<<5)-G+E.charCodeAt(I),G|=0;else if(W(E))for(R=E.byteLength/2,I=0;I<R;I++)G=(G<<5)-G+E[I],G|=0;return G},N=n.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},O=n.__addimage__.extractImageFromDataUrl=function(E){var I=(E=E||"").split("base64,"),R=null;if(I.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(G)&&(R={mimeType:G[1],charset:G[2],data:I[1]})}return R},B=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};n.__addimage__.isArrayBuffer=function(E){return B()&&E instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(E){return B()&&typeof Uint32Array!="undefined"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},P=n.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,R=new Uint8Array(I),G=0;G<I;G++)R[G]=E.charCodeAt(G);return R},A=n.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",R=W(E)?E:new Uint8Array(E),G=0;G<R.length;G+=8192)I+=String.fromCharCode.apply(null,R.subarray(G,G+8192));return I};n.addImage=function(){var E,I,R,G,ot,Y,K,et,J;if(typeof arguments[1]=="number"?(I=t,R=arguments[1],G=arguments[2],ot=arguments[3],Y=arguments[4],K=arguments[5],et=arguments[6],J=arguments[7]):(I=arguments[1],R=arguments[2],G=arguments[3],ot=arguments[4],Y=arguments[5],K=arguments[6],et=arguments[7],J=arguments[8]),ze(E=arguments[0])==="object"&&!f(E)&&"imageData"in E){var ct=E;E=ct.imageData,I=ct.format||I||t,R=ct.x||R||0,G=ct.y||G||0,ot=ct.w||ct.width||ot,Y=ct.h||ct.height||Y,K=ct.alias||K,et=ct.compression||et,J=ct.rotation||ct.angle||J}var _t=this.internal.getFilters();if(et===void 0&&_t.indexOf("FlateEncode")!==-1&&(et="SLOW"),isNaN(R)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=C.call(this,E,I,K,et);return _.call(this,R,G,ot,Y,M,J),this};var C=function(E,I,R,G){var ot,Y,K;if(typeof E=="string"&&i(E)===t){E=unescape(E);var et=D(E,!1);(et!==""||(et=n.loadFile(E,!0))!==void 0)&&(E=et)}if(f(E)&&(E=m(E,I)),I=i(E,I),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((K=R)==null||K.length===0)&&(R=function(J){return typeof J=="string"||W(J)?T(J):W(J.data)?T(J.data):null}(E)),(ot=p.call(this,R))||(B()&&(E instanceof Uint8Array||I==="RGBA"||(Y=E,E=P(E))),ot=this["process"+I.toUpperCase()](E,c.call(this),R,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in n.image_compression?J:x.NONE}(G),Y)),!ot)throw new Error("An unknown error occurred whilst processing the image.");return ot},D=n.__addimage__.convertBase64ToBinaryString=function(E,I){var R;I=typeof I!="boolean"||I;var G,ot="";if(typeof E=="string"){G=(R=O(E))!==null?R.data:E;try{ot=Qc(G)}catch(Y){if(I)throw N(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ot};n.getImageProperties=function(E){var I,R,G="";if(f(E)&&(E=m(E)),typeof E=="string"&&i(E)===t&&((G=D(E,!1))===""&&(G=n.loadFile(E)||""),E=G),R=i(E),!h(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!B()||E instanceof Uint8Array||(E=P(E)),!(I=this["process"+R.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=R,I}})(ie.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};ie.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,r,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,h=!1,f=0;f<c.length&&!h;f++)switch((i=c[f]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){i=c[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(_.objId),T=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+p(x(i.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(x(T))+") >>",_.content=s;var N=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+N,i.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(_.objId,"0 R",S.objId,"0 R");break;case"freetext":r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var O=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+p(v(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var B=this.annotations._nameMap[i.options.name];i.options.pageNumber=B.page,i.options.top=B.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var W=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+W+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,r,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(e),y:c(i),w:l(e+r),h:c(i+s)},options:o,type:"link"})},n.textWithLink=function(e,i,r,s){var o,a,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(e,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(e,i,r,s),r+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-c,a,o,s),l},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(ie.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},a=n.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&s(_)&&t[_.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&r.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&s(_)&&t[_.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&s(_)&&t[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&s(_)&&t[_.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&s(_)&&t[_.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(_){var S=0,x=e,T="",N=0;for(S=0;S<_.length;S+=1)x[_.charCodeAt(S)]!==void 0?(N++,typeof(x=x[_.charCodeAt(S)])=="number"&&(T+=String.fromCharCode(x),x=e,N=0),S===_.length-1&&(x=e,T+=_.charAt(S-(N-1)),S-=N-1,N=0)):(x=e,T+=_.charAt(S-N),S-=N,N=0);return T};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&i[_.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(_,S,x){return o(_)?s(_)===!1?-1:!c(_)||!o(S)&&!o(x)||!o(x)&&a(S)||a(_)&&!o(S)||a(_)&&l(S)||a(_)&&a(S)?0:h(_)&&o(S)&&!a(S)&&o(x)&&c(x)?3:a(_)||!o(x)?1:2:-1},p=function(_){var S=0,x=0,T=0,N="",O="",B="",W=(_=_||"").split("\\s+"),P=[];for(S=0;S<W.length;S+=1){for(P.push(""),x=0;x<W[S].length;x+=1)N=W[S][x],O=W[S][x-1],B=W[S][x+1],o(N)?(T=m(N,O,B),P[S]+=T!==-1?String.fromCharCode(t[N.charCodeAt(0)][T]):N):P[S]+=N;P[S]=f(P[S])}return P.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var _,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(S)){var T=0;for(x=[],T=0;T<S.length;T+=1)Array.isArray(S[T])?x.push([p(S[T][0]),S[T][1],S[T][2]]):x.push([p(S[T])]);_=x}else _=p(S);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",v])}(ie.API),ie.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var r;if((e=e||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ie.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(_){h=_}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(_){v=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,p=0,v=0,_=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,O){return N.concat(S.splitTextToSize(O,x))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)p<(_=this.getStringUnitWidth(l[T],{font:f})*h)&&(p=_);return p!==0&&(v=l.length),{w:p/=m,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,h,f,m){if(i.call(this),!h)throw new Error("No data for PDF table.");var p,v,_,S,x=[],T=[],N=[],O={},B={},W=[],P=[],A=(m=m||{}).autoSize||!1,C=m.printHeaders!==!1,D=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,E=m.margins||Object.assign({width:this.getPageWidth()},t),I=typeof m.padding=="number"?m.padding:3,R=m.headerBackgroundColor||"#c8c8c8",G=m.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=G,this.setFontSize(D),f==null)T=x=Object.keys(h[0]),N=x.map(function(){return"left"});else if(Array.isArray(f)&&ze(f[0])==="object")for(x=f.map(function(ct){return ct.name}),T=f.map(function(ct){return ct.prompt||ct.name||""}),N=f.map(function(ct){return ct.align||"left"}),p=0;p<f.length;p+=1)B[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(T=x=f,N=x.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<x.length;p+=1){for(O[S=x[p]]=h.map(function(ct){return ct[S]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(T[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=O[S],this.setFont(void 0,"normal"),_=0;_<v.length;_+=1)W.push(this.getTextDimensions(v[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[S]=Math.max.apply(null,W)+I+I,W=[]}if(C){var ot={};for(p=0;p<x.length;p+=1)ot[x[p]]={},ot[x[p]].text=T[p],ot[x[p]].align=N[p];var Y=a.call(this,ot,B);P=x.map(function(ct){return new s(l,c,B[ct],Y,ot[ct].text,void 0,ot[ct].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var K=f.reduce(function(ct,_t){return ct[_t.name]=_t.align,ct},{});for(p=0;p<h.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:h[p]},this);var et=a.call(this,h[p],B);for(_=0;_<x.length;_+=1){var J=h[p][x[_]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:_,data:J},this),o.call(this,new s(l,c,B[x[_]],et,J,p+2,K[x[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var v=l[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/m+h+h},this).reduce(function(p,v){return Math.max(p,v)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),e=!1}}(ie.API);var O5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},F5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],jp=M5(F5),V5=[100,200,300,400,500,600,700,800,900],hP=M5(V5);function Up(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return O5[s=s||"normal"]?s:"normal"}(n.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(s){return typeof jp[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:t,style:[r,e,i].join(" ")}}}function x1(n,t,e,i){var r;for(r=e;r>=0&&r<t.length;r+=i)if(n[t[r]])return n[t[r]];for(r=e;r>=0&&r<t.length;r-=i)if(n[t[r]])return n[t[r]]}var dP={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},S1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function fP(n,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",r=Object.assign({},dP,e.genericFontFamilies||{}),s=null,o=null,a=0;a<t.length;++a)if(r[(s=Up(t[a])).family]&&(s.family=r[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[i]))throw new Error("Could not find a font-family for the rule '"+E1(s)+"' and default family '"+i+"'.");if(o=function(l,c){if(c[l])return c[l];var h=jp[l],f=h<=jp.normal?-1:1,m=x1(c,F5,h,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=O5[l],f=0;f<h.length;++f)if(c[h[f]])return c[h[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=hP[l],f=x1(c,V5,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+E1(s)+"'.");return o}function I1(n){return n.trimLeft()}function pP(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function gP(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Sh,P1,T1,qf=["times"];(function(n){var t,e,i,r,s,o,a,l,c,h=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var f=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=M;Object.defineProperty(this,"pdf",{get:function(){return H}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(xt){X=!!xt}});var tt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return tt},set:function(xt){tt=!!xt}});var it=0;Object.defineProperty(this,"posX",{get:function(){return it},set:function(xt){isNaN(xt)||(it=xt)}});var pt=0;Object.defineProperty(this,"posY",{get:function(){return pt},set:function(xt){isNaN(xt)||(pt=xt)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(xt){var rt;typeof xt=="number"?rt=[xt,xt,xt,xt]:((rt=new Array(4))[0]=xt[0],rt[1]=xt.length>=2?xt[1]:rt[0],rt[2]=xt.length>=3?xt[2]:rt[0],rt[3]=xt.length>=4?xt[3]:rt[1]),c.margin=rt}});var gt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return gt},set:function(xt){gt=xt}});var bt=0;Object.defineProperty(this,"lastBreak",{get:function(){return bt},set:function(xt){bt=xt}});var Nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Nt},set:function(xt){Nt=xt}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(xt){xt instanceof h&&(c=xt)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(xt){c.path=xt}});var kt=[];Object.defineProperty(this,"ctxStack",{get:function(){return kt},set:function(xt){kt=xt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xt){var rt;rt=m(xt),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xt){var rt=m(xt);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xt){["butt","round","square"].indexOf(xt)!==-1&&(this.ctx.lineCap=xt,this.pdf.setLineCap(xt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xt){isNaN(xt)||(this.ctx.lineWidth=xt,this.pdf.setLineWidth(xt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xt){["bevel","round","miter"].indexOf(xt)!==-1&&(this.ctx.lineJoin=xt,this.pdf.setLineJoin(xt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xt){isNaN(xt)||(this.ctx.miterLimit=xt,this.pdf.setMiterLimit(xt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xt){this.ctx.textBaseline=xt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xt){["right","end","center","left","start"].indexOf(xt)!==-1&&(this.ctx.textAlign=xt)}});var Ot=null;function Vt(xt,rt){if(Ot===null){var he=function(Yt){var Dt=[];return Object.keys(Yt).forEach(function(Mt){Yt[Mt].forEach(function(qt){var Ut=null;switch(qt){case"bold":Ut={family:Mt,weight:"bold"};break;case"italic":Ut={family:Mt,style:"italic"};break;case"bolditalic":Ut={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":Ut={family:Mt}}Ut!==null&&(Ut.ref={name:Mt,style:qt},Dt.push(Ut))})}),Dt}(xt.getFontList());Ot=function(Yt){for(var Dt={},Mt=0;Mt<Yt.length;++Mt){var qt=Up(Yt[Mt]),Ut=qt.family,Qt=qt.stretch,ae=qt.style,de=qt.weight;Dt[Ut]=Dt[Ut]||{},Dt[Ut][Qt]=Dt[Ut][Qt]||{},Dt[Ut][Qt][ae]=Dt[Ut][Qt][ae]||{},Dt[Ut][Qt][ae][de]=qt}return Dt}(he.concat(rt))}return Ot}var te=null;Object.defineProperty(this,"fontFaces",{get:function(){return te},set:function(xt){Ot=null,te=xt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xt){var rt;if(this.ctx.font=xt,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xt))!==null){var he=rt[1],Yt=(rt[2],rt[3]),Dt=rt[4],Mt=(rt[5],rt[6]),qt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Dt)[2];Dt=Math.floor(qt==="px"?parseFloat(Dt)*this.pdf.internal.scaleFactor:qt==="em"?parseFloat(Dt)*this.pdf.getFontSize():parseFloat(Dt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Dt);var Ut=function(re){var _e,Ht,un=[],Ie=re.trim();if(Ie==="")return qf;if(Ie in S1)return[S1[Ie]];for(;Ie!=="";){switch(Ht=null,_e=(Ie=I1(Ie)).charAt(0)){case'"':case"'":Ht=pP(Ie.substring(1),_e);break;default:Ht=gP(Ie)}if(Ht===null||(un.push(Ht[0]),(Ie=I1(Ht[1]))!==""&&Ie.charAt(0)!==","))return qf;Ie=Ie.replace(/^,/,"")}return un}(Mt);if(this.fontFaces){var Qt=fP(Vt(this.pdf,this.fontFaces),Ut.map(function(re){return{family:re,stretch:"normal",weight:Yt,style:he}}));this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var ae="";(Yt==="bold"||parseInt(Yt,10)>=700||he==="bold")&&(ae="bold"),he==="italic"&&(ae+="italic"),ae.length===0&&(ae="normal");for(var de="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},se=0;se<Ut.length;se++){if(this.pdf.internal.getFont(Ut[se],ae,{noFallback:!0,disableWarning:!0})!==void 0){de=Ut[se];break}if(ae==="bolditalic"&&this.pdf.internal.getFont(Ut[se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)de=Ut[se],ae="bold";else if(this.pdf.internal.getFont(Ut[se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){de=Ut[se],ae="normal";break}}if(de===""){for(var Ce=0;Ce<Ut.length;Ce++)if(Jt[Ut[Ce]]){de=Jt[Ut[Ce]];break}}de=de===""?"Times":de,this.pdf.setFont(de,ae)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xt){this.ctx.globalCompositeOperation=xt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xt){this.ctx.globalAlpha=xt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xt){this.ctx.lineDashOffset=xt,_t.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xt){this.ctx.lineDash=xt,_t.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xt){this.ctx.ignoreClearRect=!!xt}})};f.prototype.setLineDash=function(M){this.lineDash=M},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){O.call(this,"fill",!1)},f.prototype.stroke=function(){O.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(M,H){if(isNaN(M)||isNaN(H))throw Ge.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(M,H));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(M,H)},f.prototype.closePath=function(){var M=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&ze(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){M=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.lineTo=function(M,H){if(isNaN(M)||isNaN(H))throw Ge.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(M,H));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},f.prototype.quadraticCurveTo=function(M,H,X,tt){if(isNaN(X)||isNaN(tt)||isNaN(M)||isNaN(H))throw Ge.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var it=this.ctx.transform.applyToPoint(new o(X,tt)),pt=this.ctx.transform.applyToPoint(new o(M,H));this.path.push({type:"qct",x1:pt.x,y1:pt.y,x:it.x,y:it.y}),this.ctx.lastPoint=new o(it.x,it.y)},f.prototype.bezierCurveTo=function(M,H,X,tt,it,pt){if(isNaN(it)||isNaN(pt)||isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt))throw Ge.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var gt=this.ctx.transform.applyToPoint(new o(it,pt)),bt=this.ctx.transform.applyToPoint(new o(M,H)),Nt=this.ctx.transform.applyToPoint(new o(X,tt));this.path.push({type:"bct",x1:bt.x,y1:bt.y,x2:Nt.x,y2:Nt.y,x:gt.x,y:gt.y}),this.ctx.lastPoint=new o(gt.x,gt.y)},f.prototype.arc=function(M,H,X,tt,it,pt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt)||isNaN(it))throw Ge.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pt=!!pt,!this.ctx.transform.isIdentity){var gt=this.ctx.transform.applyToPoint(new o(M,H));M=gt.x,H=gt.y;var bt=this.ctx.transform.applyToPoint(new o(0,X)),Nt=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(bt.x-Nt.x,2)+Math.pow(bt.y-Nt.y,2))}Math.abs(it-tt)>=2*Math.PI&&(tt=0,it=2*Math.PI),this.path.push({type:"arc",x:M,y:H,radius:X,startAngle:tt,endAngle:it,counterclockwise:pt})},f.prototype.arcTo=function(M,H,X,tt,it){throw new Error("arcTo not implemented.")},f.prototype.rect=function(M,H,X,tt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt))throw Ge.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,H),this.lineTo(M+X,H),this.lineTo(M+X,H+tt),this.lineTo(M,H+tt),this.lineTo(M,H),this.lineTo(M+X,H),this.lineTo(M,H)},f.prototype.fillRect=function(M,H,X,tt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt))throw Ge.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var it={};this.lineCap!=="butt"&&(it.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(it.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,H,X,tt),this.fill(),it.hasOwnProperty("lineCap")&&(this.lineCap=it.lineCap),it.hasOwnProperty("lineJoin")&&(this.lineJoin=it.lineJoin)}},f.prototype.strokeRect=function(M,H,X,tt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt))throw Ge.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,H,X,tt),this.stroke())},f.prototype.clearRect=function(M,H,X,tt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt))throw Ge.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,H,X,tt))},f.prototype.save=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var tt=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=tt}},f.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(H),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var H,X,tt,it;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))H=0,X=0,tt=0,it=0;else{var pt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(pt!==null)H=parseInt(pt[1]),X=parseInt(pt[2]),tt=parseInt(pt[3]),it=1;else if((pt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)H=parseInt(pt[1]),X=parseInt(pt[2]),tt=parseInt(pt[3]),it=parseFloat(pt[4]);else{if(it=1,typeof M=="string"&&M.charAt(0)!=="#"){var gt=new L5(M);M=gt.ok?gt.toHex():"#000000"}M.length===4?(H=M.substring(1,2),H+=H,X=M.substring(2,3),X+=X,tt=M.substring(3,4),tt+=tt):(H=M.substring(1,3),X=M.substring(3,5),tt=M.substring(5,7)),H=parseInt(H,16),X=parseInt(X,16),tt=parseInt(tt,16)}}return{r:H,g:X,b:tt,a:it,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(M,H,X,tt){if(isNaN(H)||isNaN(X)||typeof M!="string")throw Ge.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(tt=isNaN(tt)?void 0:tt,!p.call(this)){var it=et(this.ctx.transform.rotation),pt=this.ctx.transform.scaleX;I.call(this,{text:M,x:H,y:X,scale:pt,angle:it,align:this.textAlign,maxWidth:tt})}},f.prototype.strokeText=function(M,H,X,tt){if(isNaN(H)||isNaN(X)||typeof M!="string")throw Ge.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){tt=isNaN(tt)?void 0:tt;var it=et(this.ctx.transform.rotation),pt=this.ctx.transform.scaleX;I.call(this,{text:M,x:H,y:X,scale:pt,renderingMode:"stroke",angle:it,align:this.textAlign,maxWidth:tt})}},f.prototype.measureText=function(M){if(typeof M!="string")throw Ge.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,X=this.pdf.internal.scaleFactor,tt=H.internal.getFontSize(),it=H.getStringUnitWidth(M)*tt/H.internal.scaleFactor,pt=function(gt){var bt=(gt=gt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return bt}}),this};return new pt({width:it*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(M,H){if(isNaN(M)||isNaN(H))throw Ge.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(M,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(M){if(isNaN(M))throw Ge.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.translate=function(M,H){if(isNaN(M)||isNaN(H))throw Ge.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,M,H);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(M,H,X,tt,it,pt){if(isNaN(M)||isNaN(H)||isNaN(X)||isNaN(tt)||isNaN(it)||isNaN(pt))throw Ge.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var gt=new l(M,H,X,tt,it,pt);this.ctx.transform=this.ctx.transform.multiply(gt)},f.prototype.setTransform=function(M,H,X,tt,it,pt){M=isNaN(M)?1:M,H=isNaN(H)?0:H,X=isNaN(X)?0:X,tt=isNaN(tt)?1:tt,it=isNaN(it)?0:it,pt=isNaN(pt)?0:pt,this.ctx.transform=new l(M,H,X,tt,it,pt)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(M,H,X,tt,it,pt,gt,bt,Nt){var kt=this.pdf.getImageProperties(M),Ot=1,Vt=1,te=1,xt=1;tt!==void 0&&bt!==void 0&&(te=bt/tt,xt=Nt/it,Ot=kt.width/tt*bt/tt,Vt=kt.height/it*Nt/it),pt===void 0&&(pt=H,gt=X,H=0,X=0),tt!==void 0&&bt===void 0&&(bt=tt,Nt=it),tt===void 0&&bt===void 0&&(bt=kt.width,Nt=kt.height);for(var rt,he=this.ctx.transform.decompose(),Yt=et(he.rotate.shx),Dt=new l,Mt=(Dt=(Dt=(Dt=Dt.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new a(pt-H*te,gt-X*xt,tt*Ot,it*Vt)),qt=S.call(this,Mt),Ut=[],Qt=0;Qt<qt.length;Qt+=1)Ut.indexOf(qt[Qt])===-1&&Ut.push(qt[Qt]);if(N(Ut),this.autoPaging)for(var ae=Ut[0],de=Ut[Ut.length-1],Jt=ae;Jt<de+1;Jt++){this.pdf.setPage(Jt);var se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ce=Jt===1?this.posY+this.margin[0]:this.margin[0],re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ht=Jt===1?0:re+(Jt-2)*_e;if(this.ctx.clip_path.length!==0){var un=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(rt,this.posX+this.margin[3],-Ht+Ce+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=un}var Ie=JSON.parse(JSON.stringify(Mt));Ie=T([Ie],this.posX+this.margin[3],-Ht+Ce+this.ctx.prevPageLastElemOffset)[0];var wi=(Jt>ae||Jt<de)&&_.call(this);wi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],se,_e,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,Yt),wi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,Yt)};var S=function(M,H,X){var tt=[];H=H||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var it=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":tt.push(Math.floor((M.y+it)/X)+1);break;case"arc":tt.push(Math.floor((M.y+it-M.radius)/X)+1),tt.push(Math.floor((M.y+it+M.radius)/X)+1);break;case"qct":var pt=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);tt.push(Math.floor((pt.y+it)/X)+1),tt.push(Math.floor((pt.y+pt.h+it)/X)+1);break;case"bct":var gt=ct(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);tt.push(Math.floor((gt.y+it)/X)+1),tt.push(Math.floor((gt.y+gt.h+it)/X)+1);break;case"rect":tt.push(Math.floor((M.y+it)/X)+1),tt.push(Math.floor((M.y+M.h+it)/X)+1)}for(var bt=0;bt<tt.length;bt+=1)for(;this.pdf.internal.getNumberOfPages()<tt[bt];)x.call(this);return tt},x=function(){var M=this.fillStyle,H=this.strokeStyle,X=this.font,tt=this.lineCap,it=this.lineWidth,pt=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=H,this.font=X,this.lineCap=tt,this.lineWidth=it,this.lineJoin=pt},T=function(M,H,X){for(var tt=0;tt<M.length;tt++)switch(M[tt].type){case"bct":M[tt].x2+=H,M[tt].y2+=X;case"qct":M[tt].x1+=H,M[tt].y1+=X;case"mt":case"lt":case"arc":default:M[tt].x+=H,M[tt].y+=X}return M},N=function(M){return M.sort(function(H,X){return H-X})},O=function(M,H){for(var X,tt,it=this.fillStyle,pt=this.strokeStyle,gt=this.lineCap,bt=this.lineWidth,Nt=Math.abs(bt*this.ctx.transform.scaleX),kt=this.lineJoin,Ot=JSON.parse(JSON.stringify(this.path)),Vt=JSON.parse(JSON.stringify(this.path)),te=[],xt=0;xt<Vt.length;xt++)if(Vt[xt].x!==void 0)for(var rt=S.call(this,Vt[xt]),he=0;he<rt.length;he+=1)te.indexOf(rt[he])===-1&&te.push(rt[he]);for(var Yt=0;Yt<te.length;Yt++)for(;this.pdf.internal.getNumberOfPages()<te[Yt];)x.call(this);if(N(te),this.autoPaging)for(var Dt=te[0],Mt=te[te.length-1],qt=Dt;qt<Mt+1;qt++){this.pdf.setPage(qt),this.fillStyle=it,this.strokeStyle=pt,this.lineCap=gt,this.lineWidth=Nt,this.lineJoin=kt;var Ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qt=qt===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=qt===1?0:ae+(qt-2)*de;if(this.ctx.clip_path.length!==0){var se=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(X,this.posX+this.margin[3],-Jt+Qt+this.ctx.prevPageLastElemOffset),B.call(this,M,!0),this.path=se}if(tt=JSON.parse(JSON.stringify(Ot)),this.path=T(tt,this.posX+this.margin[3],-Jt+Qt+this.ctx.prevPageLastElemOffset),H===!1||qt===0){var Ce=(qt>Dt||qt<Mt)&&_.call(this);Ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,de,null).clip().discardPath()),B.call(this,M,H),Ce&&this.pdf.restoreGraphicsState()}this.lineWidth=bt}else this.lineWidth=Nt,B.call(this,M,H),this.lineWidth=bt;this.path=Ot},B=function(M,H){if((M!=="stroke"||H||!v.call(this))&&(M==="stroke"||H||!p.call(this))){for(var X,tt,it=[],pt=this.path,gt=0;gt<pt.length;gt++){var bt=pt[gt];switch(bt.type){case"begin":it.push({begin:!0});break;case"close":it.push({close:!0});break;case"mt":it.push({start:bt,deltas:[],abs:[]});break;case"lt":var Nt=it.length;if(pt[gt-1]&&!isNaN(pt[gt-1].x)&&(X=[bt.x-pt[gt-1].x,bt.y-pt[gt-1].y],Nt>0)){for(;Nt>=0;Nt--)if(it[Nt-1].close!==!0&&it[Nt-1].begin!==!0){it[Nt-1].deltas.push(X),it[Nt-1].abs.push(bt);break}}break;case"bct":X=[bt.x1-pt[gt-1].x,bt.y1-pt[gt-1].y,bt.x2-pt[gt-1].x,bt.y2-pt[gt-1].y,bt.x-pt[gt-1].x,bt.y-pt[gt-1].y],it[it.length-1].deltas.push(X);break;case"qct":var kt=pt[gt-1].x+2/3*(bt.x1-pt[gt-1].x),Ot=pt[gt-1].y+2/3*(bt.y1-pt[gt-1].y),Vt=bt.x+2/3*(bt.x1-bt.x),te=bt.y+2/3*(bt.y1-bt.y),xt=bt.x,rt=bt.y;X=[kt-pt[gt-1].x,Ot-pt[gt-1].y,Vt-pt[gt-1].x,te-pt[gt-1].y,xt-pt[gt-1].x,rt-pt[gt-1].y],it[it.length-1].deltas.push(X);break;case"arc":it.push({deltas:[],abs:[],arc:!0}),Array.isArray(it[it.length-1].abs)&&it[it.length-1].abs.push(bt)}}tt=H?null:M==="stroke"?"stroke":"fill";for(var he=!1,Yt=0;Yt<it.length;Yt++)if(it[Yt].arc)for(var Dt=it[Yt].abs,Mt=0;Mt<Dt.length;Mt++){var qt=Dt[Mt];qt.type==="arc"?A.call(this,qt.x,qt.y,qt.radius,qt.startAngle,qt.endAngle,qt.counterclockwise,void 0,H,!he):R.call(this,qt.x,qt.y),he=!0}else if(it[Yt].close===!0)this.pdf.internal.out("h"),he=!1;else if(it[Yt].begin!==!0){var Ut=it[Yt].start.x,Qt=it[Yt].start.y;G.call(this,it[Yt].deltas,Ut,Qt),he=!0}tt&&C.call(this,tt),H&&D.call(this)}},W=function(M){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-X;case"top":return M+H-X;case"hanging":return M+H-2*X;case"middle":return M+H/2-X;case"ideographic":return M;case"alphabetic":default:return M}},P=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(H,X){this.colorStops.push([H,X])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(M,H,X,tt,it,pt,gt,bt,Nt){for(var kt=Y.call(this,X,tt,it,pt),Ot=0;Ot<kt.length;Ot++){var Vt=kt[Ot];Ot===0&&(Nt?E.call(this,Vt.x1+M,Vt.y1+H):R.call(this,Vt.x1+M,Vt.y1+H)),ot.call(this,M,H,Vt.x2,Vt.y2,Vt.x3,Vt.y3,Vt.x4,Vt.y4)}bt?D.call(this):C.call(this,gt)},C=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(M,H){this.pdf.internal.out(e(M)+" "+i(H)+" m")},I=function(M){var H;switch(M.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var X=this.pdf.getTextDimensions(M.text),tt=W.call(this,M.y),it=P.call(this,tt)-X.h,pt=this.ctx.transform.applyToPoint(new o(M.x,tt)),gt=this.ctx.transform.decompose(),bt=new l;bt=(bt=(bt=bt.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale);for(var Nt,kt,Ot,Vt=this.ctx.transform.applyToRectangle(new a(M.x,tt,X.w,X.h)),te=bt.applyToRectangle(new a(M.x,it,X.w,X.h)),xt=S.call(this,te),rt=[],he=0;he<xt.length;he+=1)rt.indexOf(xt[he])===-1&&rt.push(xt[he]);if(N(rt),this.autoPaging)for(var Yt=rt[0],Dt=rt[rt.length-1],Mt=Yt;Mt<Dt+1;Mt++){this.pdf.setPage(Mt);var qt=Mt===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[2],ae=Qt-this.margin[0],de=this.pdf.internal.pageSize.width-this.margin[1],Jt=de-this.margin[3],se=Mt===1?0:Ut+(Mt-2)*ae;if(this.ctx.clip_path.length!==0){var Ce=this.path;Nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Nt,this.posX+this.margin[3],-1*se+qt),B.call(this,"fill",!0),this.path=Ce}var re=T([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-se+qt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*M.scale),Ot=this.lineWidth,this.lineWidth=Ot*M.scale);var _e=this.autoPaging!=="text";if(_e||re.y+re.h<=Qt){if(_e||re.y>=qt&&re.x<=de){var Ht=_e?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||de-re.x)[0],un=T([JSON.parse(JSON.stringify(Vt))],this.posX+this.margin[3],-se+qt+this.ctx.prevPageLastElemOffset)[0],Ie=_e&&(Mt>Yt||Mt<Dt)&&_.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,ae,null).clip().discardPath()),this.pdf.text(Ht,un.x,un.y,{angle:M.angle,align:H,renderingMode:M.renderingMode}),Ie&&this.pdf.restoreGraphicsState()}}else re.y<Qt&&(this.ctx.prevPageLastElemOffset+=Qt-re.y);M.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=Ot)}else M.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*M.scale),Ot=this.lineWidth,this.lineWidth=Ot*M.scale),this.pdf.text(M.text,pt.x+this.posX,pt.y+this.posY,{angle:M.angle,align:H,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=Ot)},R=function(M,H,X,tt){X=X||0,tt=tt||0,this.pdf.internal.out(e(M+X)+" "+i(H+tt)+" l")},G=function(M,H,X){return this.pdf.lines(M,H,X,null,null)},ot=function(M,H,X,tt,it,pt,gt,bt){this.pdf.internal.out([t(r(X+M)),t(s(tt+H)),t(r(it+M)),t(s(pt+H)),t(r(gt+M)),t(s(bt+H)),"c"].join(" "))},Y=function(M,H,X,tt){for(var it=2*Math.PI,pt=Math.PI/2;H>X;)H-=it;var gt=Math.abs(X-H);gt<it&&tt&&(gt=it-gt);for(var bt=[],Nt=tt?-1:1,kt=H;gt>1e-5;){var Ot=kt+Nt*Math.min(gt,pt);bt.push(K.call(this,M,kt,Ot)),gt-=Math.abs(Ot-kt),kt=Ot}return bt},K=function(M,H,X){var tt=(X-H)/2,it=M*Math.cos(tt),pt=M*Math.sin(tt),gt=it,bt=-pt,Nt=gt*gt+bt*bt,kt=Nt+gt*it+bt*pt,Ot=4/3*(Math.sqrt(2*Nt*kt)-kt)/(gt*pt-bt*it),Vt=gt-Ot*bt,te=bt+Ot*gt,xt=Vt,rt=-te,he=tt+H,Yt=Math.cos(he),Dt=Math.sin(he);return{x1:M*Math.cos(H),y1:M*Math.sin(H),x2:Vt*Yt-te*Dt,y2:Vt*Dt+te*Yt,x3:xt*Yt-rt*Dt,y3:xt*Dt+rt*Yt,x4:M*Math.cos(X),y4:M*Math.sin(X)}},et=function(M){return 180*M/Math.PI},J=function(M,H,X,tt,it,pt){var gt=M+.5*(X-M),bt=H+.5*(tt-H),Nt=it+.5*(X-it),kt=pt+.5*(tt-pt),Ot=Math.min(M,it,gt,Nt),Vt=Math.max(M,it,gt,Nt),te=Math.min(H,pt,bt,kt),xt=Math.max(H,pt,bt,kt);return new a(Ot,te,Vt-Ot,xt-te)},ct=function(M,H,X,tt,it,pt,gt,bt){var Nt,kt,Ot,Vt,te,xt,rt,he,Yt,Dt,Mt,qt,Ut,Qt,ae=X-M,de=tt-H,Jt=it-X,se=pt-tt,Ce=gt-it,re=bt-pt;for(kt=0;kt<41;kt++)Yt=(rt=(Ot=M+(Nt=kt/40)*ae)+Nt*((te=X+Nt*Jt)-Ot))+Nt*(te+Nt*(it+Nt*Ce-te)-rt),Dt=(he=(Vt=H+Nt*de)+Nt*((xt=tt+Nt*se)-Vt))+Nt*(xt+Nt*(pt+Nt*re-xt)-he),kt==0?(Mt=Yt,qt=Dt,Ut=Yt,Qt=Dt):(Mt=Math.min(Mt,Yt),qt=Math.min(qt,Dt),Ut=Math.max(Ut,Yt),Qt=Math.max(Qt,Dt));return new a(Math.round(Mt),Math.round(qt),Math.round(Ut-Mt),Math.round(Qt-qt))},_t=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,H,X=(M=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:H}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(ie.API),function(n){var t=function(s){var o,a,l,c,h,f,m,p,v,_;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(_=h%85))/85)-(v=h%85))/85)-(p=h%85))/85)-(m=h%85))/85)%85,a.push(f+33,m+33,p+33,v+33,_+33)):a.push(122);return function(S,x){for(var T=x;T>0;T--)S.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},e=function(s){var o,a,l,c,h,f=String,m="length",p=255,v="charCodeAt",_="slice",S="replace";for(s[_](-2),s=s[_](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,h=(s+=o="uuuuu"[_](s[m]%5||5))[m];h>c;c+=5)a=52200625*(s[v](c)-33)+614125*(s[v](c+1)-33)+7225*(s[v](c+2)-33)+85*(s[v](c+3)-33)+(s[v](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(x,T){for(var N=T;N>0;N--)x.pop()}(l,o[m]),f.fromCharCode.apply(f,l)},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},r=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Mp(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ie.API),function(n){n.loadFile=function(t,e,i){return function(r,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var f=new XMLHttpRequest,m=0,p=function(v){var _=v.length,S=[],x=String.fromCharCode;for(m=0;m<_;m+=1)S.push(x(255&v.charCodeAt(m)));return S.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?h(p(this.responseText)):h(void 0)}),f.send(null),c&&f.status===200)return p(f.responseText)}(r,s,o)}catch(l){}return a}(t,e,i)},n.loadImageFile=n.loadFile}(ie.API),function(n){function t(){return(oe.html2canvas?Promise.resolve(oe.html2canvas):Cp(()=>import("./html2canvas.esm-CiaFdv3w.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(oe.DOMPurify?Promise.resolve(oe.DOMPurify):Cp(()=>import("./purify.es-BtiL3Rle.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=ze(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},r=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(l){return this.set({src:r("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(l(m,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var p=c[m],v=p.src.find(function(_){return _.format==="truetype"});v&&l.addFont(v.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),a(this.prop.container,f)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||ie.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,c),f}).then(c,h).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ie.getPageSize=function(o,a,l){if(ze(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var p,v=0,_=0;if(m.hasOwnProperty(f))v=m[f][1]/h,_=m[f][0]/h;else try{v=l[1],_=l[0]}catch(S){throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",_>v&&(p=_,_=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>_&&(p=_,_=v,v=p)}return{width:_,height:v,unit:a,k:h,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Up):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ie.API),ie.API.addJS=function(n){return T1=n,this.internal.events.subscribe("postPutResources",function(){Sh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Sh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),P1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+T1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Sh!==void 0&&P1!==void 0&&this.internal.out("/Names <</JavaScript "+Sh+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var o=r[s],a=i.exec(o);if(a!=null){var l=a[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var f=e.internal.newObject();h.push(f);var m=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<h.length;s++)e.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,r,s){var o={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var o=i.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}(ie.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,r,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(f){for(var m,p=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,_={width:0,height:0,numcomponents:1},S=4;S<v;S+=2){if(S+=p,t.indexOf(f.charCodeAt(S+1))!==-1){m=256*f.charCodeAt(S+5)+f.charCodeAt(S+6),_={width:256*f.charCodeAt(S+7)+f.charCodeAt(S+8),height:m,numcomponents:f.charCodeAt(S+9)};break}p=256*f.charCodeAt(S+2)+f.charCodeAt(S+3)}return _}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:e,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:r}}return h}}(ie.API);var Sl,Eh,L1,C1,k1,mP=function(){var n,t,e;function i(s){var o,a,l,c,h,f,m,p,v,_,S,x,T,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),v=(function(){var O,B;for(B=[],O=0;O<4;++O)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*h/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((_=l-this.transparency.indexed.length)>0)for(T=0;0<=_?T<_:T>_;0<=_?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(S=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,S.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,S.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(f,m,p,v){var _,S,x,T,N,O,B,W,P,A,C,D,E,I,R,G,ot,Y,K,et,J,ct=Math.ceil((c.width-f)/p),_t=Math.ceil((c.height-m)/v),M=c.width==ct&&c.height==_t;for(I=o*ct,D=M?a:new Uint8Array(I*_t),O=s.length,E=0,S=0;E<_t&&l<O;){switch(s[l++]){case 0:for(T=ot=0;ot<I;T=ot+=1)D[S++]=s[l++];break;case 1:for(T=Y=0;Y<I;T=Y+=1)_=s[l++],N=T<o?0:D[S-o],D[S++]=(_+N)%256;break;case 2:for(T=K=0;K<I;T=K+=1)_=s[l++],x=(T-T%o)/o,R=E&&D[(E-1)*I+x*o+T%o],D[S++]=(R+_)%256;break;case 3:for(T=et=0;et<I;T=et+=1)_=s[l++],x=(T-T%o)/o,N=T<o?0:D[S-o],R=E&&D[(E-1)*I+x*o+T%o],D[S++]=(_+Math.floor((N+R)/2))%256;break;case 4:for(T=J=0;J<I;T=J+=1)_=s[l++],x=(T-T%o)/o,N=T<o?0:D[S-o],E===0?R=G=0:(R=D[(E-1)*I+x*o+T%o],G=x&&D[(E-1)*I+(x-1)*o+T%o]),B=N+R-G,W=Math.abs(B-N),A=Math.abs(B-R),C=Math.abs(B-G),P=W<=A&&W<=C?N:A<=C?R:G,D[S++]=(_+P)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var H=((m+E*v)*c.width+f)*o,X=E*I;for(T=0;T<ct;T+=1){for(var tt=0;tt<o;tt+=1)a[H++]=D[X++];H+=(p-1)*o}}E++}}return s=GI(s),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},i.prototype.decodePalette=function(){var s,o,a,l,c,h,f,m,p;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=f=0,m=a.length;f<m;o=f+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=h[s++])!=null?p:255;return c},i.prototype.copyToImageData=function(s,o){var a,l,c,h,f,m,p,v,_,S,x;if(l=this.colors,_=null,a=this.hasAlphaChannel,this.palette.length&&(_=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(c=s.data||s).length,f=_||o,h=m=0,l===1)for(;h<v;)p=_?4*o[h/4]:m,S=f[p++],c[h++]=S,c[h++]=S,c[h++]=S,c[h++]=a?f[p++]:255,m=p;else for(;h<v;)p=_?4*o[h/4]:m,c[h++]=f[p++],c[h++]=f[p++],c[h++]=f[p++],c[h++]=a?f[p++]:255,m=p},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(oe)==="[object Window]"){try{t=oe.document.createElement("canvas"),e=t.getContext("2d")}catch(s){return!1}return!0}return!1};return r(),n=function(s){var o;if(r()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var o,a,l,c,h,f,m,p;if(this.animation){for(p=[],a=h=0,f=(m=this.animation.frames).length;h<f;a=++h)o=m[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=n(l));return p}},i.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var o,a,l,c,h,f,m=this;return a=0,f=this.animation,c=f.numFrames,l=f.frames,h=f.numPlays,(o=function(){var p,v;if(p=a++%c,v=l[p],m.renderFrame(s,p),c>1&&a/c<h)return m.animation._timeout=setTimeout(o,v.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function yP(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,r=n[t++],s=r>>7,o=1<<(7&r)+1;n[t++],n[t++];var a=null,l=null;s&&(a=t,l=o,t+=3*o);var c=!0,h=[],f=0,m=null,p=0,v=null;for(this.width=e,this.height=i;c&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,v=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[t++];f=n[t++]|n[t++]<<8,m=n[t++],!(1&_)&&(m=null),p=_>>2&7,t++;break;case 254:for(;;){if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var S=n[t++]|n[t++]<<8,x=n[t++]|n[t++]<<8,T=n[t++]|n[t++]<<8,N=n[t++]|n[t++]<<8,O=n[t++],B=O>>6&1,W=1<<(7&O)+1,P=a,A=l,C=!1;O>>7&&(C=!0,P=t,A=W,t+=3*W);var D=t;for(t++;;){var E;if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}h.push({x:S,y:x,width:T,height:N,has_local_palette:C,palette_offset:P,palette_size:A,data_offset:D,data_length:t-D,transparent_index:m,interlaced:!!B,delay:f,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(I){if(I<0||I>=h.length)throw new Error("Frame index out of range.");return h[I]},this.decodeAndBlitFrameBGRA=function(I,R){var G=this.frameInfo(I),ot=G.width*G.height,Y=new Uint8Array(ot);N1(n,G.data_offset,Y,ot);var K=G.palette_offset,et=G.transparent_index;et===null&&(et=256);var J=G.width,ct=e-J,_t=J,M=4*(G.y*e+G.x),H=4*((G.y+G.height)*e+G.x),X=M,tt=4*ct;G.interlaced===!0&&(tt+=4*e*7);for(var it=8,pt=0,gt=Y.length;pt<gt;++pt){var bt=Y[pt];if(_t===0&&(_t=J,(X+=tt)>=H&&(tt=4*ct+4*e*(it-1),X=M+(J+ct)*(it<<1),it>>=1)),bt===et)X+=4;else{var Nt=n[K+3*bt],kt=n[K+3*bt+1],Ot=n[K+3*bt+2];R[X++]=Ot,R[X++]=kt,R[X++]=Nt,R[X++]=255}--_t}},this.decodeAndBlitFrameRGBA=function(I,R){var G=this.frameInfo(I),ot=G.width*G.height,Y=new Uint8Array(ot);N1(n,G.data_offset,Y,ot);var K=G.palette_offset,et=G.transparent_index;et===null&&(et=256);var J=G.width,ct=e-J,_t=J,M=4*(G.y*e+G.x),H=4*((G.y+G.height)*e+G.x),X=M,tt=4*ct;G.interlaced===!0&&(tt+=4*e*7);for(var it=8,pt=0,gt=Y.length;pt<gt;++pt){var bt=Y[pt];if(_t===0&&(_t=J,(X+=tt)>=H&&(tt=4*ct+4*e*(it-1),X=M+(J+ct)*(it<<1),it>>=1)),bt===et)X+=4;else{var Nt=n[K+3*bt],kt=n[K+3*bt+1],Ot=n[K+3*bt+2];R[X++]=Nt,R[X++]=kt,R[X++]=Ot,R[X++]=255}--_t}}}function N1(n,t,e,i){for(var r=n[t++],s=1<<r,o=s+1,a=o+1,l=r+1,c=(1<<l)-1,h=0,f=0,m=0,p=n[t++],v=new Int32Array(4096),_=null;;){for(;h<16&&p!==0;)f|=n[t++]<<h,h+=8,p===1?p=n[t++]:--p;if(h<l)break;var S=f&c;if(f>>=l,h-=l,S!==s){if(S===o)break;for(var x=S<a?S:_,T=0,N=x;N>s;)N=v[N]>>8,++T;var O=N;if(m+T+(x!==S?1:0)>i)return void Ge.log("Warning, gif stream longer than expected.");e[m++]=O;var B=m+=T;for(x!==S&&(e[m++]=O),N=x;T--;)N=v[N],e[--B]=255&N,N>>=8;_!==null&&a<4096&&(v[a++]=_<<8|O,a>=c+1&&l<12&&(++l,c=c<<1|1)),_=S}else a=o+1,c=(1<<(l=r+1))-1,_=null}return m!==i&&Ge.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Hf(n){var t,e,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),f=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),_=[],S=0,x=7,T=new Array(64),N=new Array(64),O=new Array(64),B=new Array(256),W=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ot=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(M,H){for(var X=0,tt=0,it=new Array,pt=1;pt<=16;pt++){for(var gt=1;gt<=M[pt];gt++)it[H[tt]]=[],it[H[tt]][0]=X,it[H[tt]][1]=pt,tt++,X++;X*=2}return it}function K(M){for(var H=M[0],X=M[1]-1;X>=0;)H&1<<X&&(S|=1<<x),X--,--x<0&&(S==255?(et(255),et(0)):et(S),x=7,S=0)}function et(M){_.push(M)}function J(M){et(M>>8&255),et(255&M)}function ct(M,H,X,tt,it){for(var pt,gt=it[0],bt=it[240],Nt=function(Dt,Mt){var qt,Ut,Qt,ae,de,Jt,se,Ce,re,_e,Ht=0;for(re=0;re<8;++re){qt=Dt[Ht],Ut=Dt[Ht+1],Qt=Dt[Ht+2],ae=Dt[Ht+3],de=Dt[Ht+4],Jt=Dt[Ht+5],se=Dt[Ht+6];var un=qt+(Ce=Dt[Ht+7]),Ie=qt-Ce,wi=Ut+se,De=Ut-se,Ke=Qt+Jt,Ki=Qt-Jt,Te=ae+de,Tr=ae-de,Ze=un+Te,Un=un-Te,Mi=wi+Ke,Ye=wi-Ke;Dt[Ht]=Ze+Mi,Dt[Ht+4]=Ze-Mi;var ee=.707106781*(Ye+Un);Dt[Ht+2]=Un+ee,Dt[Ht+6]=Un-ee;var ke=.382683433*((Ze=Tr+Ki)-(Ye=De+Ie)),Yi=.5411961*Ze+ke,En=1.306562965*Ye+ke,Xn=.707106781*(Mi=Ki+De),Oi=Ie+Xn,$t=Ie-Xn;Dt[Ht+5]=$t+Yi,Dt[Ht+3]=$t-Yi,Dt[Ht+1]=Oi+En,Dt[Ht+7]=Oi-En,Ht+=8}for(Ht=0,re=0;re<8;++re){qt=Dt[Ht],Ut=Dt[Ht+8],Qt=Dt[Ht+16],ae=Dt[Ht+24],de=Dt[Ht+32],Jt=Dt[Ht+40],se=Dt[Ht+48];var Ai=qt+(Ce=Dt[Ht+56]),Qn=qt-Ce,In=Ut+se,mn=Ut-se,hn=Qt+Jt,Pn=Qt-Jt,js=ae+de,or=ae-de,Jn=Ai+js,xi=Ai-js,pi=In+hn,gi=In-hn;Dt[Ht]=Jn+pi,Dt[Ht+32]=Jn-pi;var yn=.707106781*(gi+xi);Dt[Ht+16]=xi+yn,Dt[Ht+48]=xi-yn;var Fi=.382683433*((Jn=or+Pn)-(gi=mn+Qn)),Lr=.5411961*Jn+Fi,Cr=1.306562965*gi+Fi,kr=.707106781*(pi=Pn+mn),is=Qn+kr,rs=Qn-kr;Dt[Ht+40]=rs+Lr,Dt[Ht+24]=rs-Lr,Dt[Ht+8]=is+Cr,Dt[Ht+56]=is-Cr,Ht++}for(re=0;re<64;++re)_e=Dt[re]*Mt[re],p[re]=_e>0?_e+.5|0:_e-.5|0;return p}(M,H),kt=0;kt<64;++kt)v[P[kt]]=Nt[kt];var Ot=v[0]-X;X=v[0],Ot==0?K(tt[0]):(K(tt[m[pt=32767+Ot]]),K(f[pt]));for(var Vt=63;Vt>0&&v[Vt]==0;)Vt--;if(Vt==0)return K(gt),X;for(var te,xt=1;xt<=Vt;){for(var rt=xt;v[xt]==0&&xt<=Vt;)++xt;var he=xt-rt;if(he>=16){te=he>>4;for(var Yt=1;Yt<=te;++Yt)K(bt);he&=15}pt=32767+v[xt],K(it[(he<<4)+m[pt]]),K(f[pt]),xt++}return Vt!=63&&K(gt),X}function _t(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(H){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],tt=0;tt<64;tt++){var it=o((X[tt]*H+50)/100);it=Math.min(Math.max(it,1),255),a[P[tt]]=it}for(var pt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],gt=0;gt<64;gt++){var bt=o((pt[gt]*H+50)/100);bt=Math.min(Math.max(bt,1),255),l[P[gt]]=bt}for(var Nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],kt=0,Ot=0;Ot<8;Ot++)for(var Vt=0;Vt<8;Vt++)c[kt]=1/(a[P[kt]]*Nt[Ot]*Nt[Vt]*8),h[kt]=1/(l[P[kt]]*Nt[Ot]*Nt[Vt]*8),kt++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,H){H&&_t(H),_=new Array,S=0,x=7,J(65496),J(65504),J(16),et(74),et(70),et(73),et(70),et(0),et(1),et(1),et(0),J(1),J(1),et(0),et(0),function(){J(65499),J(132),et(0);for(var Ut=0;Ut<64;Ut++)et(a[Ut]);et(1);for(var Qt=0;Qt<64;Qt++)et(l[Qt])}(),function(Ut,Qt){J(65472),J(17),et(8),J(Qt),J(Ut),et(3),et(1),et(17),et(0),et(2),et(17),et(1),et(3),et(17),et(1)}(M.width,M.height),function(){J(65476),J(418),et(0);for(var Ut=0;Ut<16;Ut++)et(A[Ut+1]);for(var Qt=0;Qt<=11;Qt++)et(C[Qt]);et(16);for(var ae=0;ae<16;ae++)et(D[ae+1]);for(var de=0;de<=161;de++)et(E[de]);et(1);for(var Jt=0;Jt<16;Jt++)et(I[Jt+1]);for(var se=0;se<=11;se++)et(R[se]);et(17);for(var Ce=0;Ce<16;Ce++)et(G[Ce+1]);for(var re=0;re<=161;re++)et(ot[re])}(),J(65498),J(12),et(3),et(1),et(0),et(2),et(17),et(3),et(17),et(0),et(63),et(0);var X=0,tt=0,it=0;S=0,x=7,this.encode.displayName="_encode_";for(var pt,gt,bt,Nt,kt,Ot,Vt,te,xt,rt=M.data,he=M.width,Yt=M.height,Dt=4*he,Mt=0;Mt<Yt;){for(pt=0;pt<Dt;){for(kt=Dt*Mt+pt,Vt=-1,te=0,xt=0;xt<64;xt++)Ot=kt+(te=xt>>3)*Dt+(Vt=4*(7&xt)),Mt+te>=Yt&&(Ot-=Dt*(Mt+1+te-Yt)),pt+Vt>=Dt&&(Ot-=pt+Vt-Dt+4),gt=rt[Ot++],bt=rt[Ot++],Nt=rt[Ot++],T[xt]=(W[gt]+W[bt+256>>0]+W[Nt+512>>0]>>16)-128,N[xt]=(W[gt+768>>0]+W[bt+1024>>0]+W[Nt+1280>>0]>>16)-128,O[xt]=(W[gt+1280>>0]+W[bt+1536>>0]+W[Nt+1792>>0]>>16)-128;X=ct(T,c,X,t,i),tt=ct(N,h,tt,e,r),it=ct(O,h,it,e,r),pt+=32}Mt+=8}if(x>=0){var qt=[];qt[1]=x+1,qt[0]=(1<<x+1)-1,K(qt)}return J(65497),new Uint8Array(_)},n=n||50,function(){for(var M=String.fromCharCode,H=0;H<256;H++)B[H]=M(H)}(),t=Y(A,C),e=Y(I,R),i=Y(D,E),r=Y(G,ot),function(){for(var M=1,H=2,X=1;X<=15;X++){for(var tt=M;tt<H;tt++)m[32767+tt]=X,f[32767+tt]=[],f[32767+tt][1]=X,f[32767+tt][0]=tt;for(var it=-(H-1);it<=-M;it++)m[32767+it]=X,f[32767+it]=[],f[32767+it][1]=X,f[32767+it][0]=H-1+it;M<<=1,H<<=1}}(),function(){for(var M=0;M<256;M++)W[M]=19595*M,W[M+256>>0]=38470*M,W[M+512>>0]=7471*M+32768,W[M+768>>0]=-11059*M,W[M+1024>>0]=-21709*M,W[M+1280>>0]=32768*M+8421375,W[M+1536>>0]=-27439*M,W[M+1792>>0]=-5329*M}(),_t(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function vr(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function R1(n){function t(A){if(!A)throw Error("assert :P")}function e(A,C,D){for(var E=0;4>E;E++)if(A[C+E]!=D.charCodeAt(E))return!0;return!1}function i(A,C,D,E,I){for(var R=0;R<I;R++)A[C+R]=D[E+R]}function r(A,C,D,E){for(var I=0;I<E;I++)A[C+I]=D}function s(A){return new Int32Array(A)}function o(A,C){for(var D=[],E=0;E<A;E++)D.push(new C);return D}function a(A,C){var D=[];return function E(I,R,G){for(var ot=G[R],Y=0;Y<ot&&(I.push(G.length>R+1?[]:new C),!(G.length<R+1));Y++)E(I[Y],R+1,G)}(D,0,A),D}var l=function(){var A=this;function C(u,g){for(var b=1<<g-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function D(u,g,b,L,V){t(!(L%b));do u[g+(L-=b)]=V;while(0<L)}function E(u,g,b,L,V){if(t(2328>=V),512>=V)var j=s(512);else if((j=s(V))==null)return 0;return function(U,q,$,Q,at,mt){var yt,ft,It=q,wt=1<<$,lt=s(16),ut=s(16);for(t(at!=0),t(Q!=null),t(U!=null),t(0<$),ft=0;ft<at;++ft){if(15<Q[ft])return 0;++lt[Q[ft]]}if(lt[0]==at)return 0;for(ut[1]=0,yt=1;15>yt;++yt){if(lt[yt]>1<<yt)return 0;ut[yt+1]=ut[yt]+lt[yt]}for(ft=0;ft<at;++ft)yt=Q[ft],0<Q[ft]&&(mt[ut[yt]++]=ft);if(ut[15]==1)return(Q=new I).g=0,Q.value=mt[0],D(U,It,1,wt,Q),wt;var St,Tt=-1,Et=wt-1,Wt=0,Bt=1,ne=1,zt=1<<$;for(ft=0,yt=1,at=2;yt<=$;++yt,at<<=1){if(Bt+=ne<<=1,0>(ne-=lt[yt]))return 0;for(;0<lt[yt];--lt[yt])(Q=new I).g=yt,Q.value=mt[ft++],D(U,It+Wt,at,zt,Q),Wt=C(Wt,yt)}for(yt=$+1,at=2;15>=yt;++yt,at<<=1){if(Bt+=ne<<=1,0>(ne-=lt[yt]))return 0;for(;0<lt[yt];--lt[yt]){if(Q=new I,(Wt&Et)!=Tt){for(It+=zt,St=1<<(Tt=yt)-$;15>Tt&&!(0>=(St-=lt[Tt]));)++Tt,St<<=1;wt+=zt=1<<(St=Tt-$),U[q+(Tt=Wt&Et)].g=St+$,U[q+Tt].value=It-q-Tt}Q.g=yt-$,Q.value=mt[ft++],D(U,It+(Wt>>$),at,zt,Q),Wt=C(Wt,yt)}}return Bt!=2*ut[15]-1?0:wt}(u,g,b,L,V,j)}function I(){this.value=this.g=0}function R(){this.value=this.g=0}function G(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Hn,R)}function ot(u,g,b,L){t(u!=null),t(g!=null),t(2147483648>L),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=g,u.pa=b,u.Jd=g,u.Yc=b+L,u.Zc=4<=L?b+L-4+1:b,pt(u)}function Y(u,g){for(var b=0;0<g--;)b|=bt(u,128)<<g;return b}function K(u,g){var b=Y(u,g);return gt(u)?-b:b}function et(u,g,b,L){var V,j=0;for(t(u!=null),t(g!=null),t(4294967288>L),u.Sb=L,u.Ra=0,u.u=0,u.h=0,4<L&&(L=4),V=0;V<L;++V)j+=g[b+V]<<8*V;u.Ra=j,u.bb=L,u.oa=g,u.pa=b}function J(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<dl-8>>>0,++u.bb,u.u-=8;X(u)&&(u.h=1,u.u=0)}function ct(u,g){if(t(0<=g),!u.h&&g<=hl){var b=H(u)&ul[g];return u.u+=g,J(u),b}return u.h=1,u.u=0}function _t(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(u){return u.Ra>>>(u.u&dl-1)>>>0}function X(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>dl}function tt(u,g){u.u=g,u.h=X(u)}function it(u){u.u>=fc&&(t(u.u>=fc),J(u))}function pt(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function gt(u){return Y(u,1)}function bt(u,g){var b=u.Ca;0>u.b&&pt(u);var L=u.b,V=b*g>>>8,j=(u.I>>>L>V)+0;for(j?(b-=V,u.I-=V+1<<L>>>0):b=V+1,L=b,V=0;256<=L;)V+=8,L>>=8;return L=7^V+Ei[L],u.b-=L,u.Ca=(b<<L)-1,j}function Nt(u,g,b){u[g+0]=b>>24&255,u[g+1]=b>>16&255,u[g+2]=b>>8&255,u[g+3]=b>>0&255}function kt(u,g){return u[g+0]<<0|u[g+1]<<8}function Ot(u,g){return kt(u,g)|u[g+2]<<16}function Vt(u,g){return kt(u,g)|kt(u,g+2)<<16}function te(u,g){var b=1<<g;return t(u!=null),t(0<g),u.X=s(b),u.X==null?0:(u.Mb=32-g,u.Xa=g,1)}function xt(u,g){t(u!=null),t(g!=null),t(u.Xa==g.Xa),i(g.X,0,u.X,0,1<<g.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function he(u,g,b,L){t(b!=null),t(L!=null);var V=b[0],j=L[0];return V==0&&(V=(u*j+g/2)/g),j==0&&(j=(g*V+u/2)/u),0>=V||0>=j?0:(b[0]=V,L[0]=j,1)}function Yt(u,g){return u+(1<<g)-1>>>g}function Dt(u,g){return((4278255360&u)+(4278255360&g)>>>0&4278255360)+((16711935&u)+(16711935&g)>>>0&16711935)>>>0}function Mt(u,g){A[g]=function(b,L,V,j,U,q,$){var Q;for(Q=0;Q<U;++Q){var at=A[u](q[$+Q-1],V,j+Q);q[$+Q]=Dt(b[L+Q],at)}}}function qt(){this.ud=this.hd=this.jd=0}function Ut(u,g){return((4278124286&(u^g))>>>1)+(u&g)>>>0}function Qt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function ae(u,g){return Qt(u+(u-g+.5>>1))}function de(u,g,b){return Math.abs(g-b)-Math.abs(u-b)}function Jt(u,g,b,L,V,j,U){for(L=j[U-1],b=0;b<V;++b)j[U+b]=L=Dt(u[g+b],L)}function se(u,g,b,L,V){var j;for(j=0;j<b;++j){var U=u[g+j],q=U>>8&255,$=16711935&($=($=16711935&U)+((q<<16)+q));L[V+j]=(4278255360&U)+$>>>0}}function Ce(u,g){g.jd=u>>0&255,g.hd=u>>8&255,g.ud=u>>16&255}function re(u,g,b,L,V,j){var U;for(U=0;U<L;++U){var q=g[b+U],$=q>>>8,Q=q,at=255&(at=(at=q>>>16)+((u.jd<<24>>24)*($<<24>>24)>>>5));Q=255&(Q=(Q=Q+((u.hd<<24>>24)*($<<24>>24)>>>5))+((u.ud<<24>>24)*(at<<24>>24)>>>5)),V[j+U]=(4278255360&q)+(at<<16)+Q}}function _e(u,g,b,L,V){A[g]=function(j,U,q,$,Q,at,mt,yt,ft){for($=mt;$<yt;++$)for(mt=0;mt<ft;++mt)Q[at++]=V(q[L(j[U++])])},A[u]=function(j,U,q,$,Q,at,mt){var yt=8>>j.b,ft=j.Ea,It=j.K[0],wt=j.w;if(8>yt)for(j=(1<<j.b)-1,wt=(1<<yt)-1;U<q;++U){var lt,ut=0;for(lt=0;lt<ft;++lt)lt&j||(ut=L($[Q++])),at[mt++]=V(It[ut&wt]),ut>>=yt}else A["VP8LMapColor"+b]($,Q,It,wt,at,mt,U,q,ft)}}function Ht(u,g,b,L,V){for(b=g+b;g<b;){var j=u[g++];L[V++]=j>>16&255,L[V++]=j>>8&255,L[V++]=j>>0&255}}function un(u,g,b,L,V){for(b=g+b;g<b;){var j=u[g++];L[V++]=j>>16&255,L[V++]=j>>8&255,L[V++]=j>>0&255,L[V++]=j>>24&255}}function Ie(u,g,b,L,V){for(b=g+b;g<b;){var j=(U=u[g++])>>16&240|U>>12&15,U=U>>0&240|U>>28&15;L[V++]=j,L[V++]=U}}function wi(u,g,b,L,V){for(b=g+b;g<b;){var j=(U=u[g++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;L[V++]=j,L[V++]=U}}function De(u,g,b,L,V){for(b=g+b;g<b;){var j=u[g++];L[V++]=j>>0&255,L[V++]=j>>8&255,L[V++]=j>>16&255}}function Ke(u,g,b,L,V,j){if(j==0)for(b=g+b;g<b;)Nt(L,((j=u[g++])[0]>>24|j[1]>>8&65280|j[2]<<8&16711680|j[3]<<24)>>>0),V+=32;else i(L,V,u,g,b)}function Ki(u,g){A[g][0]=A[u+"0"],A[g][1]=A[u+"1"],A[g][2]=A[u+"2"],A[g][3]=A[u+"3"],A[g][4]=A[u+"4"],A[g][5]=A[u+"5"],A[g][6]=A[u+"6"],A[g][7]=A[u+"7"],A[g][8]=A[u+"8"],A[g][9]=A[u+"9"],A[g][10]=A[u+"10"],A[g][11]=A[u+"11"],A[g][12]=A[u+"12"],A[g][13]=A[u+"13"],A[g][14]=A[u+"0"],A[g][15]=A[u+"0"]}function Te(u){return u==lf||u==cf||u==th||u==uf}function Tr(){this.eb=[],this.size=this.A=this.fb=0}function Ze(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Un(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Tr,this.f.kb=new Ze,this.sd=null}function Mi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ye(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ee(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function ke(u,g){var b=u.T,L=g.ba.f.RGBA,V=L.eb,j=L.fb+u.ka*L.A,U=nr[g.ba.S],q=u.y,$=u.O,Q=u.f,at=u.N,mt=u.ea,yt=u.W,ft=g.cc,It=g.dc,wt=g.Mc,lt=g.Nc,ut=u.ka,St=u.ka+u.T,Tt=u.U,Et=Tt+1>>1;for(ut==0?U(q,$,null,null,Q,at,mt,yt,Q,at,mt,yt,V,j,null,null,Tt):(U(g.ec,g.fc,q,$,ft,It,wt,lt,Q,at,mt,yt,V,j-L.A,V,j,Tt),++b);ut+2<St;ut+=2)ft=Q,It=at,wt=mt,lt=yt,at+=u.Rc,yt+=u.Rc,j+=2*L.A,U(q,($+=2*u.fa)-u.fa,q,$,ft,It,wt,lt,Q,at,mt,yt,V,j-L.A,V,j,Tt);return $+=u.fa,u.j+St<u.o?(i(g.ec,g.fc,q,$,Tt),i(g.cc,g.dc,Q,at,Et),i(g.Mc,g.Nc,mt,yt,Et),b--):1&St||U(q,$,null,null,Q,at,mt,yt,Q,at,mt,yt,V,j+L.A,null,null,Tt),b}function Yi(u,g,b){var L=u.F,V=[u.J];if(L!=null){var j=u.U,U=g.ba.S,q=U==Zu||U==th;g=g.ba.f.RGBA;var $=[0],Q=u.ka;$[0]=u.T,u.Kb&&(Q==0?--$[0]:(--Q,V[0]-=u.width),u.j+u.ka+u.T==u.o&&($[0]=u.o-u.j-Q));var at=g.eb;Q=g.fb+Q*g.A,u=Qe(L,V[0],u.width,j,$,at,Q+(q?0:3),g.A),t(b==$),u&&Te(U)&&tr(at,Q,q,j,$,g.A)}return 0}function En(u){var g=u.ma,b=g.ba.S,L=11>b,V=b==Qu||b==Ju||b==Zu||b==af||b==12||Te(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!hc(g.Oa,u,V?11:12))return 0;if(V&&Te(b)&&Lt(),u.da)alert("todo:use_scaling");else{if(L){if(g.Ib=ee,u.Kb){if(b=u.U+1>>1,g.memory=s(u.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+u.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=ke,Lt()}}else alert("todo:EmitYUV");V&&(g.Jb=Yi,L&&dt())}if(L&&!Rm){for(u=0;256>u;++u)i_[u]=89858*(u-128)+nh>>eh,o_[u]=-22014*(u-128)+nh,s_[u]=-45773*(u-128),r_[u]=113618*(u-128)+nh>>eh;for(u=_c;u<ff;++u)g=76283*(u-16)+nh>>eh,a_[u-_c]=Fe(g,255),l_[u-_c]=Fe(g+8>>4,15);Rm=1}return 1}function Xn(u){var g=u.ma,b=u.U,L=u.T;return t(!(1&u.ka)),0>=b||0>=L?0:(b=g.Ib(u,g),g.Jb!=null&&g.Jb(u,g,b),g.Dc+=b,1)}function Oi(u){u.ma.memory=null}function $t(u,g,b,L){return ct(u,8)!=47?0:(g[0]=ct(u,14)+1,b[0]=ct(u,14)+1,L[0]=ct(u,1),ct(u,3)!=0?0:!u.h)}function Ai(u,g){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+ct(g,b)+1}function Qn(u,g){return 120<g?g-120:1<=(b=((b=qb[g-1])>>4)*u+(8-(15&b)))?b:1;var b}function In(u,g,b){var L=H(b),V=u[g+=255&L].g-8;return 0<V&&(tt(b,b.u+8),L=H(b),g+=u[g].value,g+=L&(1<<V)-1),tt(b,b.u+u[g].g),u[g].value}function mn(u,g,b){return b.g+=u.g,b.value+=u.value<<g>>>0,t(8>=b.g),u.g}function hn(u,g,b){var L=u.xc;return t((g=L==0?0:u.vc[u.md*(b>>L)+(g>>L)])<u.Wb),u.Ya[g]}function Pn(u,g,b,L){var V=u.ab,j=u.c*g,U=u.C;g=U+g;var q=b,$=L;for(L=u.Ta,b=u.Ua;0<V--;){var Q=u.gc[V],at=U,mt=g,yt=q,ft=$,It=($=L,q=b,Q.Ea);switch(t(at<mt),t(mt<=Q.nc),Q.hc){case 2:Hu(yt,ft,(mt-at)*It,$,q);break;case 0:var wt=at,lt=mt,ut=$,St=q,Tt=(zt=Q).Ea;wt==0&&(sf(yt,ft,null,null,1,ut,St),Jt(yt,ft+1,0,0,Tt-1,ut,St+1),ft+=Tt,St+=Tt,++wt);for(var Et=1<<zt.b,Wt=Et-1,Bt=Yt(Tt,zt.b),ne=zt.K,zt=zt.w+(wt>>zt.b)*Bt;wt<lt;){var Me=ne,Be=zt,Ne=1;for(pc(yt,ft,ut,St-Tt,1,ut,St);Ne<Tt;){var xe=(Ne&~Wt)+Et;xe>Tt&&(xe=Tt),(0,ro[Me[Be++]>>8&15])(yt,ft+ +Ne,ut,St+Ne-Tt,xe-Ne,ut,St+Ne),Ne=xe}ft+=Tt,St+=Tt,++wt&Wt||(zt+=Bt)}mt!=Q.nc&&i($,q-It,$,q+(mt-at-1)*It,It);break;case 1:for(It=yt,lt=ft,Tt=(yt=Q.Ea)-(St=yt&~(ut=(ft=1<<Q.b)-1)),wt=Yt(yt,Q.b),Et=Q.K,Q=Q.w+(at>>Q.b)*wt;at<mt;){for(Wt=Et,Bt=Q,ne=new qt,zt=lt+St,Me=lt+yt;lt<zt;)Ce(Wt[Bt++],ne),fa(ne,It,lt,ft,$,q),lt+=ft,q+=ft;lt<Me&&(Ce(Wt[Bt++],ne),fa(ne,It,lt,Tt,$,q),lt+=Tt,q+=Tt),++at&ut||(Q+=wt)}break;case 3:if(yt==$&&ft==q&&0<Q.b){for(lt=$,yt=It=q+(mt-at)*It-(St=(mt-at)*Yt(Q.Ea,Q.b)),ft=$,ut=q,wt=[],St=(Tt=St)-1;0<=St;--St)wt[St]=ft[ut+St];for(St=Tt-1;0<=St;--St)lt[yt+St]=wt[St];Qi(Q,at,mt,$,It,$,q)}else Qi(Q,at,mt,yt,ft,$,q)}q=L,$=b}$!=b&&i(L,b,q,$,j)}function js(u,g){var b=u.V,L=u.Ba+u.c*u.C,V=g-u.C;if(t(g<=u.l.o),t(16>=V),0<V){var j=u.l,U=u.Ta,q=u.Ua,$=j.width;if(Pn(u,V,b,L),V=q=[q],t((b=u.C)<(L=g)),t(j.v<j.va),L>j.o&&(L=j.o),b<j.j){var Q=j.j-b;b=j.j,V[0]+=Q*$}if(b>=L?b=0:(V[0]+=4*j.v,j.ka=b-j.j,j.U=j.va-j.v,j.T=L-b,b=1),b){if(q=q[0],11>(b=u.ca).S){var at=b.f.RGBA,mt=(L=b.S,V=j.U,j=j.T,Q=at.eb,at.A),yt=j;for(at=at.fb+u.Ma*at.A;0<yt--;){var ft=U,It=q,wt=V,lt=Q,ut=at;switch(L){case Xu:Ii(ft,It,wt,lt,ut);break;case Qu:yi(ft,It,wt,lt,ut);break;case lf:yi(ft,It,wt,lt,ut),tr(lt,ut,0,wt,1,0);break;case xm:gs(ft,It,wt,lt,ut);break;case Ju:Ke(ft,It,wt,lt,ut,1);break;case cf:Ke(ft,It,wt,lt,ut,1),tr(lt,ut,0,wt,1,0);break;case Zu:Ke(ft,It,wt,lt,ut,0);break;case th:Ke(ft,It,wt,lt,ut,0),tr(lt,ut,1,wt,1,0);break;case af:so(ft,It,wt,lt,ut);break;case uf:so(ft,It,wt,lt,ut),Xe(lt,ut,wt,1,0);break;case Sm:ps(ft,It,wt,lt,ut);break;default:t(0)}q+=$,at+=mt}u.Ma+=j}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=g,t(u.C<=u.i)}function or(u){var g;if(0<u.ua)return 0;for(g=0;g<u.Wb;++g){var b=u.Ya[g].G,L=u.Ya[g].H;if(0<b[1][L[1]+0].g||0<b[2][L[2]+0].g||0<b[3][L[3]+0].g)return 0}return 1}function Jn(u,g,b,L,V,j){if(u.Z!=0){var U=u.qd,q=u.rd;for(t(co[u.Z]!=null);g<b;++g)co[u.Z](U,q,L,V,L,V,j),U=L,q=V,V+=j;u.qd=U,u.rd=q}}function xi(u,g){var b=u.l.ma,L=b.Z==0||b.Z==1?u.l.j:u.C;if(L=u.C<L?L:u.C,t(g<=u.l.o),g>L){var V=u.l.width,j=b.ca,U=b.tb+V*L,q=u.V,$=u.Ba+u.c*L,Q=u.gc;t(u.ab==1),t(Q[0].hc==3),Wu(Q[0],L,g,q,$,j,U),Jn(b,L,g,j,U,V)}u.C=u.Ma=g}function pi(u,g,b,L,V,j,U){var q=u.$/L,$=u.$%L,Q=u.m,at=u.s,mt=b+u.$,yt=mt;V=b+L*V;var ft=b+L*j,It=280+at.ua,wt=u.Pb?q:16777216,lt=0<at.ua?at.Wa:null,ut=at.wc,St=mt<ft?hn(at,$,q):null;t(u.C<j),t(ft<=V);var Tt=!1;t:for(;;){for(;Tt||mt<ft;){var Et=0;if(q>=wt){var Wt=mt-b;t((wt=u).Pb),wt.wd=wt.m,wt.xd=Wt,0<wt.s.ua&&xt(wt.s.Wa,wt.s.vb),wt=q+Wb}if($&ut||(St=hn(at,$,q)),t(St!=null),St.Qb&&(g[mt]=St.qb,Tt=!0),!Tt)if(it(Q),St.jc){Et=Q,Wt=g;var Bt=mt,ne=St.pd[H(Et)&Hn-1];t(St.jc),256>ne.g?(tt(Et,Et.u+ne.g),Wt[Bt]=ne.value,Et=0):(tt(Et,Et.u+ne.g-256),t(256<=ne.value),Et=ne.value),Et==0&&(Tt=!0)}else Et=In(St.G[0],St.H[0],Q);if(Q.h)break;if(Tt||256>Et){if(!Tt)if(St.nd)g[mt]=(St.qb|Et<<8)>>>0;else{if(it(Q),Tt=In(St.G[1],St.H[1],Q),it(Q),Wt=In(St.G[2],St.H[2],Q),Bt=In(St.G[3],St.H[3],Q),Q.h)break;g[mt]=(Bt<<24|Tt<<16|Et<<8|Wt)>>>0}if(Tt=!1,++mt,++$>=L&&($=0,++q,U!=null&&q<=j&&!(q%16)&&U(u,q),lt!=null))for(;yt<mt;)Et=g[yt++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et}else if(280>Et){if(Et=Ai(Et-256,Q),Wt=In(St.G[4],St.H[4],Q),it(Q),Wt=Qn(L,Wt=Ai(Wt,Q)),Q.h)break;if(mt-b<Wt||V-mt<Et)break t;for(Bt=0;Bt<Et;++Bt)g[mt+Bt]=g[mt+Bt-Wt];for(mt+=Et,$+=Et;$>=L;)$-=L,++q,U!=null&&q<=j&&!(q%16)&&U(u,q);if(t(mt<=V),$&ut&&(St=hn(at,$,q)),lt!=null)for(;yt<mt;)Et=g[yt++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et}else{if(!(Et<It))break t;for(Tt=Et-280,t(lt!=null);yt<mt;)Et=g[yt++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et;Et=mt,t(!(Tt>>>(Wt=lt).Xa)),g[Et]=Wt.X[Tt],Tt=!0}Tt||t(Q.h==X(Q))}if(u.Pb&&Q.h&&mt<V)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&xt(u.s.vb,u.s.Wa);else{if(Q.h)break t;U!=null&&U(u,q>j?j:q),u.a=0,u.$=mt-b}return 1}return u.a=3,0}function gi(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var g=u.Wa;g!=null&&(g.X=null),u.vb=null,t(u!=null)}function yn(){var u=new ll;return u==null?null:(u.a=0,u.xb=Pm,Ki("Predictor","VP8LPredictors"),Ki("Predictor","VP8LPredictors_C"),Ki("PredictorAdd","VP8LPredictorsAdd"),Ki("PredictorAdd","VP8LPredictorsAdd_C"),Hu=se,fa=re,Ii=Ht,yi=un,so=Ie,ps=wi,gs=De,A.VP8LMapColor32b=fl,A.VP8LMapColor8b=$u,u)}function Fi(u,g,b,L,V){var j=1,U=[u],q=[g],$=L.m,Q=L.s,at=null,mt=0;t:for(;;){if(b)for(;j&&ct($,1);){var yt=U,ft=q,It=L,wt=1,lt=It.m,ut=It.gc[It.ab],St=ct(lt,2);if(It.Oc&1<<St)j=0;else{switch(It.Oc|=1<<St,ut.hc=St,ut.Ea=yt[0],ut.nc=ft[0],ut.K=[null],++It.ab,t(4>=It.ab),St){case 0:case 1:ut.b=ct(lt,3)+2,wt=Fi(Yt(ut.Ea,ut.b),Yt(ut.nc,ut.b),0,It,ut.K),ut.K=ut.K[0];break;case 3:var Tt,Et=ct(lt,8)+1,Wt=16<Et?0:4<Et?1:2<Et?2:3;if(yt[0]=Yt(ut.Ea,Wt),ut.b=Wt,Tt=wt=Fi(Et,1,0,It,ut.K)){var Bt,ne=Et,zt=ut,Me=1<<(8>>zt.b),Be=s(Me);if(Be==null)Tt=0;else{var Ne=zt.K[0],xe=zt.w;for(Be[0]=zt.K[0][0],Bt=1;Bt<1*ne;++Bt)Be[Bt]=Dt(Ne[xe+Bt],Be[Bt-1]);for(;Bt<4*Me;++Bt)Be[Bt]=0;zt.K[0]=null,zt.K[0]=Be,Tt=1}}wt=Tt;break;case 2:break;default:t(0)}j=wt}}if(U=U[0],q=q[0],j&&ct($,1)&&!(j=1<=(mt=ct($,4))&&11>=mt)){L.a=3;break t}var $e;if($e=j)e:{var He,ve,Tn,Pi=L,Ln=U,Ti=q,je=mt,zi=b,qi=Pi.m,Fn=Pi.s,Wn=[null],bi=1,ir=0,Ur=Hb[je];n:for(;;){if(zi&&ct(qi,1)){var Vn=ct(qi,3)+2,bs=Yt(Ln,Vn),va=Yt(Ti,Vn),vl=bs*va;if(!Fi(bs,va,0,Pi,Wn))break n;for(Wn=Wn[0],Fn.xc=Vn,He=0;He<vl;++He){var uo=Wn[He]>>8&65535;Wn[He]=uo,uo>=bi&&(bi=uo+1)}}if(qi.h)break n;for(ve=0;5>ve;++ve){var fn=Em[ve];!ve&&0<je&&(fn+=1<<je),ir<fn&&(ir=fn)}var pf=o(bi*Ur,I),Om=bi,Fm=o(Om,G);if(Fm==null)var rh=null;else t(65536>=Om),rh=Fm;var wc=s(ir);if(rh==null||wc==null||pf==null){Pi.a=1;break n}var sh=pf;for(He=Tn=0;He<bi;++He){var mr=rh[He],bl=mr.G,_l=mr.H,Vm=0,oh=1,Bm=0;for(ve=0;5>ve;++ve){fn=Em[ve],bl[ve]=sh,_l[ve]=Tn,!ve&&0<je&&(fn+=1<<je);r:{var ah,gf=fn,lh=Pi,Ac=wc,h_=sh,d_=Tn,mf=0,ho=lh.m,f_=ct(ho,1);if(r(Ac,0,0,gf),f_){var p_=ct(ho,1)+1,g_=ct(ho,1),jm=ct(ho,g_==0?1:8);Ac[jm]=1,p_==2&&(Ac[jm=ct(ho,8)]=1);var ch=1}else{var Um=s(19),zm=ct(ho,4)+4;if(19<zm){lh.a=3;var uh=0;break r}for(ah=0;ah<zm;++ah)Um[zb[ah]]=ct(ho,3);var yf=void 0,xc=void 0,qm=lh,m_=Um,hh=gf,Hm=Ac,vf=0,fo=qm.m,Wm=8,$m=o(128,I);i:for(;E($m,0,7,m_,19);){if(ct(fo,1)){var y_=2+2*ct(fo,3);if((yf=2+ct(fo,y_))>hh)break i}else yf=hh;for(xc=0;xc<hh&&yf--;){it(fo);var Gm=$m[0+(127&H(fo))];tt(fo,fo.u+Gm.g);var wl=Gm.value;if(16>wl)Hm[xc++]=wl,wl!=0&&(Wm=wl);else{var v_=wl==16,Km=wl-16,b_=jb[Km],Ym=ct(fo,Bb[Km])+b_;if(xc+Ym>hh)break i;for(var __=v_?Wm:0;0<Ym--;)Hm[xc++]=__}}vf=1;break i}vf||(qm.a=3),ch=vf}(ch=ch&&!ho.h)&&(mf=E(h_,d_,8,Ac,gf)),ch&&mf!=0?uh=mf:(lh.a=3,uh=0)}if(uh==0)break n;if(oh&&Ub[ve]==1&&(oh=sh[Tn].g==0),Vm+=sh[Tn].g,Tn+=uh,3>=ve){var Sc,bf=wc[0];for(Sc=1;Sc<fn;++Sc)wc[Sc]>bf&&(bf=wc[Sc]);Bm+=bf}}if(mr.nd=oh,mr.Qb=0,oh&&(mr.qb=(bl[3][_l[3]+0].value<<24|bl[1][_l[1]+0].value<<16|bl[2][_l[2]+0].value)>>>0,Vm==0&&256>bl[0][_l[0]+0].value&&(mr.Qb=1,mr.qb+=bl[0][_l[0]+0].value<<8)),mr.jc=!mr.Qb&&6>Bm,mr.jc){var dh,_s=mr;for(dh=0;dh<Hn;++dh){var po=dh,go=_s.pd[po],fh=_s.G[0][_s.H[0]+po];256<=fh.value?(go.g=fh.g+256,go.value=fh.value):(go.g=0,go.value=0,po>>=mn(fh,8,go),po>>=mn(_s.G[1][_s.H[1]+po],16,go),po>>=mn(_s.G[2][_s.H[2]+po],0,go),mn(_s.G[3][_s.H[3]+po],24,go))}}}Fn.vc=Wn,Fn.Wb=bi,Fn.Ya=rh,Fn.yc=pf,$e=1;break e}$e=0}if(!(j=$e)){L.a=3;break t}if(0<mt){if(Q.ua=1<<mt,!te(Q.Wa,mt)){L.a=1,j=0;break t}}else Q.ua=0;var _f=L,Xm=U,w_=q,wf=_f.s,Af=wf.xc;if(_f.c=Xm,_f.i=w_,wf.md=Yt(Xm,Af),wf.wc=Af==0?-1:(1<<Af)-1,b){L.xb=Jb;break t}if((at=s(U*q))==null){L.a=1,j=0;break t}j=(j=pi(L,at,0,U,q,q,null))&&!$.h;break t}return j?(V!=null?V[0]=at:(t(at==null),t(b)),L.$=0,b||gi(Q)):gi(Q),j}function Lr(u,g){var b=u.c*u.i,L=b+g+16*g;return t(u.c<=g),u.V=s(L),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+g,1)}function Cr(u,g){var b=u.C,L=g-b,V=u.V,j=u.Ba+u.c*b;for(t(g<=u.l.o);0<L;){var U=16<L?16:L,q=u.l.ma,$=u.l.width,Q=$*U,at=q.ca,mt=q.tb+$*b,yt=u.Ta,ft=u.Ua;Pn(u,U,V,j),bn(yt,ft,at,mt,Q),Jn(q,b,b+U,at,mt,$),L-=U,V+=U*u.c,b+=U}t(b==g),u.C=u.Ma=g}function kr(){this.ub=this.yd=this.td=this.Rb=0}function is(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ja(){this.Yb=function(){var u=[];return function g(b,L,V){for(var j=V[L],U=0;U<j&&(b.push(V.length>L+1?[]:0),!(V.length<L+1));U++)g(b[U],L+1,V)}(u,0,[3,11]),u}()}function Us(){this.jb=s(3),this.Wc=a([4,8],Ja),this.Xc=a([4,17],Ja)}function Za(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Nr(){this.ld=this.La=this.dd=this.tc=0}function Rr(){this.Na=this.la=0}function ar(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ss(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ac(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nr),this.Y=0,this.ya=Array(new ss),this.aa=0,this.l=new os}function Zo(){this.y=s(16),this.f=s(8),this.ea=s(8)}function tl(){this.cb=this.a=0,this.sc="",this.m=new _t,this.Od=new kr,this.Kc=new is,this.ed=new Za,this.Qa=new rs,this.Ic=this.$c=this.Aa=0,this.D=new ac,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,_t),this.ia=0,this.pb=o(4,ar),this.Pa=new Us,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zo),this.Hd=0,this.rb=Array(new Rr),this.sb=0,this.wa=Array(new Nr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ss),this.L=this.aa=0,this.gd=a([4,2],Nr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function os(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ta(){var u=new tl;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,bc||(bc=el)),u}function tn(u,g,b){return u.a==0&&(u.a=g,u.sc=b,u.cb=0),0}function ea(u,g,b){return 3<=b&&u[g+0]==157&&u[g+1]==1&&u[g+2]==42}function na(u,g){if(u==null)return 0;if(u.a=0,u.sc="OK",g==null)return tn(u,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,L=g.w,V=g.ha;if(4>V)return tn(u,7,"Truncated header.");var j=b[L+0]|b[L+1]<<8|b[L+2]<<16,U=u.Od;if(U.Rb=!(1&j),U.td=j>>1&7,U.yd=j>>4&1,U.ub=j>>5,3<U.td)return tn(u,3,"Incorrect keyframe parameters.");if(!U.yd)return tn(u,4,"Frame not displayable.");L+=3,V-=3;var q=u.Kc;if(U.Rb){if(7>V)return tn(u,7,"cannot parse picture header");if(!ea(b,L,V))return tn(u,3,"Bad code word");q.c=16383&(b[L+4]<<8|b[L+3]),q.Td=b[L+4]>>6,q.i=16383&(b[L+6]<<8|b[L+5]),q.Ud=b[L+6]>>6,L+=7,V-=7,u.za=q.c+15>>4,u.Ub=q.i+15>>4,g.width=q.c,g.height=q.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,r((j=u.Pa).jb,0,255,j.jb.length),t((j=u.Qa)!=null),j.Cb=0,j.Bb=0,j.Fb=1,r(j.Zb,0,0,j.Zb.length),r(j.Lb,0,0,j.Lb)}if(U.ub>V)return tn(u,7,"bad partition length");ot(j=u.m,b,L,U.ub),L+=U.ub,V-=U.ub,U.Rb&&(q.Ld=gt(j),q.Kd=gt(j)),q=u.Qa;var $,Q=u.Pa;if(t(j!=null),t(q!=null),q.Cb=gt(j),q.Cb){if(q.Bb=gt(j),gt(j)){for(q.Fb=gt(j),$=0;4>$;++$)q.Zb[$]=gt(j)?K(j,7):0;for($=0;4>$;++$)q.Lb[$]=gt(j)?K(j,6):0}if(q.Bb)for($=0;3>$;++$)Q.jb[$]=gt(j)?Y(j,8):255}else q.Bb=0;if(j.Ka)return tn(u,3,"cannot parse segment header");if((q=u.ed).zd=gt(j),q.Tb=Y(j,6),q.wb=Y(j,3),q.Pc=gt(j),q.Pc&&gt(j)){for(Q=0;4>Q;++Q)gt(j)&&(q.vd[Q]=K(j,6));for(Q=0;4>Q;++Q)gt(j)&&(q.od[Q]=K(j,6))}if(u.L=q.Tb==0?0:q.zd?1:2,j.Ka)return tn(u,3,"cannot parse filter header");var at=V;if(V=$=L,L=$+at,q=at,u.Xb=(1<<Y(u.m,2))-1,at<3*(Q=u.Xb))b=7;else{for($+=3*Q,q-=3*Q,at=0;at<Q;++at){var mt=b[V+0]|b[V+1]<<8|b[V+2]<<16;mt>q&&(mt=q),ot(u.Jc[+at],b,$,mt),$+=mt,q-=mt,V+=3}ot(u.Jc[+Q],b,$,q),b=$<L?0:5}if(b!=0)return tn(u,b,"cannot parse partitions");for(b=Y($=u.m,7),V=gt($)?K($,4):0,L=gt($)?K($,4):0,q=gt($)?K($,4):0,Q=gt($)?K($,4):0,$=gt($)?K($,4):0,at=u.Qa,mt=0;4>mt;++mt){if(at.Cb){var yt=at.Zb[mt];at.Fb||(yt+=b)}else{if(0<mt){u.pb[mt]=u.pb[0];continue}yt=b}var ft=u.pb[mt];ft.Sc[0]=hf[Fe(yt+V,127)],ft.Sc[1]=df[Fe(yt+0,127)],ft.Eb[0]=2*hf[Fe(yt+L,127)],ft.Eb[1]=101581*df[Fe(yt+q,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=hf[Fe(yt+Q,117)],ft.Qc[1]=df[Fe(yt+$,127)],ft.lc=yt+$}if(!U.Rb)return tn(u,4,"Not a key frame.");for(gt(j),U=u.Pa,b=0;4>b;++b){for(V=0;8>V;++V)for(L=0;3>L;++L)for(q=0;11>q;++q)Q=bt(j,Xb[b][V][L][q])?Y(j,8):Kb[b][V][L][q],U.Wc[b][V].Yb[L][q]=Q;for(V=0;17>V;++V)U.Xc[b][V]=U.Wc[b][Qb[V]]}return u.kc=gt(j),u.kc&&(u.Bd=Y(j,8)),u.cb=1}function el(u,g,b,L,V,j,U){var q=g[V].Yb[b];for(b=0;16>V;++V){if(!bt(u,q[b+0]))return V;for(;!bt(u,q[b+1]);)if(q=g[++V].Yb[0],b=0,V==16)return 16;var $=g[V+1].Yb;if(bt(u,q[b+2])){var Q=u,at=0;if(bt(Q,(yt=q)[(mt=b)+3]))if(bt(Q,yt[mt+6])){for(q=0,mt=2*(at=bt(Q,yt[mt+8]))+(yt=bt(Q,yt[mt+9+at])),at=0,yt=$b[mt];yt[q];++q)at+=at+bt(Q,yt[q]);at+=3+(8<<mt)}else bt(Q,yt[mt+7])?(at=7+2*bt(Q,165),at+=bt(Q,145)):at=5+bt(Q,159);else at=bt(Q,yt[mt+4])?3+bt(Q,yt[mt+5]):2;q=$[2]}else at=1,q=$[1];$=U+Gb[V],0>(Q=u).b&&pt(Q);var mt,yt=Q.b,ft=(mt=Q.Ca>>1)-(Q.I>>yt)>>31;--Q.b,Q.Ca+=ft,Q.Ca|=1,Q.I-=(mt+1&ft)<<yt,j[$]=((at^ft)-ft)*L[(0<V)+0]}return 16}function ia(u){var g=u.rb[u.sb-1];g.la=0,g.Na=0,r(u.zc,0,0,u.zc.length),u.ja=0}function nl(u,g){if(u==null)return 0;if(g==null)return tn(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!na(u,g))return 0;if(t(u.cb),g.ac==null||g.ac(g)){g.ob&&(u.L=0);var b=ih[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=g.v-b>>4,u.zb=g.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=g.o+15+b>>4,u.Hb=g.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var L=u.ed;for(b=0;4>b;++b){var V;if(u.Qa.Cb){var j=u.Qa.Lb[b];u.Qa.Fb||(j+=L.Tb)}else j=L.Tb;for(V=0;1>=V;++V){var U=u.gd[b][V],q=j;if(L.Pc&&(q+=L.vd[0],V&&(q+=L.od[0])),0<(q=0>q?0:63<q?63:q)){var $=q;0<L.wb&&($=4<L.wb?$>>2:$>>1)>9-L.wb&&($=9-L.wb),1>$&&($=1),U.dd=$,U.tc=2*q+$,U.ld=40<=q?2:15<=q?1:0}else U.tc=0;U.La=V}}}b=0}else tn(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=u_);t:{b=u.Ic,L=4*($=u.za);var Q=32*$,at=$+1,mt=0<u.L?$*(0<u.Aa?2:1):0,yt=(u.Aa==2?2:1)*$;if((U=L+832+(V=3*(16*b+ih[u.L])/2*Q)+(j=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=U)b=0;else{if(U>u.Vb){if(u.Vb=0,u.Ec=s(U),u.Fc=0,u.Ec==null){b=tn(u,1,"no memory during frame initialization.");break t}u.Vb=U}U=u.Ec,q=u.Fc,u.Ac=U,u.Bc=q,q+=L,u.Gd=o(Q,Zo),u.Hd=0,u.rb=o(at+1,Rr),u.sb=1,u.wa=mt?o(mt,Nr):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=$),t(!0),u.oc=U,u.pc=q,q+=832,u.ya=o(yt,ss),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=$),u.R=16*$,u.B=8*$,$=(Q=ih[u.L])*u.R,Q=Q/2*u.B,u.sa=U,u.ta=q+$,u.qa=u.sa,u.ra=u.ta+16*b*u.R+Q,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+Q,u.$c=0,q+=V,u.mb=j?U:null,u.nb=j?q:null,t(q+j<=u.Fc+u.Vb),ia(u),r(u.Ac,u.Bc,0,L),b=1}}if(b){if(g.ka=0,g.y=u.sa,g.O=u.ta,g.f=u.qa,g.N=u.ra,g.ea=u.Ha,g.Vd=u.Ia,g.fa=u.R,g.Rc=u.B,g.F=null,g.J=0,!Ku){for(b=-255;255>=b;++b)Rn[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)ys[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)vc[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)yl[255+b]=0>b?0:255<b?255:b;Ku=1}pl=cs,ms=qs,gc=ra,vi=Ve,Ji=ls,vn=as,gl=Xs,Gu=dr,mc=Js,pa=da,ga=Qs,oo=hs,ma=Zs,ml=Fr,ya=us,ao=ji,yc=Nn,Zi=al,gr[0]=Xi,gr[1]=lc,gr[2]=Mr,gr[3]=uc,gr[4]=sl,gr[5]=$s,gr[6]=Vi,gr[7]=oa,gr[8]=Ks,gr[9]=Gs,lo[0]=Dr,lo[1]=cc,lo[2]=cr,lo[3]=Hs,lo[4]=en,lo[5]=rl,lo[6]=sa,vs[0]=hr,vs[1]=il,vs[2]=ol,vs[3]=ur,vs[4]=Oe,vs[5]=aa,vs[6]=la,b=1}else b=0}b&&(b=function(ft,It){for(ft.M=0;ft.M<ft.Va;++ft.M){var wt,lt=ft.Jc[ft.M&ft.Xb],ut=ft.m,St=ft;for(wt=0;wt<St.za;++wt){var Tt=ut,Et=St,Wt=Et.Ac,Bt=Et.Bc+4*wt,ne=Et.zc,zt=Et.ya[Et.aa+wt];if(Et.Qa.Bb?zt.$b=bt(Tt,Et.Pa.jb[0])?2+bt(Tt,Et.Pa.jb[2]):bt(Tt,Et.Pa.jb[1]):zt.$b=0,Et.kc&&(zt.Ad=bt(Tt,Et.Bd)),zt.Za=!bt(Tt,145)+0,zt.Za){var Me=zt.Ob,Be=0;for(Et=0;4>Et;++Et){var Ne,xe=ne[0+Et];for(Ne=0;4>Ne;++Ne){xe=Yb[Wt[Bt+Ne]][xe];for(var $e=Im[bt(Tt,xe[0])];0<$e;)$e=Im[2*$e+bt(Tt,xe[$e])];xe=-$e,Wt[Bt+Ne]=xe}i(Me,Be,Wt,Bt,4),Be+=4,ne[0+Et]=xe}}else xe=bt(Tt,156)?bt(Tt,128)?1:3:bt(Tt,163)?2:0,zt.Ob[0]=xe,r(Wt,Bt,xe,4),r(ne,0,xe,4);zt.Dd=bt(Tt,142)?bt(Tt,114)?bt(Tt,183)?1:3:2:0}if(St.m.Ka)return tn(ft,7,"Premature end-of-partition0 encountered.");for(;ft.ja<ft.za;++ft.ja){if(St=lt,Tt=(ut=ft).rb[ut.sb-1],Wt=ut.rb[ut.sb+ut.ja],wt=ut.ya[ut.aa+ut.ja],Bt=ut.kc?wt.Ad:0)Tt.la=Wt.la=0,wt.Za||(Tt.Na=Wt.Na=0),wt.Hc=0,wt.Gc=0,wt.ia=0;else{var He,ve;if(Tt=Wt,Wt=St,Bt=ut.Pa.Xc,ne=ut.ya[ut.aa+ut.ja],zt=ut.pb[ne.$b],Et=ne.ad,Me=0,Be=ut.rb[ut.sb-1],xe=Ne=0,r(Et,Me,0,384),ne.Za)var Tn=0,Pi=Bt[3];else{$e=s(16);var Ln=Tt.Na+Be.Na;if(Ln=bc(Wt,Bt[1],Ln,zt.Eb,0,$e,0),Tt.Na=Be.Na=(0<Ln)+0,1<Ln)pl($e,0,Et,Me);else{var Ti=$e[0]+3>>3;for($e=0;256>$e;$e+=16)Et[Me+$e]=Ti}Tn=1,Pi=Bt[0]}var je=15&Tt.la,zi=15&Be.la;for($e=0;4>$e;++$e){var qi=1&zi;for(Ti=ve=0;4>Ti;++Ti)je=je>>1|(qi=(Ln=bc(Wt,Pi,Ln=qi+(1&je),zt.Sc,Tn,Et,Me))>Tn)<<7,ve=ve<<2|(3<Ln?3:1<Ln?2:Et[Me+0]!=0),Me+=16;je>>=4,zi=zi>>1|qi<<7,Ne=(Ne<<8|ve)>>>0}for(Pi=je,Tn=zi>>4,He=0;4>He;He+=2){for(ve=0,je=Tt.la>>4+He,zi=Be.la>>4+He,$e=0;2>$e;++$e){for(qi=1&zi,Ti=0;2>Ti;++Ti)Ln=qi+(1&je),je=je>>1|(qi=0<(Ln=bc(Wt,Bt[2],Ln,zt.Qc,0,Et,Me)))<<3,ve=ve<<2|(3<Ln?3:1<Ln?2:Et[Me+0]!=0),Me+=16;je>>=2,zi=zi>>1|qi<<5}xe|=ve<<4*He,Pi|=je<<4<<He,Tn|=(240&zi)<<He}Tt.la=Pi,Be.la=Tn,ne.Hc=Ne,ne.Gc=xe,ne.ia=43690&xe?0:zt.ia,Bt=!(Ne|xe)}if(0<ut.L&&(ut.wa[ut.Y+ut.ja]=ut.gd[wt.$b][wt.Za],ut.wa[ut.Y+ut.ja].La|=!Bt),St.Ka)return tn(ft,7,"Premature end-of-file encountered.")}if(ia(ft),ut=It,St=1,wt=(lt=ft).D,Tt=0<lt.L&&lt.M>=lt.zb&&lt.M<=lt.Va,lt.Aa==0)t:{if(wt.M=lt.M,wt.uc=Tt,Br(lt,wt),St=1,wt=(ve=lt.D).Nb,Tt=(xe=ih[lt.L])*lt.R,Wt=xe/2*lt.B,$e=16*wt*lt.R,Ti=8*wt*lt.B,Bt=lt.sa,ne=lt.ta-Tt+$e,zt=lt.qa,Et=lt.ra-Wt+Ti,Me=lt.Ha,Be=lt.Ia-Wt+Ti,zi=(je=ve.M)==0,Ne=je>=lt.Va-1,lt.Aa==2&&Br(lt,ve),ve.uc)for(qi=(Ln=lt).D.M,t(Ln.D.uc),ve=Ln.yb;ve<Ln.Hb;++ve){Tn=ve,Pi=qi;var Fn=(Wn=(fn=Ln).D).Nb;He=fn.R;var Wn=Wn.wa[Wn.Y+Tn],bi=fn.sa,ir=fn.ta+16*Fn*He+16*Tn,Ur=Wn.dd,Vn=Wn.tc;if(Vn!=0)if(t(3<=Vn),fn.L==1)0<Tn&&ao(bi,ir,He,Vn+4),Wn.La&&Zi(bi,ir,He,Vn),0<Pi&&ya(bi,ir,He,Vn+4),Wn.La&&yc(bi,ir,He,Vn);else{var bs=fn.B,va=fn.qa,vl=fn.ra+8*Fn*bs+8*Tn,uo=fn.Ha,fn=fn.Ia+8*Fn*bs+8*Tn;Fn=Wn.ld,0<Tn&&(Gu(bi,ir,He,Vn+4,Ur,Fn),pa(va,vl,uo,fn,bs,Vn+4,Ur,Fn)),Wn.La&&(oo(bi,ir,He,Vn,Ur,Fn),ml(va,vl,uo,fn,bs,Vn,Ur,Fn)),0<Pi&&(gl(bi,ir,He,Vn+4,Ur,Fn),mc(va,vl,uo,fn,bs,Vn+4,Ur,Fn)),Wn.La&&(ga(bi,ir,He,Vn,Ur,Fn),ma(va,vl,uo,fn,bs,Vn,Ur,Fn))}}if(lt.ia&&alert("todo:DitherRow"),ut.put!=null){if(ve=16*je,je=16*(je+1),zi?(ut.y=lt.sa,ut.O=lt.ta+$e,ut.f=lt.qa,ut.N=lt.ra+Ti,ut.ea=lt.Ha,ut.W=lt.Ia+Ti):(ve-=xe,ut.y=Bt,ut.O=ne,ut.f=zt,ut.N=Et,ut.ea=Me,ut.W=Be),Ne||(je-=xe),je>ut.o&&(je=ut.o),ut.F=null,ut.J=null,lt.Fa!=null&&0<lt.Fa.length&&ve<je&&(ut.J=io(lt,ut,ve,je-ve),ut.F=lt.mb,ut.F==null&&ut.F.length==0)){St=tn(lt,3,"Could not decode alpha data.");break t}ve<ut.j&&(xe=ut.j-ve,ve=ut.j,t(!(1&xe)),ut.O+=lt.R*xe,ut.N+=lt.B*(xe>>1),ut.W+=lt.B*(xe>>1),ut.F!=null&&(ut.J+=ut.width*xe)),ve<je&&(ut.O+=ut.v,ut.N+=ut.v>>1,ut.W+=ut.v>>1,ut.F!=null&&(ut.J+=ut.v),ut.ka=ve-ut.j,ut.U=ut.va-ut.v,ut.T=je-ve,St=ut.put(ut))}wt+1!=lt.Ic||Ne||(i(lt.sa,lt.ta-Tt,Bt,ne+16*lt.R,Tt),i(lt.qa,lt.ra-Wt,zt,Et+8*lt.B,Wt),i(lt.Ha,lt.Ia-Wt,Me,Be+8*lt.B,Wt))}if(!St)return tn(ft,6,"Output aborted.")}return 1}(u,g)),g.bc!=null&&g.bc(g),b&=1}return b?(u.cb=0,b):0}function Si(u,g,b,L,V){V=u[g+b+32*L]+(V>>3),u[g+b+32*L]=-256&V?0>V?0:255:V}function zs(u,g,b,L,V,j){Si(u,g,0,b,L+V),Si(u,g,1,b,L+j),Si(u,g,2,b,L-j),Si(u,g,3,b,L-V)}function dn(u){return(20091*u>>16)+u}function mi(u,g,b,L){var V,j=0,U=s(16);for(V=0;4>V;++V){var q=u[g+0]+u[g+8],$=u[g+0]-u[g+8],Q=(35468*u[g+4]>>16)-dn(u[g+12]),at=dn(u[g+4])+(35468*u[g+12]>>16);U[j+0]=q+at,U[j+1]=$+Q,U[j+2]=$-Q,U[j+3]=q-at,j+=4,g++}for(V=j=0;4>V;++V)q=(u=U[j+0]+4)+U[j+8],$=u-U[j+8],Q=(35468*U[j+4]>>16)-dn(U[j+12]),Si(b,L,0,0,q+(at=dn(U[j+4])+(35468*U[j+12]>>16))),Si(b,L,1,0,$+Q),Si(b,L,2,0,$-Q),Si(b,L,3,0,q-at),j++,L+=32}function as(u,g,b,L){var V=u[g+0]+4,j=35468*u[g+4]>>16,U=dn(u[g+4]),q=35468*u[g+1]>>16;zs(b,L,0,V+U,u=dn(u[g+1]),q),zs(b,L,1,V+j,u,q),zs(b,L,2,V-j,u,q),zs(b,L,3,V-U,u,q)}function qs(u,g,b,L,V){mi(u,g,b,L),V&&mi(u,g+16,b,L+4)}function ra(u,g,b,L){ms(u,g+0,b,L,1),ms(u,g+32,b,L+128,1)}function Ve(u,g,b,L){var V;for(u=u[g+0]+4,V=0;4>V;++V)for(g=0;4>g;++g)Si(b,L,g,V,u)}function ls(u,g,b,L){u[g+0]&&vi(u,g+0,b,L),u[g+16]&&vi(u,g+16,b,L+4),u[g+32]&&vi(u,g+32,b,L+128),u[g+48]&&vi(u,g+48,b,L+128+4)}function cs(u,g,b,L){var V,j=s(16);for(V=0;4>V;++V){var U=u[g+0+V]+u[g+12+V],q=u[g+4+V]+u[g+8+V],$=u[g+4+V]-u[g+8+V],Q=u[g+0+V]-u[g+12+V];j[0+V]=U+q,j[8+V]=U-q,j[4+V]=Q+$,j[12+V]=Q-$}for(V=0;4>V;++V)U=(u=j[0+4*V]+3)+j[3+4*V],q=j[1+4*V]+j[2+4*V],$=j[1+4*V]-j[2+4*V],Q=u-j[3+4*V],b[L+0]=U+q>>3,b[L+16]=Q+$>>3,b[L+32]=U-q>>3,b[L+48]=Q-$>>3,L+=64}function lr(u,g,b){var L,V=g-32,j=Ui,U=255-u[V-1];for(L=0;L<b;++L){var q,$=j,Q=U+u[g-1];for(q=0;q<b;++q)u[g+q]=$[Q+u[V+q]];g+=32}}function lc(u,g){lr(u,g,4)}function il(u,g){lr(u,g,8)}function cc(u,g){lr(u,g,16)}function cr(u,g){var b;for(b=0;16>b;++b)i(u,g+32*b,u,g-32,16)}function Hs(u,g){var b;for(b=16;0<b;--b)r(u,g,u[g-1],16),g+=32}function Ws(u,g,b){var L;for(L=0;16>L;++L)r(g,b+32*L,u,16)}function Dr(u,g){var b,L=16;for(b=0;16>b;++b)L+=u[g-1+32*b]+u[g+b-32];Ws(L>>5,u,g)}function en(u,g){var b,L=8;for(b=0;16>b;++b)L+=u[g-1+32*b];Ws(L>>4,u,g)}function rl(u,g){var b,L=8;for(b=0;16>b;++b)L+=u[g+b-32];Ws(L>>4,u,g)}function sa(u,g){Ws(128,u,g)}function le(u,g,b){return u+2*g+b+2>>2}function Mr(u,g){var b,L=g-32;for(L=new Uint8Array([le(u[L-1],u[L+0],u[L+1]),le(u[L+0],u[L+1],u[L+2]),le(u[L+1],u[L+2],u[L+3]),le(u[L+2],u[L+3],u[L+4])]),b=0;4>b;++b)i(u,g+32*b,L,0,L.length)}function uc(u,g){var b=u[g-1],L=u[g-1+32],V=u[g-1+64],j=u[g-1+96];Nt(u,g+0,16843009*le(u[g-1-32],b,L)),Nt(u,g+32,16843009*le(b,L,V)),Nt(u,g+64,16843009*le(L,V,j)),Nt(u,g+96,16843009*le(V,j,j))}function Xi(u,g){var b,L=4;for(b=0;4>b;++b)L+=u[g+b-32]+u[g-1+32*b];for(L>>=3,b=0;4>b;++b)r(u,g+32*b,L,4)}function sl(u,g){var b=u[g-1+0],L=u[g-1+32],V=u[g-1+64],j=u[g-1-32],U=u[g+0-32],q=u[g+1-32],$=u[g+2-32],Q=u[g+3-32];u[g+0+96]=le(L,V,u[g-1+96]),u[g+1+96]=u[g+0+64]=le(b,L,V),u[g+2+96]=u[g+1+64]=u[g+0+32]=le(j,b,L),u[g+3+96]=u[g+2+64]=u[g+1+32]=u[g+0+0]=le(U,j,b),u[g+3+64]=u[g+2+32]=u[g+1+0]=le(q,U,j),u[g+3+32]=u[g+2+0]=le($,q,U),u[g+3+0]=le(Q,$,q)}function Vi(u,g){var b=u[g+1-32],L=u[g+2-32],V=u[g+3-32],j=u[g+4-32],U=u[g+5-32],q=u[g+6-32],$=u[g+7-32];u[g+0+0]=le(u[g+0-32],b,L),u[g+1+0]=u[g+0+32]=le(b,L,V),u[g+2+0]=u[g+1+32]=u[g+0+64]=le(L,V,j),u[g+3+0]=u[g+2+32]=u[g+1+64]=u[g+0+96]=le(V,j,U),u[g+3+32]=u[g+2+64]=u[g+1+96]=le(j,U,q),u[g+3+64]=u[g+2+96]=le(U,q,$),u[g+3+96]=le(q,$,$)}function $s(u,g){var b=u[g-1+0],L=u[g-1+32],V=u[g-1+64],j=u[g-1-32],U=u[g+0-32],q=u[g+1-32],$=u[g+2-32],Q=u[g+3-32];u[g+0+0]=u[g+1+64]=j+U+1>>1,u[g+1+0]=u[g+2+64]=U+q+1>>1,u[g+2+0]=u[g+3+64]=q+$+1>>1,u[g+3+0]=$+Q+1>>1,u[g+0+96]=le(V,L,b),u[g+0+64]=le(L,b,j),u[g+0+32]=u[g+1+96]=le(b,j,U),u[g+1+32]=u[g+2+96]=le(j,U,q),u[g+2+32]=u[g+3+96]=le(U,q,$),u[g+3+32]=le(q,$,Q)}function oa(u,g){var b=u[g+0-32],L=u[g+1-32],V=u[g+2-32],j=u[g+3-32],U=u[g+4-32],q=u[g+5-32],$=u[g+6-32],Q=u[g+7-32];u[g+0+0]=b+L+1>>1,u[g+1+0]=u[g+0+64]=L+V+1>>1,u[g+2+0]=u[g+1+64]=V+j+1>>1,u[g+3+0]=u[g+2+64]=j+U+1>>1,u[g+0+32]=le(b,L,V),u[g+1+32]=u[g+0+96]=le(L,V,j),u[g+2+32]=u[g+1+96]=le(V,j,U),u[g+3+32]=u[g+2+96]=le(j,U,q),u[g+3+64]=le(U,q,$),u[g+3+96]=le(q,$,Q)}function Gs(u,g){var b=u[g-1+0],L=u[g-1+32],V=u[g-1+64],j=u[g-1+96];u[g+0+0]=b+L+1>>1,u[g+2+0]=u[g+0+32]=L+V+1>>1,u[g+2+32]=u[g+0+64]=V+j+1>>1,u[g+1+0]=le(b,L,V),u[g+3+0]=u[g+1+32]=le(L,V,j),u[g+3+32]=u[g+1+64]=le(V,j,j),u[g+3+64]=u[g+2+64]=u[g+0+96]=u[g+1+96]=u[g+2+96]=u[g+3+96]=j}function Ks(u,g){var b=u[g-1+0],L=u[g-1+32],V=u[g-1+64],j=u[g-1+96],U=u[g-1-32],q=u[g+0-32],$=u[g+1-32],Q=u[g+2-32];u[g+0+0]=u[g+2+32]=b+U+1>>1,u[g+0+32]=u[g+2+64]=L+b+1>>1,u[g+0+64]=u[g+2+96]=V+L+1>>1,u[g+0+96]=j+V+1>>1,u[g+3+0]=le(q,$,Q),u[g+2+0]=le(U,q,$),u[g+1+0]=u[g+3+32]=le(b,U,q),u[g+1+32]=u[g+3+64]=le(L,b,U),u[g+1+64]=u[g+3+96]=le(V,L,b),u[g+1+96]=le(j,V,L)}function ol(u,g){var b;for(b=0;8>b;++b)i(u,g+32*b,u,g-32,8)}function ur(u,g){var b;for(b=0;8>b;++b)r(u,g,u[g-1],8),g+=32}function Bi(u,g,b){var L;for(L=0;8>L;++L)r(g,b+32*L,u,8)}function hr(u,g){var b,L=8;for(b=0;8>b;++b)L+=u[g+b-32]+u[g-1+32*b];Bi(L>>4,u,g)}function aa(u,g){var b,L=4;for(b=0;8>b;++b)L+=u[g+b-32];Bi(L>>3,u,g)}function Oe(u,g){var b,L=4;for(b=0;8>b;++b)L+=u[g-1+32*b];Bi(L>>3,u,g)}function la(u,g){Bi(128,u,g)}function Ys(u,g,b){var L=u[g-b],V=u[g+0],j=3*(V-L)+of[1020+u[g-2*b]-u[g+b]],U=Yu[112+(j+4>>3)];u[g-b]=Ui[255+L+Yu[112+(j+3>>3)]],u[g+0]=Ui[255+V-U]}function ca(u,g,b,L){var V=u[g+0],j=u[g+b];return er[255+u[g-2*b]-u[g-b]]>L||er[255+j-V]>L}function ua(u,g,b,L){return 4*er[255+u[g-b]-u[g+0]]+er[255+u[g-2*b]-u[g+b]]<=L}function ha(u,g,b,L,V){var j=u[g-3*b],U=u[g-2*b],q=u[g-b],$=u[g+0],Q=u[g+b],at=u[g+2*b],mt=u[g+3*b];return 4*er[255+q-$]+er[255+U-Q]>L?0:er[255+u[g-4*b]-j]<=V&&er[255+j-U]<=V&&er[255+U-q]<=V&&er[255+mt-at]<=V&&er[255+at-Q]<=V&&er[255+Q-$]<=V}function us(u,g,b,L){var V=2*L+1;for(L=0;16>L;++L)ua(u,g+L,b,V)&&Ys(u,g+L,b)}function ji(u,g,b,L){var V=2*L+1;for(L=0;16>L;++L)ua(u,g+L*b,1,V)&&Ys(u,g+L*b,1)}function Nn(u,g,b,L){var V;for(V=3;0<V;--V)us(u,g+=4*b,b,L)}function al(u,g,b,L){var V;for(V=3;0<V;--V)ji(u,g+=4,b,L)}function Or(u,g,b,L,V,j,U,q){for(j=2*j+1;0<V--;){if(ha(u,g,b,j,U))if(ca(u,g,b,q))Ys(u,g,b);else{var $=u,Q=g,at=b,mt=$[Q-2*at],yt=$[Q-at],ft=$[Q+0],It=$[Q+at],wt=$[Q+2*at],lt=27*(St=of[1020+3*(ft-yt)+of[1020+mt-It]])+63>>7,ut=18*St+63>>7,St=9*St+63>>7;$[Q-3*at]=Ui[255+$[Q-3*at]+St],$[Q-2*at]=Ui[255+mt+ut],$[Q-at]=Ui[255+yt+lt],$[Q+0]=Ui[255+ft-lt],$[Q+at]=Ui[255+It-ut],$[Q+2*at]=Ui[255+wt-St]}g+=L}}function zn(u,g,b,L,V,j,U,q){for(j=2*j+1;0<V--;){if(ha(u,g,b,j,U))if(ca(u,g,b,q))Ys(u,g,b);else{var $=u,Q=g,at=b,mt=$[Q-at],yt=$[Q+0],ft=$[Q+at],It=Yu[112+((wt=3*(yt-mt))+4>>3)],wt=Yu[112+(wt+3>>3)],lt=It+1>>1;$[Q-2*at]=Ui[255+$[Q-2*at]+lt],$[Q-at]=Ui[255+mt+wt],$[Q+0]=Ui[255+yt-It],$[Q+at]=Ui[255+ft-lt]}g+=L}}function Xs(u,g,b,L,V,j){Or(u,g,b,1,16,L,V,j)}function dr(u,g,b,L,V,j){Or(u,g,1,b,16,L,V,j)}function Qs(u,g,b,L,V,j){var U;for(U=3;0<U;--U)zn(u,g+=4*b,b,1,16,L,V,j)}function hs(u,g,b,L,V,j){var U;for(U=3;0<U;--U)zn(u,g+=4,1,b,16,L,V,j)}function Js(u,g,b,L,V,j,U,q){Or(u,g,V,1,8,j,U,q),Or(b,L,V,1,8,j,U,q)}function da(u,g,b,L,V,j,U,q){Or(u,g,1,V,8,j,U,q),Or(b,L,1,V,8,j,U,q)}function Zs(u,g,b,L,V,j,U,q){zn(u,g+4*V,V,1,8,j,U,q),zn(b,L+4*V,V,1,8,j,U,q)}function Fr(u,g,b,L,V,j,U,q){zn(u,g+4,1,V,8,j,U,q),zn(b,L+4,1,V,8,j,U,q)}function ds(){this.ba=new Un,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ye,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function to(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function eo(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new I}function ll(){this.xb=this.a=0,this.l=new os,this.ca=new Un,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new eo,this.ab=0,this.gc=o(4,fs),this.Oc=0}function fr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new os,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vr(u,g,b,L,V,j,U){for(u=u==null?0:u[g+0],g=0;g<U;++g)V[j+g]=u+b[L+g]&255,u=V[j+g]}function no(u,g,b,L,V,j,U){var q;if(u==null)Vr(null,null,b,L,V,j,U);else for(q=0;q<U;++q)V[j+q]=u[g+q]+b[L+q]&255}function Zn(u,g,b,L,V,j,U){if(u==null)Vr(null,null,b,L,V,j,U);else{var q,$=u[g+0],Q=$,at=$;for(q=0;q<U;++q)Q=at+($=u[g+q])-Q,at=b[L+q]+(-256&Q?0>Q?0:255:Q)&255,Q=$,V[j+q]=at}}function io(u,g,b,L){var V=g.width,j=g.o;if(t(u!=null&&g!=null),0>b||0>=L||b+L>j)return null;if(!u.Cc){if(u.ga==null){var U;if(u.ga=new fr,(U=u.ga==null)||(U=g.width*g.o,t(u.Gb.length==0),u.Gb=s(U),u.Uc=0,u.Gb==null?U=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,U=1),U=!U),!U){U=u.ga;var q=u.Fa,$=u.P,Q=u.qc,at=u.mb,mt=u.nb,yt=$+1,ft=Q-1,It=U.l;if(t(q!=null&&at!=null&&g!=null),co[0]=null,co[1]=Vr,co[2]=no,co[3]=Zn,U.ca=at,U.tb=mt,U.c=g.width,U.i=g.height,t(0<U.c&&0<U.i),1>=Q)g=0;else if(U.$a=q[$+0]>>0&3,U.Z=q[$+0]>>2&3,U.Lc=q[$+0]>>4&3,$=q[$+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||$)g=0;else if(It.put=Xn,It.ac=En,It.bc=Oi,It.ma=U,It.width=g.width,It.height=g.height,It.Da=g.Da,It.v=g.v,It.va=g.va,It.j=g.j,It.o=g.o,U.$a)t:{t(U.$a==1),g=yn();e:for(;;){if(g==null){g=0;break t}if(t(U!=null),U.mc=g,g.c=U.c,g.i=U.i,g.l=U.l,g.l.ma=U,g.l.width=U.c,g.l.height=U.i,g.a=0,et(g.m,q,yt,ft),!Fi(U.c,U.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&or(g.s)?(U.ic=1,q=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(q),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(U.ic=0,g=Lr(g,U.c)),!g))break e;g=1;break t}U.mc=null,g=0}else g=ft>=U.c*U.i;U=!g}if(U)return null;u.ga.Lc!=1?u.Ga=0:L=j-b}t(u.ga!=null),t(b+L<=j);t:{if(g=(q=u.ga).c,j=q.l.o,q.$a==0){if(yt=u.rc,ft=u.Vc,It=u.Fa,$=u.P+1+b*g,Q=u.mb,at=u.nb+b*g,t($<=u.P+u.qc),q.Z!=0)for(t(co[q.Z]!=null),U=0;U<L;++U)co[q.Z](yt,ft,It,$,Q,at,g),yt=Q,ft=at,at+=g,$+=g;else for(U=0;U<L;++U)i(Q,at,It,$,g),yt=Q,ft=at,at+=g,$+=g;u.rc=yt,u.Vc=ft}else{if(t(q.mc!=null),g=b+L,t((U=q.mc)!=null),t(g<=U.i),U.C>=g)g=1;else if(q.ic||dt(),q.ic){q=U.V,yt=U.Ba,ft=U.c;var wt=U.i,lt=(It=1,$=U.$/ft,Q=U.$%ft,at=U.m,mt=U.s,U.$),ut=ft*wt,St=ft*g,Tt=mt.wc,Et=lt<St?hn(mt,Q,$):null;t(lt<=ut),t(g<=wt),t(or(mt));e:for(;;){for(;!at.h&&lt<St;){if(Q&Tt||(Et=hn(mt,Q,$)),t(Et!=null),it(at),256>(wt=In(Et.G[0],Et.H[0],at)))q[yt+lt]=wt,++lt,++Q>=ft&&(Q=0,++$<=g&&!($%16)&&xi(U,$));else{if(!(280>wt)){It=0;break e}wt=Ai(wt-256,at);var Wt,Bt=In(Et.G[4],Et.H[4],at);if(it(at),!(lt>=(Bt=Qn(ft,Bt=Ai(Bt,at)))&&ut-lt>=wt)){It=0;break e}for(Wt=0;Wt<wt;++Wt)q[yt+lt+Wt]=q[yt+lt+Wt-Bt];for(lt+=wt,Q+=wt;Q>=ft;)Q-=ft,++$<=g&&!($%16)&&xi(U,$);lt<St&&Q&Tt&&(Et=hn(mt,Q,$))}t(at.h==X(at))}xi(U,$>g?g:$);break e}!It||at.h&&lt<ut?(It=0,U.a=at.h?5:3):U.$=lt,g=It}else g=pi(U,U.V,U.Ba,U.c,U.i,g,Cr);if(!g){L=0;break t}}b+L>=j&&(u.Cc=1),L=1}if(!L)return null;if(u.Cc&&((L=u.ga)!=null&&(L.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*V}function y(u,g,b,L,V,j){for(;0<V--;){var U,q=u,$=g+(b?1:0),Q=u,at=g+(b?0:3);for(U=0;U<L;++U){var mt=Q[at+4*U];mt!=255&&(mt*=32897,q[$+4*U+0]=q[$+4*U+0]*mt>>23,q[$+4*U+1]=q[$+4*U+1]*mt>>23,q[$+4*U+2]=q[$+4*U+2]*mt>>23)}g+=j}}function F(u,g,b,L,V){for(;0<L--;){var j;for(j=0;j<b;++j){var U=u[g+2*j+0],q=15&(Q=u[g+2*j+1]),$=4369*q,Q=(240&Q|Q>>4)*$>>16;u[g+2*j+0]=(240&U|U>>4)*$>>16&240|(15&U|U<<4)*$>>16>>4&15,u[g+2*j+1]=240&Q|q}g+=V}}function Z(u,g,b,L,V,j,U,q){var $,Q,at=255;for(Q=0;Q<V;++Q){for($=0;$<L;++$){var mt=u[g+$];j[U+4*$]=mt,at&=mt}g+=b,U+=q}return at!=255}function st(u,g,b,L,V){var j;for(j=0;j<V;++j)b[L+j]=u[g+j]>>8}function dt(){tr=y,Xe=F,Qe=Z,bn=st}function At(u,g,b){A[u]=function(L,V,j,U,q,$,Q,at,mt,yt,ft,It,wt,lt,ut,St,Tt){var Et,Wt=Tt-1>>1,Bt=q[$+0]|Q[at+0]<<16,ne=mt[yt+0]|ft[It+0]<<16;t(L!=null);var zt=3*Bt+ne+131074>>2;for(g(L[V+0],255&zt,zt>>16,wt,lt),j!=null&&(zt=3*ne+Bt+131074>>2,g(j[U+0],255&zt,zt>>16,ut,St)),Et=1;Et<=Wt;++Et){var Me=q[$+Et]|Q[at+Et]<<16,Be=mt[yt+Et]|ft[It+Et]<<16,Ne=Bt+Me+ne+Be+524296,xe=Ne+2*(Me+ne)>>3;zt=xe+Bt>>1,Bt=(Ne=Ne+2*(Bt+Be)>>3)+Me>>1,g(L[V+2*Et-1],255&zt,zt>>16,wt,lt+(2*Et-1)*b),g(L[V+2*Et-0],255&Bt,Bt>>16,wt,lt+(2*Et-0)*b),j!=null&&(zt=Ne+ne>>1,Bt=xe+Be>>1,g(j[U+2*Et-1],255&zt,zt>>16,ut,St+(2*Et-1)*b),g(j[U+2*Et+0],255&Bt,Bt>>16,ut,St+(2*Et+0)*b)),Bt=Me,ne=Be}1&Tt||(zt=3*Bt+ne+131074>>2,g(L[V+Tt-1],255&zt,zt>>16,wt,lt+(Tt-1)*b),j!=null&&(zt=3*ne+Bt+131074>>2,g(j[U+Tt-1],255&zt,zt>>16,ut,St+(Tt-1)*b)))}}function Lt(){nr[Xu]=Zb,nr[Qu]=Tm,nr[xm]=t_,nr[Ju]=Lm,nr[Zu]=Cm,nr[af]=km,nr[Sm]=e_,nr[lf]=Tm,nr[cf]=Lm,nr[th]=Cm,nr[uf]=km}function jt(u){return u&~n_?0>u?0:255:u>>Nm}function d(u,g){return jt((19077*u>>8)+(26149*g>>8)-14234)}function w(u,g,b){return jt((19077*u>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function k(u,g){return jt((19077*u>>8)+(33050*g>>8)-17685)}function z(u,g,b,L,V){L[V+0]=d(u,b),L[V+1]=w(u,g,b),L[V+2]=k(u,g)}function ht(u,g,b,L,V){L[V+0]=k(u,g),L[V+1]=w(u,g,b),L[V+2]=d(u,b)}function vt(u,g,b,L,V){var j=w(u,g,b);g=j<<3&224|k(u,g)>>3,L[V+0]=248&d(u,b)|j>>5,L[V+1]=g}function Ct(u,g,b,L,V){var j=240&k(u,g)|15;L[V+0]=240&d(u,b)|w(u,g,b)>>4,L[V+1]=j}function fe(u,g,b,L,V){L[V+0]=255,z(u,g,b,L,V+1)}function Ae(u,g,b,L,V){ht(u,g,b,L,V),L[V+3]=255}function pe(u,g,b,L,V){z(u,g,b,L,V),L[V+3]=255}function Fe(u,g){return 0>u?0:u>g?g:u}function We(u,g,b){A[u]=function(L,V,j,U,q,$,Q,at,mt){for(var yt=at+(-2&mt)*b;at!=yt;)g(L[V+0],j[U+0],q[$+0],Q,at),g(L[V+1],j[U+0],q[$+0],Q,at+b),V+=2,++U,++$,at+=2*b;1&mt&&g(L[V+0],j[U+0],q[$+0],Q,at)}}function pr(u,g,b){return b==0?u==0?g==0?6:5:g==0?4:0:b}function qn(u,g,b,L,V){switch(u>>>30){case 3:ms(g,b,L,V,0);break;case 2:vn(g,b,L,V);break;case 1:vi(g,b,L,V)}}function Br(u,g){var b,L,V=g.M,j=g.Nb,U=u.oc,q=u.pc+40,$=u.oc,Q=u.pc+584,at=u.oc,mt=u.pc+600;for(b=0;16>b;++b)U[q+32*b-1]=129;for(b=0;8>b;++b)$[Q+32*b-1]=129,at[mt+32*b-1]=129;for(0<V?U[q-1-32]=$[Q-1-32]=at[mt-1-32]=129:(r(U,q-32-1,127,21),r($,Q-32-1,127,9),r(at,mt-32-1,127,9)),L=0;L<u.za;++L){var yt=g.ya[g.aa+L];if(0<L){for(b=-1;16>b;++b)i(U,q+32*b-4,U,q+32*b+12,4);for(b=-1;8>b;++b)i($,Q+32*b-4,$,Q+32*b+4,4),i(at,mt+32*b-4,at,mt+32*b+4,4)}var ft=u.Gd,It=u.Hd+L,wt=yt.ad,lt=yt.Hc;if(0<V&&(i(U,q-32,ft[It].y,0,16),i($,Q-32,ft[It].f,0,8),i(at,mt-32,ft[It].ea,0,8)),yt.Za){var ut=U,St=q-32+16;for(0<V&&(L>=u.za-1?r(ut,St,ft[It].y[15],4):i(ut,St,ft[It+1].y,0,4)),b=0;4>b;b++)ut[St+128+b]=ut[St+256+b]=ut[St+384+b]=ut[St+0+b];for(b=0;16>b;++b,lt<<=2)ut=U,St=q+Dm[b],gr[yt.Ob[b]](ut,St),qn(lt,wt,16*+b,ut,St)}else if(ut=pr(L,V,yt.Ob[0]),lo[ut](U,q),lt!=0)for(b=0;16>b;++b,lt<<=2)qn(lt,wt,16*+b,U,q+Dm[b]);for(b=yt.Gc,ut=pr(L,V,yt.Dd),vs[ut]($,Q),vs[ut](at,mt),lt=wt,ut=$,St=Q,255&(yt=b>>0)&&(170&yt?gc(lt,256,ut,St):Ji(lt,256,ut,St)),yt=at,lt=mt,255&(b>>=8)&&(170&b?gc(wt,320,yt,lt):Ji(wt,320,yt,lt)),V<u.Ub-1&&(i(ft[It].y,0,U,q+480,16),i(ft[It].f,0,$,Q+224,8),i(ft[It].ea,0,at,mt+224,8)),b=8*j*u.B,ft=u.sa,It=u.ta+16*L+16*j*u.R,wt=u.qa,yt=u.ra+8*L+b,lt=u.Ha,ut=u.Ia+8*L+b,b=0;16>b;++b)i(ft,It+b*u.R,U,q+32*b,16);for(b=0;8>b;++b)i(wt,yt+b*u.B,$,Q+32*b,8),i(lt,ut+b*u.B,at,mt+32*b,8)}}function jr(u,g,b,L,V,j,U,q,$){var Q=[0],at=[0],mt=0,yt=$!=null?$.kd:0,ft=$!=null?$:new to;if(u==null||12>b)return 7;ft.data=u,ft.w=g,ft.ha=b,g=[g],b=[b],ft.gb=[ft.gb];t:{var It=g,wt=b,lt=ft.gb;if(t(u!=null),t(wt!=null),t(lt!=null),lt[0]=0,12<=wt[0]&&!e(u,It[0],"RIFF")){if(e(u,It[0]+8,"WEBP")){lt=3;break t}var ut=Vt(u,It[0]+4);if(12>ut||4294967286<ut){lt=3;break t}if(yt&&ut>wt[0]-8){lt=7;break t}lt[0]=ut,It[0]+=12,wt[0]-=12}lt=0}if(lt!=0)return lt;for(ut=0<ft.gb[0],b=b[0];;){t:{var St=u;wt=g,lt=b;var Tt=Q,Et=at,Wt=It=[0];if((zt=mt=[mt])[0]=0,8>lt[0])lt=7;else{if(!e(St,wt[0],"VP8X")){if(Vt(St,wt[0]+4)!=10){lt=3;break t}if(18>lt[0]){lt=7;break t}var Bt=Vt(St,wt[0]+8),ne=1+Ot(St,wt[0]+12);if(2147483648<=ne*(St=1+Ot(St,wt[0]+15))){lt=3;break t}Wt!=null&&(Wt[0]=Bt),Tt!=null&&(Tt[0]=ne),Et!=null&&(Et[0]=St),wt[0]+=18,lt[0]-=18,zt[0]=1}lt=0}}if(mt=mt[0],It=It[0],lt!=0)return lt;if(wt=!!(2&It),!ut&&mt)return 3;if(j!=null&&(j[0]=!!(16&It)),U!=null&&(U[0]=wt),q!=null&&(q[0]=0),U=Q[0],It=at[0],mt&&wt&&$==null){lt=0;break}if(4>b){lt=7;break}if(ut&&mt||!ut&&!mt&&!e(u,g[0],"ALPH")){b=[b],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];t:{Bt=u,lt=g,ut=b;var zt=ft.gb;Tt=ft.na,Et=ft.P,Wt=ft.Sa,ne=22,t(Bt!=null),t(ut!=null),St=lt[0];var Me=ut[0];for(t(Tt!=null),t(Wt!=null),Tt[0]=null,Et[0]=null,Wt[0]=0;;){if(lt[0]=St,ut[0]=Me,8>Me){lt=7;break t}var Be=Vt(Bt,St+4);if(4294967286<Be){lt=3;break t}var Ne=8+Be+1&-2;if(ne+=Ne,0<zt&&ne>zt){lt=3;break t}if(!e(Bt,St,"VP8 ")||!e(Bt,St,"VP8L")){lt=0;break t}if(Me[0]<Ne){lt=7;break t}e(Bt,St,"ALPH")||(Tt[0]=Bt,Et[0]=St+8,Wt[0]=Be),St+=Ne,Me-=Ne}}if(b=b[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],lt!=0)break}b=[b],ft.Ja=[ft.Ja],ft.xa=[ft.xa];t:if(zt=u,lt=g,ut=b,Tt=ft.gb[0],Et=ft.Ja,Wt=ft.xa,Bt=lt[0],St=!e(zt,Bt,"VP8 "),ne=!e(zt,Bt,"VP8L"),t(zt!=null),t(ut!=null),t(Et!=null),t(Wt!=null),8>ut[0])lt=7;else{if(St||ne){if(zt=Vt(zt,Bt+4),12<=Tt&&zt>Tt-12){lt=3;break t}if(yt&&zt>ut[0]-8){lt=7;break t}Et[0]=zt,lt[0]+=8,ut[0]-=8,Wt[0]=ne}else Wt[0]=5<=ut[0]&&zt[Bt+0]==47&&!(zt[Bt+4]>>5),Et[0]=ut[0];lt=0}if(b=b[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],g=g[0],lt!=0)break;if(4294967286<ft.Ja)return 3;if(q==null||wt||(q[0]=ft.xa?2:1),U=[U],It=[It],ft.xa){if(5>b){lt=7;break}q=U,yt=It,wt=j,u==null||5>b?u=0:5<=b&&u[g+0]==47&&!(u[g+4]>>5)?(ut=[0],zt=[0],Tt=[0],et(Et=new M,u,g,b),$t(Et,ut,zt,Tt)?(q!=null&&(q[0]=ut[0]),yt!=null&&(yt[0]=zt[0]),wt!=null&&(wt[0]=Tt[0]),u=1):u=0):u=0}else{if(10>b){lt=7;break}q=It,u==null||10>b||!ea(u,g+3,b-3)?u=0:(yt=u[g+0]|u[g+1]<<8|u[g+2]<<16,wt=16383&(u[g+7]<<8|u[g+6]),u=16383&(u[g+9]<<8|u[g+8]),1&yt||3<(yt>>1&7)||!(yt>>4&1)||yt>>5>=ft.Ja||!wt||!u?u=0:(U&&(U[0]=wt),q&&(q[0]=u),u=1))}if(!u||(U=U[0],It=It[0],mt&&(Q[0]!=U||at[0]!=It)))return 3;$!=null&&($[0]=ft,$.offset=g-$.w,t(4294967286>g-$.w),t($.offset==$.ha-b));break}return lt==0||lt==7&&mt&&$==null?(j!=null&&(j[0]|=ft.na!=null&&0<ft.na.length),L!=null&&(L[0]=U),V!=null&&(V[0]=It),0):lt}function hc(u,g,b){var L=g.width,V=g.height,j=0,U=0,q=L,$=V;if(g.Da=u!=null&&0<u.Da,g.Da&&(q=u.cd,$=u.bd,j=u.v,U=u.j,11>b||(j&=-2,U&=-2),0>j||0>U||0>=q||0>=$||j+q>L||U+$>V))return 0;if(g.v=j,g.j=U,g.va=j+q,g.o=U+$,g.U=q,g.T=$,g.da=u!=null&&0<u.da,g.da){if(!he(q,$,b=[u.ib],j=[u.hb]))return 0;g.ib=b[0],g.hb=j[0]}return g.ob=u!=null&&u.ob,g.Kb=u==null||!u.Sd,g.da&&(g.ob=g.ib<3*L/4&&g.hb<3*V/4,g.Kb=0),1}function dc(u){if(u==null)return 2;if(11>u.S){var g=u.f.RGBA;g.fb+=(u.height-1)*g.A,g.A=-g.A}else g=u.f.kb,u=u.height,g.O+=(u-1)*g.fa,g.fa=-g.fa,g.N+=(u-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(u-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(u-1)*g.lb,g.lb=-g.lb);return 0}function cl(u,g,b,L){if(L==null||0>=u||0>=g)return 2;if(b!=null){if(b.Da){var V=b.cd,j=b.bd,U=-2&b.v,q=-2&b.j;if(0>U||0>q||0>=V||0>=j||U+V>u||q+j>g)return 2;u=V,g=j}if(b.da){if(!he(u,g,V=[b.ib],j=[b.hb]))return 2;u=V[0],g=j[0]}}L.width=u,L.height=g;t:{var $=L.width,Q=L.height;if(u=L.S,0>=$||0>=Q||!(u>=Xu&&13>u))u=2;else{if(0>=L.Rd&&L.sd==null){U=j=V=g=0;var at=(q=$*Mm[u])*Q;if(11>u||(j=(Q+1)/2*(g=($+1)/2),u==12&&(U=(V=$)*Q)),(Q=s(at+2*j+U))==null){u=1;break t}L.sd=Q,11>u?(($=L.f.RGBA).eb=Q,$.fb=0,$.A=q,$.size=at):(($=L.f.kb).y=Q,$.O=0,$.fa=q,$.Fd=at,$.f=Q,$.N=0+at,$.Ab=g,$.Cd=j,$.ea=Q,$.W=0+at+j,$.Db=g,$.Ed=j,u==12&&($.F=Q,$.J=0+at+2*j),$.Tc=U,$.lb=V)}if(g=1,V=L.S,j=L.width,U=L.height,V>=Xu&&13>V)if(11>V)u=L.f.RGBA,g&=(q=Math.abs(u.A))*(U-1)+j<=u.size,g&=q>=j*Mm[V],g&=u.eb!=null;else{u=L.f.kb,q=(j+1)/2,at=(U+1)/2,$=Math.abs(u.fa),Q=Math.abs(u.Ab);var mt=Math.abs(u.Db),yt=Math.abs(u.lb),ft=yt*(U-1)+j;g&=$*(U-1)+j<=u.Fd,g&=Q*(at-1)+q<=u.Cd,g=(g&=mt*(at-1)+q<=u.Ed)&$>=j&Q>=q&mt>=q,g&=u.y!=null,g&=u.f!=null,g&=u.ea!=null,V==12&&(g&=yt>=j,g&=ft<=u.Tc,g&=u.F!=null)}else g=0;u=g?0:2}}return u!=0||b!=null&&b.fd&&(u=dc(L)),u}var Hn=64,ul=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hl=24,dl=32,fc=8,Ei=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Mt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(u){return u},A.Predictor2=function(u,g,b){return g[b+0]},A.Predictor3=function(u,g,b){return g[b+1]},A.Predictor4=function(u,g,b){return g[b-1]},A.Predictor5=function(u,g,b){return Ut(Ut(u,g[b+1]),g[b+0])},A.Predictor6=function(u,g,b){return Ut(u,g[b-1])},A.Predictor7=function(u,g,b){return Ut(u,g[b+0])},A.Predictor8=function(u,g,b){return Ut(g[b-1],g[b+0])},A.Predictor9=function(u,g,b){return Ut(g[b+0],g[b+1])},A.Predictor10=function(u,g,b){return Ut(Ut(u,g[b-1]),Ut(g[b+0],g[b+1]))},A.Predictor11=function(u,g,b){var L=g[b+0];return 0>=de(L>>24&255,u>>24&255,(g=g[b-1])>>24&255)+de(L>>16&255,u>>16&255,g>>16&255)+de(L>>8&255,u>>8&255,g>>8&255)+de(255&L,255&u,255&g)?L:u},A.Predictor12=function(u,g,b){var L=g[b+0];return(Qt((u>>24&255)+(L>>24&255)-((g=g[b-1])>>24&255))<<24|Qt((u>>16&255)+(L>>16&255)-(g>>16&255))<<16|Qt((u>>8&255)+(L>>8&255)-(g>>8&255))<<8|Qt((255&u)+(255&L)-(255&g)))>>>0},A.Predictor13=function(u,g,b){var L=g[b-1];return(ae((u=Ut(u,g[b+0]))>>24&255,L>>24&255)<<24|ae(u>>16&255,L>>16&255)<<16|ae(u>>8&255,L>>8&255)<<8|ae(u>>0&255,L>>0&255))>>>0};var sf=A.PredictorAdd0;A.PredictorAdd1=Jt,Mt("Predictor2","PredictorAdd2"),Mt("Predictor3","PredictorAdd3"),Mt("Predictor4","PredictorAdd4"),Mt("Predictor5","PredictorAdd5"),Mt("Predictor6","PredictorAdd6"),Mt("Predictor7","PredictorAdd7"),Mt("Predictor8","PredictorAdd8"),Mt("Predictor9","PredictorAdd9"),Mt("Predictor10","PredictorAdd10"),Mt("Predictor11","PredictorAdd11"),Mt("Predictor12","PredictorAdd12"),Mt("Predictor13","PredictorAdd13");var pc=A.PredictorAdd2;_e("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),_e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Hu,Qi=A.ColorIndexInverseTransform,fl=A.MapARGB,Wu=A.VP8LColorIndexInverseTransformAlpha,$u=A.MapAlpha,ro=A.VP8LPredictorsAdd=[];ro.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var fa,Ii,yi,so,ps,gs,pl,ms,vn,gc,vi,Ji,gl,Gu,mc,pa,ga,oo,ma,ml,ya,ao,yc,Zi,tr,Xe,Qe,bn,Rn=s(511),ys=s(2041),vc=s(225),yl=s(767),Ku=0,of=ys,Yu=vc,Ui=yl,er=Rn,Xu=0,Qu=1,xm=2,Ju=3,Zu=4,af=5,Sm=6,lf=7,cf=8,th=9,uf=10,Bb=[2,3,7],jb=[3,3,11],Em=[280,256,256,256,40],Ub=[0,1,1,1,0],zb=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Hb=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wb=8,hf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],df=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bc=null,$b=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Gb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Im=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kb=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Xb=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lo=[],gr=[],vs=[],Jb=1,Pm=2,co=[],nr=[];At("UpsampleRgbLinePair",z,3),At("UpsampleBgrLinePair",ht,3),At("UpsampleRgbaLinePair",pe,4),At("UpsampleBgraLinePair",Ae,4),At("UpsampleArgbLinePair",fe,4),At("UpsampleRgba4444LinePair",Ct,2),At("UpsampleRgb565LinePair",vt,2);var Zb=A.UpsampleRgbLinePair,t_=A.UpsampleBgrLinePair,Tm=A.UpsampleRgbaLinePair,Lm=A.UpsampleBgraLinePair,Cm=A.UpsampleArgbLinePair,km=A.UpsampleRgba4444LinePair,e_=A.UpsampleRgb565LinePair,eh=16,nh=1<<eh-1,_c=-227,ff=482,Nm=6,n_=(256<<Nm)-1,Rm=0,i_=s(256),r_=s(256),s_=s(256),o_=s(256),a_=s(ff-_c),l_=s(ff-_c);We("YuvToRgbRow",z,3),We("YuvToBgrRow",ht,3),We("YuvToRgbaRow",pe,4),We("YuvToBgraRow",Ae,4),We("YuvToArgbRow",fe,4),We("YuvToRgba4444Row",Ct,2),We("YuvToRgb565Row",vt,2);var Dm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ih=[0,2,8],c_=[8,7,6,4,4,2,2,2,1,1,1,1],u_=1;this.WebPDecodeRGBA=function(u,g,b,L,V){var j=Qu,U=new ds,q=new Un;U.ba=q,q.S=j,q.width=[q.width],q.height=[q.height];var $=q.width,Q=q.height,at=new Mi;if(at==null||u==null)var mt=2;else t(at!=null),mt=jr(u,g,b,at.width,at.height,at.Pd,at.Qd,at.format,null);if(mt!=0?$=0:($!=null&&($[0]=at.width[0]),Q!=null&&(Q[0]=at.height[0]),$=1),$){q.width=q.width[0],q.height=q.height[0],L!=null&&(L[0]=q.width),V!=null&&(V[0]=q.height);t:{if(L=new os,(V=new to).data=u,V.w=g,V.ha=b,V.kd=1,g=[0],t(V!=null),((u=jr(V.data,V.w,V.ha,null,null,null,g,null,V))==0||u==7)&&g[0]&&(u=4),(g=u)==0){if(t(U!=null),L.data=V.data,L.w=V.w+V.offset,L.ha=V.ha-V.offset,L.put=Xn,L.ac=En,L.bc=Oi,L.ma=U,V.xa){if((u=yn())==null){U=1;break t}if(function(yt,ft){var It=[0],wt=[0],lt=[0];e:for(;;){if(yt==null)return 0;if(ft==null)return yt.a=2,0;if(yt.l=ft,yt.a=0,et(yt.m,ft.data,ft.w,ft.ha),!$t(yt.m,It,wt,lt)){yt.a=3;break e}if(yt.xb=Pm,ft.width=It[0],ft.height=wt[0],!Fi(It[0],wt[0],1,yt,null))break e;return 1}return t(yt.a!=0),0}(u,L)){if(L=(g=cl(L.width,L.height,U.Oa,U.ba))==0){e:{L=u;n:for(;;){if(L==null){L=0;break e}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((b=L.l)!=null),t((V=b.ma)!=null),L.xb!=0){if(L.ca=V.ba,L.tb=V.tb,t(L.ca!=null),!hc(V.Oa,b,Ju)){L.a=2;break n}if(!Lr(L,b.width)||b.da)break n;if((b.da||Te(L.ca.S))&&dt(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&dt()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!te(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!pi(L,L.V,L.Ba,L.c,L.i,b.o,js))break n;V.Dc=L.Ma,L=1;break e}t(L.a!=0),L=0}L=!L}L&&(g=u.a)}else g=u.a}else{if((u=new ta)==null){U=1;break t}if(u.Fa=V.na,u.P=V.P,u.qc=V.Sa,na(u,L)){if((g=cl(L.width,L.height,U.Oa,U.ba))==0){if(u.Aa=0,b=U.Oa,t((V=u)!=null),b!=null){if(0<($=0>($=b.Md)?0:100<$?255:255*$/100)){for(Q=at=0;4>Q;++Q)12>(mt=V.pb[Q]).lc&&(mt.ia=$*c_[0>mt.lc?0:mt.lc]>>3),at|=mt.ia;at&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=b.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}nl(u,L)||(g=u.a)}}else g=u.a}g==0&&U.Oa!=null&&U.Oa.fd&&(g=dc(U.ba))}U=g}j=U!=0?null:11>j?q.f.RGBA.eb:q.f.kb.y}else j=null;return j};var Mm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(A,C){for(var D="",E=0;E<4;E++)D+=String.fromCharCode(A[C++]);return D}function h(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16)>>>0}function f(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16|A[C+3]<<24)>>>0}new l;var m=[0],p=[0],v=[],_=new l,S=n,x=function(A,C){var D={},E=0,I=!1,R=0,G=0;if(D.frames=[],!function(H,X,tt,it){for(var pt=0;pt<it;pt++)if(H[X+pt]!=tt.charCodeAt(pt))return!0;return!1}(A,C,"RIFF",4)){var ot,Y;for(f(A,C+=4),C+=8;C<A.length;){var K=c(A,C),et=f(A,C+=4);C+=4;var J=et+(1&et);switch(K){case"VP8 ":case"VP8L":D.frames[E]===void 0&&(D.frames[E]={}),(M=D.frames[E]).src_off=I?G:C-8,M.src_size=R+et+8,E++,I&&(I=!1,R=0,G=0);break;case"VP8X":(M=D.header={}).feature_flags=A[C];var ct=C+4;M.canvas_width=1+h(A,ct),ct+=3,M.canvas_height=1+h(A,ct),ct+=3;break;case"ALPH":I=!0,R=J+8,G=C-8;break;case"ANIM":(M=D.header).bgcolor=f(A,C),ct=C+4,M.loop_count=(ot=A)[(Y=ct)+0]<<0|ot[Y+1]<<8,ct+=2;break;case"ANMF":var _t,M;(M=D.frames[E]={}).offset_x=2*h(A,C),C+=3,M.offset_y=2*h(A,C),C+=3,M.width=1+h(A,C),C+=3,M.height=1+h(A,C),C+=3,M.duration=h(A,C),C+=3,_t=A[C++],M.dispose=1&_t,M.blend=_t>>1&1}K!="ANMF"&&(C+=J)}return D}}(S,0);x.response=S,x.rgbaoutput=!0,x.dataurl=!1;var T=x.header?x.header:null,N=x.frames?x.frames:null;if(T){T.loop_counter=T.loop_count,m=[T.canvas_height],p=[T.canvas_width];for(var O=0;O<N.length&&N[O].blend!=0;O++);}var B=N[0],W=_.WebPDecodeRGBA(S,B.src_off,B.src_size,p,m);B.rgba=W,B.imgwidth=p[0],B.imgheight=m[0];for(var P=0;P<p[0]*m[0]*4;P++)v[P]=W[P];return this.width=p,this.height=m,this.data=v,this}(function(n){var t=function(){return typeof Mp=="function"},e=function(m,p,v,_){var S=4,x=o;switch(_){case n.image_compression.FAST:S=1,x=s;break;case n.image_compression.MEDIUM:S=6,x=a;break;case n.image_compression.SLOW:S=9,x=l}m=i(m,p,v,x);var T=Mp(m,{level:S});return n.__addimage__.arrayBufferToBinaryString(T)},i=function(m,p,v,_){for(var S,x,T,N=m.length/p,O=new Uint8Array(m.length+N),B=h(),W=0;W<N;W+=1){if(T=W*p,S=m.subarray(T,T+p),_)O.set(_(S,v,x),T+W);else{for(var P,A=B.length,C=[];P<A;P+=1)C[P]=B[P](S,v,x);var D=f(C.concat());O.set(C[D],T+W)}x=S}return O},r=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var v,_=[],S=m.length;_[0]=1;for(var x=0;x<S;x+=1)v=m[x-p]||0,_[x+1]=m[x]-v+256&255;return _},o=function(m,p,v){var _,S=[],x=m.length;S[0]=2;for(var T=0;T<x;T+=1)_=v&&v[T]||0,S[T+1]=m[T]-_+256&255;return S},a=function(m,p,v){var _,S,x=[],T=m.length;x[0]=3;for(var N=0;N<T;N+=1)_=m[N-p]||0,S=v&&v[N]||0,x[N+1]=m[N]+256-(_+S>>>1)&255;return x},l=function(m,p,v){var _,S,x,T,N=[],O=m.length;N[0]=4;for(var B=0;B<O;B+=1)_=m[B-p]||0,S=v&&v[B]||0,x=v&&v[B-p]||0,T=c(_,S,x),N[B+1]=m[B]-T+256&255;return N},c=function(m,p,v){if(m===p&&p===v)return m;var _=Math.abs(p-v),S=Math.abs(m-v),x=Math.abs(m+p-v-v);return _<=S&&_<=x?m:S<=x?p:v},h=function(){return[r,s,o,a,l]},f=function(m){var p=m.map(function(v){return v.reduce(function(_,S){return _+Math.abs(S)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(m,p,v,_){var S,x,T,N,O,B,W,P,A,C,D,E,I,R,G,ot=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(T=new mP(m)).imgData,x=T.bits,S=T.colorSpace,O=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){A=(P=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,D=new Uint8Array(A*T.colors),C=new Uint8Array(A);var K,et=T.pixelBitlength-T.bits;for(R=0,G=0;R<A;R++){for(I=P[R],K=0;K<et;)D[G++]=I>>>K&255,K+=T.bits;C[R]=I>>>K&255}}if(T.bits===16){A=(P=new Uint32Array(T.decodePixels().buffer)).length,D=new Uint8Array(A*(32/T.pixelBitlength)*T.colors),C=new Uint8Array(A*(32/T.pixelBitlength)),E=T.colors>1,R=0,G=0;for(var J=0;R<A;)I=P[R++],D[G++]=I>>>0&255,E&&(D[G++]=I>>>16&255,I=P[R++],D[G++]=I>>>0&255),C[J++]=I>>>16&255;x=8}_!==n.image_compression.NONE&&t()?(m=e(D,T.width*T.colors,T.colors,_),W=e(C,T.width,1,_)):(m=D,W=C,ot=void 0)}if(T.colorType===3&&(S=this.color_spaces.INDEXED,B=T.palette,T.transparency.indexed)){var ct=T.transparency.indexed,_t=0;for(R=0,A=ct.length;R<A;++R)_t+=ct[R];if((_t/=255)===A-1&&ct.indexOf(0)!==-1)N=[ct.indexOf(0)];else if(_t!==A){for(P=T.decodePixels(),C=new Uint8Array(P.length),R=0,A=P.length;R<A;R++)C[R]=ct[P[R]];W=e(C,T.width,1)}}var M=function(H){var X;switch(H){case n.image_compression.FAST:X=11;break;case n.image_compression.MEDIUM:X=13;break;case n.image_compression.SLOW:X=14;break;default:X=12}return X}(_);return ot===this.decode.FLATE_DECODE&&(Y="/Predictor "+M+" "),Y+="/Colors "+O+" /BitsPerComponent "+x+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:v,data:m,index:p,filter:ot,decodeParameters:Y,transparency:N,palette:B,sMask:W,predictor:M,width:T.width,height:T.height,bitsPerComponent:x,colorSpace:S}}}})(ie.API),function(n){n.processGIF89A=function(t,e,i,r){var s=new yP(t),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new Hf(100).encode(c,100);return n.processJPEG.call(this,h,e,i,r)},n.processGIF87A=n.processGIF89A}(ie.API),vr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Ge.log("bit decode error:"+e)}},vr.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}e!==0&&(this.pos+=4-e)}},vr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<n;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},vr.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},vr.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,h=i*this.width*4+4*r;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=n}},vr.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,c=(o>>11)/t*255|0,h=r*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},vr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},vr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},vr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,r){var s=new vr(t,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Hf(100).encode(l,100);return n.processJPEG.call(this,c,e,i,r)}}(ie.API),R1.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,r){var s=new R1(t),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Hf(100).encode(l,100);return n.processJPEG.call(this,c,e,i,r)}}(ie.API),ie.API.processRGBA=function(n,t,e){for(var i=n.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var h=i[c],f=i[c+1],m=i[c+2],p=i[c+3];s[a++]=h,s[a++]=f,s[a++]=m,o[l++]=p}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ie.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Sl=ie.API,Eh=Sl.getCharWidthsArray=function(n,t){var e,i,r=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=t.kerning?t.kerning:r.metadata.Unicode.kerning,h=c.fof?c.fof:1,f=t.doKerning!==!1,m=0,p=n.length,v=0,_=a[0]||l,S=[];for(e=0;e<p;e++)i=n.charCodeAt(e),typeof r.metadata.widthOfString=="function"?S.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(m=f&&ze(c[i])==="object"&&!isNaN(parseInt(c[i][v],10))?c[i][v]/h:0,S.push((a[i]||_)/l+m)),v=i;return S},L1=Sl.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return Sl.processArabic&&(n=Sl.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,r)/e:Eh.apply(this,arguments).reduce(function(s,o){return s+o},0)},C1=function(n,t,e,i){for(var r=[],s=0,o=n.length,a=0;s!==o&&a+t[s]<e;)a+=t[s],s++;r.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+t[s]>i&&(r.push(n.slice(l,s)),a=0,l=s),a+=t[s],s++;return l!==s&&r.push(n.slice(l,s)),r},k1=function(n,t,e){e||(e={});var i,r,s,o,a,l,c,h=[],f=[h],m=e.textIndent||0,p=0,v=0,_=n.split(" "),S=Eh.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?_[0].length+2:e.lineIndent||0){var x=Array(l).join(" "),T=[];_.map(function(O){(O=O.split(/\s*\n/)).length>1?T=T.concat(O.map(function(B,W){return(W&&B.length?`
`:"")+B})):T.push(O[0])}),_=T,l=L1.apply(this,[x,e])}for(s=0,o=_.length;s<o;s++){var N=0;if(i=_[s],l&&i[0]==`
`&&(i=i.substr(1),N=1),m+p+(v=(r=Eh.apply(this,[i,e])).reduce(function(O,B){return O+B},0))>t||N){if(v>t){for(a=C1.apply(this,[i,r,t-(m+p),t]),h.push(a.shift()),h=[a.pop()];a.length;)f.push([a.shift()]);v=r.slice(i.length-(h[0]?h[0].length:0)).reduce(function(O,B){return O+B},0)}else h=[i];f.push(h),m=v+l,p=S}else h.push(i),m+=p+v,p=S}return c=l?function(O,B){return(B?x:"")+O.join(" ")}:function(O){return O.join(" ")},f.map(c)},Sl.splitTextToSize=function(n,t,e){var i,r=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/r;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=e.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(k1.apply(this,[i[a],o,s]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},r=0;r<t.length;r++)e[t[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=t[r];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=n.__fontmetrics__.compress=function(f){var m,p,v,_,S=["{"];for(var x in f){if(m=f[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=s(x).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof m=="number")m<0?(v=s(m).slice(3),_="-"):(v=s(m).slice(2),_=""),v=_+v.slice(0,-1)+i[v.slice(-1)];else{if(ze(m)!=="object")throw new Error("Don't know what to do with value type "+ze(m)+".");v=o(m)}S.push(p+v)}return S.push("}"),S.join("")},a=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,_,S={},x=1,T=S,N=[],O="",B="",W=f.length-1,P=1;P<W;P+=1)(_=f[P])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(N.push([T,v]),T={},v=void 0):_=="}"?((p=N.pop())[0][p[1]]=T,v=void 0,T=p[0]):_=="-"?x=-1:v===void 0?e.hasOwnProperty(_)?(O+=e[_],v=parseInt(O,16)*x,x=1,O=""):O+=_:e.hasOwnProperty(_)?(B+=e[_],T[v]=parseInt(B,16)*x,x=1,v=void 0,B=""):B+=_;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var m=f.font,p=h.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=c.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(ie.API),function(n){var t=function(e){for(var i=e.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=e.charCodeAt(s);return r};n.API.events.push(["addFont",function(e){var i=void 0,r=e.font,s=e.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Qc(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(r,i)}}])}(ie),function(n){function t(){return(oe.canvg?Promise.resolve(oe.canvg):Cp(()=>import("./index.es-C8nWIZwF.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}ie.API.addSvgAsImage=function(e,i,r,s,o,a,l,c){if(isNaN(i)||isNaN(r))throw Ge.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ge.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(f,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(h.toDataURL("image/jpeg",1),i,r,s,o,l,c)})}}(),ie.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,e);return this},ie.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,f=0;function m(v,_){var S,x=!1;for(S=0;S<v.length;S+=1)v[S]===_&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var p=a.length;for(f=0;f<p;f+=1)e[a[f]].value=e[a[f]].defaultValue,e[a[f]].explicitSet=!1}if(ze(n)==="object"){for(r in n)if(s=n[r],m(a,r)&&s!==void 0){if(e[r].type==="boolean"&&typeof s=="boolean")e[r].value=s;else if(e[r].type==="name"&&m(e[r].valueSet,s))e[r].value=s;else if(e[r].type==="integer"&&Number.isInteger(s))e[r].value=s;else if(e[r].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}e[r].value="["+l.join(" ")+"]"}else e[r].value=e[r].defaultValue;e[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,_=[];for(v in e)e[v].explicitSet===!0&&(e[v].type==="name"?_.push("/"+v+" /"+e[v].value):_.push("/"+v+" "+e[v].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(ie.API),function(n){var t=n.API,e=t.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],f=0,m=s.length;f<m;++f){if(a=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(f),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},i=function(s){var o,a,l,c,h,f,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,m=(a=Object.keys(s).sort(function(p,v){return p-v})).length;f<m;f++)o=a[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var f=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var _=c();h({data:p,addLength1:!0,objectId:_}),l("endobj");var S=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+kl(a.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+kl(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+n.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+kl(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var f=a.metadata.rawData,m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var v=c();h({data:m,addLength1:!0,objectId:v}),l("endobj");var _=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var S=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+kl(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+kl(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var r=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},f=s.mutex||{},m=f.pdfEscape,p=f.activeFontKey,v=f.fonts,_=p,S="",x=0,T="",N=v[_].encoding;if(v[_].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:f};for(T=a,_=p,Array.isArray(a)&&(T=a[0]),x=0;x<T.length;x+=1)v[_].metadata.hasOwnProperty("cmap")&&(o=v[_].metadata.cmap.unicode.codeMap[T[x].charCodeAt(0)]),o||T[x].charCodeAt(0)<256&&v[_].metadata.hasOwnProperty("Unicode")?S+=T[x]:S+="";var O="";return parseInt(_.slice(1))<14||N==="WinAnsiEncoding"?O=m(S,_).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(O=e(S,v[_])),f.isHex=!0,{text:O,x:l,y:c,options:h,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([r(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(r(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=r(Object.assign({},l,{text:o})).text}])}(ie),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(ie.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,s,o,a,l,c,h,f=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,N=0;this.__bidiEngine__={};var O=function(E){var I=E.charCodeAt(),R=I>>8,G=_[R];return G!==void 0?f[256*G+(255&I)]:R===252||R===253?"AL":x.test(R)?"L":R===8?"R":"N"},B=function(E){for(var I,R=0;R<E.length;R++){if((I=O(E.charAt(R)))==="L")return!1;if(I==="R")return!0}return!1},W=function(E,I,R,G){var ot,Y,K,et,J=I[G];switch(J){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(J="AN");break;case"AL":T=!0,J="R";break;case"WS":J="N";break;case"CS":G<1||G+1>=I.length||(ot=R[G-1])!=="EN"&&ot!=="AN"||(Y=I[G+1])!=="EN"&&Y!=="AN"?J="N":T&&(Y="AN"),J=Y===ot?Y:"N";break;case"ES":J=(ot=G>0?R[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&R[G-1]==="EN"){J="EN";break}if(T){J="N";break}for(K=G+1,et=I.length;K<et&&I[K]==="ET";)K++;J=K<et&&I[K]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(et=I.length,K=G+1;K<et&&I[K]==="NSM";)K++;if(K<et){var ct=E[G],_t=ct>=1425&&ct<=2303||ct===64286;if(ot=I[K],_t&&(ot==="R"||ot==="AL")){J="R";break}}}J=G<1||(ot=I[G-1])==="B"?"N":R[G-1];break;case"B":T=!1,r=!0,J=N;break;case"S":s=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":J="N"}return J},P=function(E,I,R){var G=E.split("");return R&&A(G,R,{hiLevel:N}),G.reverse(),I&&I.reverse(),G.join("")},A=function(E,I,R){var G,ot,Y,K,et,J=-1,ct=E.length,_t=0,M=[],H=N?p:m,X=[];for(T=!1,r=!1,s=!1,ot=0;ot<ct;ot++)X[ot]=O(E[ot]);for(Y=0;Y<ct;Y++){if(et=_t,M[Y]=W(E,X,M,Y),G=240&(_t=H[et][v[M[Y]]]),_t&=15,I[Y]=K=H[_t][5],G>0)if(G===16){for(ot=J;ot<Y;ot++)I[ot]=1;J=-1}else J=-1;if(H[_t][6])J===-1&&(J=Y);else if(J>-1){for(ot=J;ot<Y;ot++)I[ot]=K;J=-1}X[Y]==="B"&&(I[Y]=0),R.hiLevel|=K}s&&function(tt,it,pt){for(var gt=0;gt<pt;gt++)if(tt[gt]==="S"){it[gt]=N;for(var bt=gt-1;bt>=0&&tt[bt]==="WS";bt--)it[bt]=N}}(X,I,ct)},C=function(E,I,R,G,ot){if(!(ot.hiLevel<E)){if(E===1&&N===1&&!r)return I.reverse(),void(R&&R.reverse());for(var Y,K,et,J,ct=I.length,_t=0;_t<ct;){if(G[_t]>=E){for(et=_t+1;et<ct&&G[et]>=E;)et++;for(J=_t,K=et-1;J<K;J++,K--)Y=I[J],I[J]=I[K],I[K]=Y,R&&(Y=R[J],R[J]=R[K],R[K]=Y);_t=et}_t++}}},D=function(E,I,R){var G=E.split(""),ot={hiLevel:N};return R||(R=[]),A(G,R,ot),function(Y,K,et){if(et.hiLevel!==0&&h)for(var J,ct=0;ct<Y.length;ct++)K[ct]===1&&(J=S.indexOf(Y[ct]))>=0&&(Y[ct]=S[J+1])}(G,R,ot),C(2,G,I,R,ot),C(1,G,I,R,ot),G.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,R){if(function(ot,Y){if(Y)for(var K=0;K<ot.length;K++)Y[K]=K;a===void 0&&(a=B(ot)),c===void 0&&(c=B(ot))}(E,I),o||!l||c)if(o&&l&&a^c)N=a?1:0,E=P(E,I,R);else if(!o&&l&&c)N=a?1:0,E=D(E,I,R),E=P(E,I);else if(!o||a||l||c){if(o&&!l&&a^c)E=P(E,I),a?(N=0,E=D(E,I,R)):(N=1,E=D(E,I,R),E=P(E,I));else if(o&&a&&!l&&c)N=1,E=D(E,I,R),E=P(E,I);else if(!o&&!l&&a^c){var G=h;a?(N=1,E=D(E,I,R),N=0,h=!1,E=D(E,I,R),h=G):(N=0,E=D(E,I,R),E=P(E,I),N=1,h=!1,E=D(E,I,R),h=G,E=P(E,I))}}else N=0,E=D(E,I,R);else N=a?1:0,E=D(E,I,R);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,l=E.isOutputVisual,a=E.isInputRtl,c=E.isOutputRtl,h=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text,s=(i.x,i.y,i.options||{}),o=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(o=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?o.push([e.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):o.push([e.doBidiReorder(r[a])]);i.text=o}else i.text=e.doBidiReorder(r);e.setOptions({isInputVisual:!0})}])}(ie),ie.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Go(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new NP(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new vP(this.contents),this.head=new _P(this),this.name=new EP(this),this.cmap=new B5(this),this.toUnicode={},this.hhea=new wP(this),this.maxp=new IP(this),this.hmtx=new PP(this),this.post=new xP(this),this.os2=new AP(this),this.loca=new kP(this),this.glyf=new TP(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(e=r>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var r,s,o,a;for(o=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)r=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/e)||0;return o*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var Pr,Go=function(){function n(t){this.data=t!=null?t:[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,r;for(r=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,r,s,o,a,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*r+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],s.push(this.writeByte(e));return s},n}(),vP=function(){var n;function t(e){var i,r,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,r,s,o,a,l,c,h,f,m,p,v,_;for(_ in p=Object.keys(e).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),o=Math.floor(f/l),h=16*p-f,(r=new Go).writeInt(this.scalarType),r.writeShort(p),r.writeShort(f),r.writeShort(o),r.writeShort(h),s=16*p,c=r.pos+s,a=null,v=[],e)for(m=e[_],r.writeString(_),r.writeInt(n(m)),r.writeInt(c),r.writeInt(m.length),v=v.concat(m),_==="head"&&(a=c),c+=m.length;c%4;)v.push(0),c++;return r.write(v),i=2981146554-n(r.data),r.pos=a+8,r.writeUInt32(i),r.data},n=function(e){var i,r,s,o;for(e=j5.call(e);e.length%4;)e.push(0);for(s=new Go(e),r=0,i=0,o=e.length;i<o;i=i+=4)r+=s.readUInt32();return 4294967295&r},t}(),bP={}.hasOwnProperty,ns=function(n,t){for(var e in t)bP.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};Pr=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var _P=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new Go).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),D1=function(){function n(t,e){var i,r,s,o,a,l,c,h,f,m,p,v,_,S,x,T,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,s=function(){var O,B;for(B=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)B.push(t.readUInt16());return B}(),t.pos+=2,_=function(){var O,B;for(B=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)B.push(t.readUInt16());return B}(),c=function(){var O,B;for(B=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)B.push(t.readUInt16());return B}(),h=function(){var O,B;for(B=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)B.push(t.readUInt16());return B}(),r=(this.length-t.pos+this.offset)/2,a=function(){var O,B;for(B=[],l=O=0;0<=r?O<r:O>r;l=0<=r?++O:--O)B.push(t.readUInt16());return B}(),l=x=0,N=s.length;x<N;l=++x)for(S=s[l],i=T=v=_[l];v<=S?T<=S:T>=S;i=v<=S?++T:--T)h[l]===0?o=i+c[l]:(o=a[h[l]/2+(i-v)-(m-l)]||0)!==0&&(o+=c[l]),this.codeMap[i]=65535&o}t.pos=f}return n.encode=function(t,e){var i,r,s,o,a,l,c,h,f,m,p,v,_,S,x,T,N,O,B,W,P,A,C,D,E,I,R,G,ot,Y,K,et,J,ct,_t,M,H,X,tt,it,pt,gt,bt,Nt,kt,Ot;switch(G=new Go,o=Object.keys(t).sort(function(Vt,te){return Vt-te}),e){case"macroman":for(_=0,S=function(){var Vt=[];for(v=0;v<256;++v)Vt.push(0);return Vt}(),T={0:0},s={},ot=0,J=o.length;ot<J;ot++)T[bt=t[r=o[ot]]]==null&&(T[bt]=++_),s[r]={old:t[r],new:T[t[r]]},S[r]=T[t[r]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(S),{charMap:s,subtable:G.data,maxGlyphID:_+1};case"unicode":for(I=[],f=[],N=0,T={},i={},x=c=null,Y=0,ct=o.length;Y<ct;Y++)T[B=t[r=o[Y]]]==null&&(T[B]=++N),i[r]={old:B,new:T[B]},a=T[B]-r,x!=null&&a===c||(x&&f.push(x),I.push(r),c=a),x=r;for(x&&f.push(x),f.push(65535),I.push(65535),D=2*(C=I.length),A=2*Math.pow(Math.log(C)/Math.LN2,2),m=Math.log(A/2)/Math.LN2,P=2*C-A,l=[],W=[],p=[],v=K=0,_t=I.length;K<_t;v=++K){if(E=I[v],h=f[v],E===65535){l.push(0),W.push(0);break}if(E-(R=i[E].new)>=32768)for(l.push(0),W.push(2*(p.length+C-v)),r=et=E;E<=h?et<=h:et>=h;r=E<=h?++et:--et)p.push(i[r].new);else l.push(R-E),W.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*C+2*p.length),G.writeUInt16(0),G.writeUInt16(D),G.writeUInt16(A),G.writeUInt16(m),G.writeUInt16(P),pt=0,M=f.length;pt<M;pt++)r=f[pt],G.writeUInt16(r);for(G.writeUInt16(0),gt=0,H=I.length;gt<H;gt++)r=I[gt],G.writeUInt16(r);for(Nt=0,X=l.length;Nt<X;Nt++)a=l[Nt],G.writeUInt16(a);for(kt=0,tt=W.length;kt<tt;kt++)O=W[kt],G.writeUInt16(O);for(Ot=0,it=p.length;Ot<it;Ot++)_=p[Ot],G.writeUInt16(_);return{charMap:i,subtable:G.data,maxGlyphID:N+1}}},n}(),B5=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)i=new D1(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var r,s;return i==null&&(i="macroman"),r=D1.encode(e,i),(s=new Go).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},t}(),wP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),AP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(e.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),xP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="post",t.prototype.parse=function(e){var i,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)i=e.readByte(),s.push(this.names.push(e.readString(i)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(e.readUInt32());return c}).call(this)}},t}(),SP=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},EP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="name",t.prototype.parse=function(e){var i,r,s,o,a,l,c,h,f,m,p;for(e.pos=this.offset,e.readShort(),i=e.readShort(),l=e.readShort(),r=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},o=f=0,m=r.length;f<m;o=++f)s=r[o],e.pos=s.offset,h=e.readString(s.length),a=new SP(h,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(v){this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),IP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),PP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,r,s,o,a,l,c;for(e.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],i=h=0;0<=s?h<s:h>s;i=0<=s?++h:--h)f.push(e.readInt16());return f}(),this.widths=(function(){var h,f,m,p;for(p=[],h=0,f=(m=this.metrics).length;h<f;h++)o=m[h],p.push(o.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)c.push(this.widths.push(r));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),j5=[].slice,TP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,r,s,o,a,l,c,h,f,m;return e in this.cache?this.cache[e]:(o=this.file.loca,i=this.file.contents,r=o.indexOf(e),(s=o.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+r,a=(l=new Go(i.read(s))).readShort(),h=l.readShort(),m=l.readShort(),c=l.readShort(),f=l.readShort(),this.cache[e]=a===-1?new CP(l,h,m,c,f):new LP(l,a,h,m,c,f),this.cache[e]))},t.prototype.encode=function(e,i,r){var s,o,a,l,c;for(a=[],o=[],l=0,c=i.length;l<c;l++)s=e[i[l]],o.push(a.length),s&&(a=a.concat(s.encode(r)));return o.push(a.length),{table:a,offsets:o}},t}(),LP=function(){function n(t,e,i,r,s,o){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),CP=function(){function n(t,e,i,r,s){var o,a;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new Go(j5.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),kP=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Pr),t.prototype.tag="loca",t.prototype.parse=function(e){var i,r;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var r=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<r.length;++a)if(r[a]=s,o<i.length&&i[o]==a){++o,r[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var h=new Array(4*r.length),f=0;f<r.length;++f)h[4*f+3]=255&r[f],h[4*f+2]=(65280&r[f])>>8,h[4*f+1]=(16711680&r[f])>>16,h[4*f]=(4278190080&r[f])>>24;return h},t}(),NP=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,r,s;for(e in r=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=r[i];return t},n.prototype.glyphsFor=function(t){var e,i,r,s,o,a,l;for(r={},o=0,a=t.length;o<a;o++)r[s=t[o]]=this.font.glyf.glyphFor(s);for(s in e=[],r)(i=r[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in l=this.glyphsFor(e))i=l[s],r[s]=i;return r},n.prototype.encode=function(t,e){var i,r,s,o,a,l,c,h,f,m,p,v,_,S,x;for(r in i=B5.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},x=i.charMap)p[(l=x[r]).old]=l.new;for(v in m=i.maxGlyphID,o)v in p||(p[v]=m++);return h=function(T){var N,O;for(N in O={},T)O[T[N]]=N;return O}(p),f=Object.keys(h).sort(function(T,N){return T-N}),_=function(){var T,N,O;for(O=[],T=0,N=f.length;T<N;T++)a=f[T],O.push(h[a]);return O}(),s=this.font.glyf.encode(o,_,p),c=this.font.loca.encode(s.offsets,_),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();ie.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,r,s,o;if(Array.isArray(e))return"["+function(){var a,l,c;for(c=[],a=0,l=e.length;a<l;a++)i=e[a],c.push(t.convert(i));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(r in s=["<<"],e)o=e[r],s.push("/"+r+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+e},t}();const RP=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:uP,AcroFormAppearance:Kt,AcroFormButton:Dn,AcroFormCheckBox:tu,AcroFormChoiceField:Ra,AcroFormComboBox:Ma,AcroFormEditBox:Jc,AcroFormListBox:Da,AcroFormPasswordField:eu,AcroFormPushButton:Zc,AcroFormRadioButton:Oa,AcroFormTextField:jo,GState:bu,ShadingPattern:So,TilingPattern:La,default:ie,jsPDF:ie},Symbol.toStringTag,{value:"Module"}));var Wf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function aN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function DP(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),e}var MP={exports:{}};const OP=DP(RP);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,t){(function(i,r){n.exports=r(function(){try{return OP}catch(o){}}())})(typeof globalThis!="undefined"?globalThis:typeof Wf!="undefined"?Wf:typeof window!="undefined"?window:typeof self!="undefined"?self:Wf,function(e){return function(){var i={172:function(a,l){var c=this&&this.__extends||function(){var m=function(p,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(_[x]=S[x])},m(p,v)};return function(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(p,v);function _(){this.constructor=p}p.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var h=function(){function m(p,v,_){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=_,this.doc=p.getDocument()}return m}();l.HookData=h;var f=function(m){c(p,m);function p(v,_,S,x,T,N){var O=m.call(this,v,_,N)||this;return O.cell=S,O.row=x,O.column=T,O.section=x.section,O}return p}(h);l.CellHookData=f},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var h=c(4),f=c(136),m=c(744),p=c(776),v=c(664),_=c(972);function S(x){x.API.autoTable=function(){for(var T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var O;T.length===1?O=T[0]:(console.error("Use of deprecated autoTable initiation"),O=T[2]||{},O.columns=T[0],O.body=T[1]);var B=(0,p.parseInput)(this,O),W=(0,_.createTable)(this,B);return(0,v.drawTable)(this,W),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(T,N,O,B){(0,f.default)(T,N,O,B,this)},x.API.autoTableSetDefaults=function(T){return m.DocHandler.setDefaults(T,this),this},x.autoTableSetDefaults=function(T,N){m.DocHandler.setDefaults(T,N)},x.API.autoTableHtmlToJson=function(T,N){var O;if(N===void 0&&(N=!1),typeof window=="undefined")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var B=new m.DocHandler(this),W=(0,h.parseHtml)(B,T,window,N,!1),P=W.head,A=W.body,C=((O=P[0])===null||O===void 0?void 0:O.map(function(D){return D.content}))||[];return{columns:C,rows:A,data:A}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var T=this.lastAutoTable;return T&&T.finalY?T.finalY:0},x.API.autoTableAddPageContent=function(T){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=T,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=S},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,f,m,p,v){p=p||{};var _=1.15,S=v.internal.scaleFactor,x=v.internal.getFontSize()/S,T=v.getLineHeightFactor?v.getLineHeightFactor():_,N=x*T,O=/\r\n|\r|\n/g,B="",W=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(B=typeof h=="string"?h.split(O):h,W=B.length||1),m+=x*(2-_),p.valign==="middle"?m-=W/2*N:p.valign==="bottom"&&(m-=W*N),p.halign==="center"||p.halign==="right"){var P=x;if(p.halign==="center"&&(P*=.5),B&&W>=1){for(var A=0;A<B.length;A++)v.text(B[A],f-v.getStringUnitWidth(B[A])*P,m),m+=N;return v}f-=v.getStringUnitWidth(h)*P}return p.halign==="justify"?v.text(h,f,m,{maxWidth:p.maxWidth||100,align:"justify"}):v.text(h,f,m),v}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(v,_,S){S.applyStyles(_,!0);var x=Array.isArray(v)?v:[v],T=x.map(function(N){return S.getTextWidth(N)}).reduce(function(N,O){return Math.max(N,O)},0);return T}l.getStringWidth=c;function h(v,_,S,x){var T=_.settings.tableLineWidth,N=_.settings.tableLineColor;v.applyStyles({lineWidth:T,lineColor:N});var O=f(T,!1);O&&v.rect(S.x,S.y,_.getWidth(v.pageSize().width),x.y-S.y,O)}l.addTableBorder=h;function f(v,_){var S=v>0,x=_||_===0;return S&&x?"DF":S?"S":x?"F":null}l.getFillStyle=f;function m(v,_){var S,x,T,N;if(v=v||_,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=_}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(S=v.left)!==null&&S!==void 0?S:_,top:(x=v.top)!==null&&x!==void 0?x:_,right:(T=v.right)!==null&&T!==void 0?T:_,bottom:(N=v.bottom)!==null&&N!==void 0?N:_}):(typeof v!="number"&&(v=_),{top:v,right:v,bottom:v,left:v})}l.parseSpacing=m;function p(v,_){var S=m(_.settings.margin,0);return v.pageSize().width-(S.left+S.right)}l.getPageAvailableWidth=p},796:function(a,l){var c=this&&this.__extends||function(){var p=function(v,_){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(S[T]=x[T])},p(v,_)};return function(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");p(v,_);function S(){this.constructor=v}v.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var h=function(p){c(v,p);function v(_){var S=p.call(this)||this;return S._element=_,S}return v}(Array);l.HtmlRowInput=h;function f(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=f;function m(p){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[p]}l.getTheme=m},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var h=c(420);function f(S,x,T,N,O){var B={},W=1.3333333333333333,P=p(x,function(J){return O.getComputedStyle(J).backgroundColor});P!=null&&(B.fillColor=P);var A=p(x,function(J){return O.getComputedStyle(J).color});A!=null&&(B.textColor=A);var C=_(N,T);C&&(B.cellPadding=C);var D="borderTopColor",E=W*T,I=N.borderTopWidth;if(N.borderBottomWidth===I&&N.borderRightWidth===I&&N.borderLeftWidth===I){var R=(parseFloat(I)||0)/E;R&&(B.lineWidth=R)}else B.lineWidth={top:(parseFloat(N.borderTopWidth)||0)/E,right:(parseFloat(N.borderRightWidth)||0)/E,bottom:(parseFloat(N.borderBottomWidth)||0)/E,left:(parseFloat(N.borderLeftWidth)||0)/E},B.lineWidth.top||(B.lineWidth.right?D="borderRightColor":B.lineWidth.bottom?D="borderBottomColor":B.lineWidth.left&&(D="borderLeftColor"));var G=p(x,function(J){return O.getComputedStyle(J)[D]});G!=null&&(B.lineColor=G);var ot=["left","right","center","justify"];ot.indexOf(N.textAlign)!==-1&&(B.halign=N.textAlign),ot=["middle","bottom","top"],ot.indexOf(N.verticalAlign)!==-1&&(B.valign=N.verticalAlign);var Y=parseInt(N.fontSize||"");isNaN(Y)||(B.fontSize=Y/W);var K=m(N);K&&(B.fontStyle=K);var et=(N.fontFamily||"").toLowerCase();return S.indexOf(et)!==-1&&(B.font=et),B}l.parseCss=f;function m(S){var x="";return(S.fontWeight==="bold"||S.fontWeight==="bolder"||parseInt(S.fontWeight)>=700)&&(x="bold"),(S.fontStyle==="italic"||S.fontStyle==="oblique")&&(x+="italic"),x}function p(S,x){var T=v(S,x);if(!T)return null;var N=T.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!N||!Array.isArray(N))return null;var O=[parseInt(N[1]),parseInt(N[2]),parseInt(N[3])],B=parseInt(N[4]);return B===0||isNaN(O[0])||isNaN(O[1])||isNaN(O[2])?null:O}function v(S,x){var T=x(S);return T==="rgba(0, 0, 0, 0)"||T==="transparent"||T==="initial"||T==="inherit"?S.parentElement==null?null:v(S.parentElement,x):T}function _(S,x){var T=[S.paddingTop,S.paddingRight,S.paddingBottom,S.paddingLeft],N=96/(72/x),O=(parseInt(S.lineHeight)-parseInt(S.fontSize))/x/2,B=T.map(function(P){return parseInt(P||"0")/N}),W=(0,h.parseSpacing)(B,0);return O>W.top&&(W.top=O),O>W.bottom&&(W.bottom=O),W}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},h=function(){function f(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return f.setDefaults=function(m,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=m:c=m},f.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},f.prototype.applyStyles=function(m,p){var v,_,S;p===void 0&&(p=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var x=this.jsPDFDocument.internal.getFont(),T=x.fontStyle,N=x.fontName;if(m.font&&(N=m.font),m.fontStyle){T=m.fontStyle;var O=this.getFontList()[N];O&&O.indexOf(T)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(O[0]),T=O[0])}if(this.jsPDFDocument.setFont(N,T),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!p){var B=f.unifyColor(m.fillColor);B&&(v=this.jsPDFDocument).setFillColor.apply(v,B),B=f.unifyColor(m.textColor),B&&(_=this.jsPDFDocument).setTextColor.apply(_,B),B=f.unifyColor(m.lineColor),B&&(S=this.jsPDFDocument).setDrawColor.apply(S,B),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},f.prototype.splitTextToSize=function(m,p,v){return this.jsPDFDocument.splitTextToSize(m,p,v)},f.prototype.rect=function(m,p,v,_,S){return this.jsPDFDocument.rect(m,p,v,_,S)},f.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},f.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},f.prototype.getDocument=function(){return this.jsPDFDocument},f.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},f.prototype.addPage=function(){return this.jsPDFDocument.addPage()},f.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},f.prototype.getGlobalOptions=function(){return c||{}},f.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},f.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},f.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},f.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},f.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},f.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},f}();l.DocHandler=h},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var h=c(903),f=c(796);function m(_,S,x,T,N){var O,B;T===void 0&&(T=!1),N===void 0&&(N=!1);var W;typeof S=="string"?W=x.document.querySelector(S):W=S;var P=Object.keys(_.getFontList()),A=_.scaleFactor(),C=[],D=[],E=[];if(!W)return console.error("Html table could not be found with input: ",S),{head:C,body:D,foot:E};for(var I=0;I<W.rows.length;I++){var R=W.rows[I],G=(B=(O=R==null?void 0:R.parentElement)===null||O===void 0?void 0:O.tagName)===null||B===void 0?void 0:B.toLowerCase(),ot=p(P,A,x,R,T,N);ot&&(G==="thead"?C.push(ot):G==="tfoot"?E.push(ot):D.push(ot))}return{head:C,body:D,foot:E}}l.parseHtml=m;function p(_,S,x,T,N,O){for(var B=new f.HtmlRowInput(T),W=0;W<T.cells.length;W++){var P=T.cells[W],A=x.getComputedStyle(P);if(N||A.display!=="none"){var C=void 0;O&&(C=(0,h.parseCss)(_,P,S,A,x)),B.push({rowSpan:P.rowSpan,colSpan:P.colSpan,styles:C,_element:P,content:v(P)})}}var D=x.getComputedStyle(T);if(B.length>0&&(N||D.display!=="none"))return B}function v(_){var S=_.cloneNode(!0);return S.innerHTML=S.innerHTML.replace(/\n/g,"").replace(/ +/g," "),S.innerHTML=S.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),S.innerText||S.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var h=c(4),f=c(356),m=c(420),p=c(744),v=c(792);function _(W,P){var A=new p.DocHandler(W),C=A.getDocumentOptions(),D=A.getGlobalOptions();(0,v.default)(A,D,C,P);var E=(0,f.assign)({},D,C,P),I;typeof window!="undefined"&&(I=window);var R=S(D,C,P),G=x(D,C,P),ot=T(A,E),Y=O(A,E,I);return{id:P.tableId,content:Y,hooks:G,styles:R,settings:ot}}l.parseInput=_;function S(W,P,A){for(var C={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},D=function(G){if(G==="columnStyles"){var ot=W[G],Y=P[G],K=A[G];C.columnStyles=(0,f.assign)({},ot,Y,K)}else{var et=[W,P,A],J=et.map(function(ct){return ct[G]||{}});C[G]=(0,f.assign)({},J[0],J[1],J[2])}},E=0,I=Object.keys(C);E<I.length;E++){var R=I[E];D(R)}return C}function x(W,P,A){for(var C=[W,P,A],D={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},E=0,I=C;E<I.length;E++){var R=I[E];R.didParseCell&&D.didParseCell.push(R.didParseCell),R.willDrawCell&&D.willDrawCell.push(R.willDrawCell),R.didDrawCell&&D.didDrawCell.push(R.didDrawCell),R.willDrawPage&&D.willDrawPage.push(R.willDrawPage),R.didDrawPage&&D.didDrawPage.push(R.didDrawPage)}return D}function T(W,P){var A,C,D,E,I,R,G,ot,Y,K,et,J,ct=(0,m.parseSpacing)(P.margin,40/W.scaleFactor()),_t=(A=N(W,P.startY))!==null&&A!==void 0?A:ct.top,M;P.showFoot===!0?M="everyPage":P.showFoot===!1?M="never":M=(C=P.showFoot)!==null&&C!==void 0?C:"everyPage";var H;P.showHead===!0?H="everyPage":P.showHead===!1?H="never":H=(D=P.showHead)!==null&&D!==void 0?D:"everyPage";var X=(E=P.useCss)!==null&&E!==void 0?E:!1,tt=P.theme||(X?"plain":"striped"),it=!!P.horizontalPageBreak,pt=(I=P.horizontalPageBreakRepeat)!==null&&I!==void 0?I:null;return{includeHiddenHtml:(R=P.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:X,theme:tt,startY:_t,margin:ct,pageBreak:(G=P.pageBreak)!==null&&G!==void 0?G:"auto",rowPageBreak:(ot=P.rowPageBreak)!==null&&ot!==void 0?ot:"auto",tableWidth:(Y=P.tableWidth)!==null&&Y!==void 0?Y:"auto",showHead:H,showFoot:M,tableLineWidth:(K=P.tableLineWidth)!==null&&K!==void 0?K:0,tableLineColor:(et=P.tableLineColor)!==null&&et!==void 0?et:200,horizontalPageBreak:it,horizontalPageBreakRepeat:pt,horizontalPageBreakBehaviour:(J=P.horizontalPageBreakBehaviour)!==null&&J!==void 0?J:"afterAllRows"}}function N(W,P){var A=W.getLastAutoTable(),C=W.scaleFactor(),D=W.pageNumber(),E=!1;if(A&&A.startPageNumber){var I=A.startPageNumber+A.pageNumber-1;E=I===D}return typeof P=="number"?P:(P==null||P===!1)&&E&&(A==null?void 0:A.finalY)!=null?A.finalY+20/C:null}function O(W,P,A){var C=P.head||[],D=P.body||[],E=P.foot||[];if(P.html){var I=P.includeHiddenHtml;if(A){var R=(0,h.parseHtml)(W,P.html,A,I,P.useCss)||{};C=R.head||C,D=R.body||C,E=R.foot||C}else console.error("Cannot parse html in non browser environment")}var G=P.columns||B(C,D,E);return{columns:G,head:C,body:D,foot:E}}function B(W,P,A){var C=W[0]||P[0]||A[0]||[],D=[];return Object.keys(C).filter(function(E){return E!=="_element"}).forEach(function(E){var I=1,R;Array.isArray(C)?R=C[parseInt(E)]:R=C[E],typeof R=="object"&&!Array.isArray(R)&&(I=(R==null?void 0:R.colSpan)||1);for(var G=0;G<I;G++){var ot=void 0;Array.isArray(C)?ot=D.length:ot=E+(G>0?"_".concat(G):"");var Y={dataKey:ot};D.push(Y)}}),D}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(f,m,p,v){for(var _=function(N){N&&typeof N!="object"&&console.error("The options parameter should be of type object, is: "+typeof N),typeof N.extendWidth!="undefined"&&(N.tableWidth=N.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof N.margins!="undefined"&&(typeof N.margin=="undefined"&&(N.margin=N.margins),console.error("Use of deprecated option: margins, use margin instead.")),N.startY&&typeof N.startY!="number"&&(console.error("Invalid value for startY option",N.startY),delete N.startY),!N.didDrawPage&&(N.afterPageContent||N.beforePageContent||N.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),N.didDrawPage=function(E){f.applyStyles(f.userStyles),N.beforePageContent&&N.beforePageContent(E),f.applyStyles(f.userStyles),N.afterPageContent&&N.afterPageContent(E),f.applyStyles(f.userStyles),N.afterPageAdd&&E.pageNumber>1&&E.afterPageAdd(E),f.applyStyles(f.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(E){N[E]&&console.error('The "'.concat(E,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(E){var I=E[0],R=E[1];N[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(I," instead")),N[I]=N[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(E){var I=typeof E=="string"?E:E[0],R=typeof E=="string"?E:E[1];typeof N[I]!="undefined"&&(typeof N.styles[R]=="undefined"&&(N.styles[R]=N[I]),console.error("Use of deprecated option: "+I+", use the style "+R+" instead."))});for(var O=0,B=["styles","bodyStyles","headStyles","footStyles"];O<B.length;O++){var W=B[O];h(N[W]||{})}for(var P=N.columnStyles||{},A=0,C=Object.keys(P);A<C.length;A++){var D=C[A];h(P[D]||{})}},S=0,x=[m,p,v];S<x.length;S++){var T=x[S];_(T)}}l.default=c;function h(f){f.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),f.minCellHeight||(f.minCellHeight=f.rowHeight)):f.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),f.cellWidth||(f.cellWidth=f.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var h=c(796),f=c(172),m=c(420),p=function(){function x(T,N){this.pageNumber=1,this.pageCount=1,this.id=T.id,this.settings=T.settings,this.styles=T.styles,this.hooks=T.hooks,this.columns=N.columns,this.head=N.head,this.body=N.body,this.foot=N.foot}return x.prototype.getHeadHeight=function(T){return this.head.reduce(function(N,O){return N+O.getMaxCellHeight(T)},0)},x.prototype.getFootHeight=function(T){return this.foot.reduce(function(N,O){return N+O.getMaxCellHeight(T)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(T,N,O,B,W,P){for(var A=0,C=N;A<C.length;A++){var D=C[A],E=new f.CellHookData(T,this,O,B,W,P),I=D(E)===!1;if(O.text=Array.isArray(O.text)?O.text:[O.text],I)return!1}return!0},x.prototype.callEndPageHooks=function(T,N){T.applyStyles(T.userStyles);for(var O=0,B=this.hooks.didDrawPage;O<B.length;O++){var W=B[O];W(new f.HookData(T,this,N))}},x.prototype.callWillDrawPageHooks=function(T,N){for(var O=0,B=this.hooks.willDrawPage;O<B.length;O++){var W=B[O];W(new f.HookData(T,this,N))}},x.prototype.getWidth=function(T){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var N=this.columns.reduce(function(B,W){return B+W.wrappedWidth},0);return N}else{var O=this.settings.margin;return T-O.left-O.right}},x}();l.Table=p;var v=function(){function x(T,N,O,B,W){W===void 0&&(W=!1),this.height=0,this.raw=T,T instanceof h.HtmlRowInput&&(this.raw=T._element,this.element=T._element),this.index=N,this.section=O,this.cells=B,this.spansMultiplePages=W}return x.prototype.getMaxCellHeight=function(T){var N=this;return T.reduce(function(O,B){var W;return Math.max(O,((W=N.cells[B.index])===null||W===void 0?void 0:W.height)||0)},0)},x.prototype.hasRowSpan=function(T){var N=this;return T.filter(function(O){var B=N.cells[O.index];return B?B.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(T,N){return this.getMaxCellHeight(N)<=T},x.prototype.getMinimumRowHeight=function(T,N){var O=this;return T.reduce(function(B,W){var P=O.cells[W.index];if(!P)return 0;var A=N.getLineHeight(P.styles.fontSize),C=P.padding("vertical"),D=C+A;return D>B?D:B},0)},x}();l.Row=v;var _=function(){function x(T,N,O){var B,W;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=N,this.section=O,this.raw=T;var P=T;T!=null&&typeof T=="object"&&!Array.isArray(T)?(this.rowSpan=T.rowSpan||1,this.colSpan=T.colSpan||1,P=(W=(B=T.content)!==null&&B!==void 0?B:T.title)!==null&&W!==void 0?W:T,T._element&&(this.raw=T._element)):(this.rowSpan=1,this.colSpan=1);var A=P!=null?""+P:"",C=/\r\n|\r|\n/g;this.text=A.split(C)}return x.prototype.getTextPos=function(){var T;if(this.styles.valign==="top")T=this.y+this.padding("top");else if(this.styles.valign==="bottom")T=this.y+this.height-this.padding("bottom");else{var N=this.height-this.padding("vertical");T=this.y+N/2+this.padding("top")}var O;if(this.styles.halign==="right")O=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var B=this.width-this.padding("horizontal");O=this.x+B/2+this.padding("left")}else O=this.x+this.padding("left");return{x:O,y:T}},x.prototype.getContentHeight=function(T,N){N===void 0&&(N=1.15);var O=Array.isArray(this.text)?this.text.length:1,B=this.styles.fontSize/T*N,W=O*B+this.padding("vertical");return Math.max(W,this.styles.minCellHeight)},x.prototype.padding=function(T){var N=(0,m.parseSpacing)(this.styles.cellPadding,0);return T==="vertical"?N.top+N.bottom:T==="horizontal"?N.left+N.right:N[T]},x}();l.Cell=_;var S=function(){function x(T,N,O){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=T,this.raw=N,this.index=O}return x.prototype.getMaxCustomCellWidth=function(T){for(var N=0,O=0,B=T.allRows();O<B.length;O++){var W=B[O],P=W.cells[this.index];P&&typeof P.styles.cellWidth=="number"&&(N=Math.max(N,P.styles.cellWidth))}return N},x}();l.Column=S},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(h,f,m,p,v){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var _=Object(h),S=1;S<arguments.length;S++){var x=arguments[S];if(x!=null)for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(_[T]=x[T])}return _}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var h=c(744),f=c(260),m=c(324),p=c(796),v=c(356);function _(W,P){var A=new h.DocHandler(W),C=S(P,A.scaleFactor()),D=new f.Table(P,C);return(0,m.calculateWidths)(A,D),A.applyStyles(A.userStyles),D}l.createTable=_;function S(W,P){var A=W.content,C=O(A.columns);if(A.head.length===0){var D=T(C,"head");D&&A.head.push(D)}if(A.foot.length===0){var D=T(C,"foot");D&&A.foot.push(D)}var E=W.settings.theme,I=W.styles;return{columns:C,head:x("head",A.head,C,I,E,P),body:x("body",A.body,C,I,E,P),foot:x("foot",A.foot,C,I,E,P)}}function x(W,P,A,C,D,E){var I={},R=P.map(function(G,ot){for(var Y=0,K={},et=0,J=0,ct=0,_t=A;ct<_t.length;ct++){var M=_t[ct];if(I[M.index]==null||I[M.index].left===0)if(J===0){var H=void 0;Array.isArray(G)?H=G[M.index-et-Y]:H=G[M.dataKey];var X={};typeof H=="object"&&!Array.isArray(H)&&(X=(H==null?void 0:H.styles)||{});var tt=B(W,M,ot,D,C,E,X),it=new f.Cell(H,tt,W);K[M.dataKey]=it,K[M.index]=it,J=it.colSpan-1,I[M.index]={left:it.rowSpan-1,times:J}}else J--,et++;else I[M.index].left--,J=I[M.index].times,Y++}return new f.Row(G,ot,W,K)});return R}function T(W,P){var A={};return W.forEach(function(C){if(C.raw!=null){var D=N(P,C.raw);D!=null&&(A[C.dataKey]=D)}}),Object.keys(A).length>0?A:null}function N(W,P){if(W==="head"){if(typeof P=="object")return P.header||P.title||null;if(typeof P=="string"||typeof P=="number")return P}else if(W==="foot"&&typeof P=="object")return P.footer;return null}function O(W){return W.map(function(P,A){var C,D,E;return typeof P=="object"?E=(D=(C=P.dataKey)!==null&&C!==void 0?C:P.key)!==null&&D!==void 0?D:A:E=A,new f.Column(E,P,A)})}function B(W,P,A,C,D,E,I){var R=(0,p.getTheme)(C),G;W==="head"?G=D.headStyles:W==="body"?G=D.bodyStyles:W==="foot"&&(G=D.footStyles);var ot=(0,v.assign)({},R.table,R[W],D.styles,G),Y=D.columnStyles[P.dataKey]||D.columnStyles[P.index]||{},K=W==="body"?Y:{},et=W==="body"&&A%2===0?(0,v.assign)({},R.alternateRow,D.alternateRowStyles):{},J=(0,p.defaultStyles)(E),ct=(0,v.assign)({},J,ot,et,K);return(0,v.assign)(ct,I)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var h=c(420),f=c(260),m=c(744),p=c(356),v=c(136),_=c(224);function S(Y,K){var et=K.settings,J=et.startY,ct=et.margin,_t={x:ct.left,y:J},M=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns),H=J+ct.bottom+M;if(et.pageBreak==="avoid"){var X=K.body,tt=X.reduce(function(gt,bt){return gt+bt.height},0);H+=tt}var it=new m.DocHandler(Y);(et.pageBreak==="always"||et.startY!=null&&H>it.pageSize().height)&&(ot(it),_t.y=ct.top),K.callWillDrawPageHooks(it,_t);var pt=(0,p.assign)({},_t);K.startPageNumber=it.pageNumber(),et.horizontalPageBreak?x(it,K,pt,_t):(it.applyStyles(it.userStyles),(et.showHead==="firstPage"||et.showHead==="everyPage")&&K.head.forEach(function(gt){return D(it,K,gt,_t,K.columns)}),it.applyStyles(it.userStyles),K.body.forEach(function(gt,bt){var Nt=bt===K.body.length-1;C(it,K,gt,Nt,pt,_t,K.columns)}),it.applyStyles(it.userStyles),(et.showFoot==="lastPage"||et.showFoot==="everyPage")&&K.foot.forEach(function(gt){return D(it,K,gt,_t,K.columns)})),(0,h.addTableBorder)(it,K,pt,_t),K.callEndPageHooks(it,_t),K.finalY=_t.y,Y.lastAutoTable=K,Y.previousAutoTable=K,Y.autoTable&&(Y.autoTable.previous=K),it.applyStyles(it.userStyles)}l.drawTable=S;function x(Y,K,et,J){var ct=(0,_.calculateAllColumnsCanFitInPage)(Y,K),_t=K.settings;if(_t.horizontalPageBreakBehaviour==="afterAllRows")ct.forEach(function(tt,it){Y.applyStyles(Y.userStyles),it>0?G(Y,K,et,J,tt.columns,!0):T(Y,K,J,tt.columns),N(Y,K,et,J,tt.columns),B(Y,K,J,tt.columns)});else for(var M=-1,H=ct[0],X=function(){var tt=M;if(H){Y.applyStyles(Y.userStyles);var it=H.columns;M>=0?G(Y,K,et,J,it,!0):T(Y,K,J,it),tt=O(Y,K,M+1,J,it),B(Y,K,J,it)}var pt=tt-M;ct.slice(1).forEach(function(gt){Y.applyStyles(Y.userStyles),G(Y,K,et,J,gt.columns,!0),O(Y,K,M+1,J,gt.columns,pt),B(Y,K,J,gt.columns)}),M=tt};M<K.body.length-1;)X()}function T(Y,K,et,J){var ct=K.settings;Y.applyStyles(Y.userStyles),(ct.showHead==="firstPage"||ct.showHead==="everyPage")&&K.head.forEach(function(_t){return D(Y,K,_t,et,J)})}function N(Y,K,et,J,ct){Y.applyStyles(Y.userStyles),K.body.forEach(function(_t,M){var H=M===K.body.length-1;C(Y,K,_t,H,et,J,ct)})}function O(Y,K,et,J,ct,_t){Y.applyStyles(Y.userStyles),_t=_t!=null?_t:K.body.length;var M=Math.min(et+_t,K.body.length),H=-1;return K.body.slice(et,M).forEach(function(X,tt){var it=et+tt===K.body.length-1,pt=R(Y,K,it,J);X.canEntireRowFit(pt,ct)&&(D(Y,K,X,J,ct),H=et+tt)}),H}function B(Y,K,et,J){var ct=K.settings;Y.applyStyles(Y.userStyles),(ct.showFoot==="lastPage"||ct.showFoot==="everyPage")&&K.foot.forEach(function(_t){return D(Y,K,_t,et,J)})}function W(Y,K,et){var J=et.getLineHeight(Y.styles.fontSize),ct=Y.padding("vertical"),_t=Math.floor((K-ct)/J);return Math.max(0,_t)}function P(Y,K,et,J){var ct={};Y.spansMultiplePages=!0,Y.height=0;for(var _t=0,M=0,H=et.columns;M<H.length;M++){var X=H[M],tt=Y.cells[X.index];if(tt){Array.isArray(tt.text)||(tt.text=[tt.text]);var it=new f.Cell(tt.raw,tt.styles,tt.section);it=(0,p.assign)(it,tt),it.text=[];var pt=W(tt,K,J);tt.text.length>pt&&(it.text=tt.text.splice(pt,tt.text.length));var gt=J.scaleFactor(),bt=J.getLineHeightFactor();tt.contentHeight=tt.getContentHeight(gt,bt),tt.contentHeight>=K&&(tt.contentHeight=K,it.styles.minCellHeight-=K),tt.contentHeight>Y.height&&(Y.height=tt.contentHeight),it.contentHeight=it.getContentHeight(gt,bt),it.contentHeight>_t&&(_t=it.contentHeight),ct[X.index]=it}}var Nt=new f.Row(Y.raw,-1,Y.section,ct,!0);Nt.height=_t;for(var kt=0,Ot=et.columns;kt<Ot.length;kt++){var X=Ot[kt],it=Nt.cells[X.index];it&&(it.height=Nt.height);var tt=Y.cells[X.index];tt&&(tt.height=Y.height)}return Nt}function A(Y,K,et,J){var ct=Y.pageSize().height,_t=J.settings.margin,M=_t.top+_t.bottom,H=ct-M;K.section==="body"&&(H-=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns));var X=K.getMinimumRowHeight(J.columns,Y),tt=X<et;if(X>H)return console.error("Will not be able to print row ".concat(K.index," correctly since it's minimum height is larger than page height")),!0;if(!tt)return!1;var it=K.hasRowSpan(J.columns),pt=K.getMaxCellHeight(J.columns)>H;return pt?(it&&console.error("The content of row ".concat(K.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(it||J.settings.rowPageBreak==="avoid")}function C(Y,K,et,J,ct,_t,M){var H=R(Y,K,J,_t);if(et.canEntireRowFit(H,M))D(Y,K,et,_t,M);else if(A(Y,et,H,K)){var X=P(et,H,K,Y);D(Y,K,et,_t,M),G(Y,K,ct,_t,M),C(Y,K,X,J,ct,_t,M)}else G(Y,K,ct,_t,M),C(Y,K,et,J,ct,_t,M)}function D(Y,K,et,J,ct){J.x=K.settings.margin.left;for(var _t=0,M=ct;_t<M.length;_t++){var H=M[_t],X=et.cells[H.index];if(!X){J.x+=H.width;continue}Y.applyStyles(X.styles),X.x=J.x,X.y=J.y;var tt=K.callCellHooks(Y,K.hooks.willDrawCell,X,et,H,J);if(tt===!1){J.x+=H.width;continue}E(Y,X,J);var it=X.getTextPos();(0,v.default)(X.text,it.x,it.y,{halign:X.styles.halign,valign:X.styles.valign,maxWidth:Math.ceil(X.width-X.padding("left")-X.padding("right"))},Y.getDocument()),K.callCellHooks(Y,K.hooks.didDrawCell,X,et,H,J),J.x+=H.width}J.y+=et.height}function E(Y,K,et){var J=K.styles;if(Y.getDocument().setFillColor(Y.getDocument().getFillColor()),typeof J.lineWidth=="number"){var ct=(0,h.getFillStyle)(J.lineWidth,J.fillColor);ct&&Y.rect(K.x,et.y,K.width,K.height,ct)}else typeof J.lineWidth=="object"&&(J.fillColor&&Y.rect(K.x,et.y,K.width,K.height,"F"),I(Y,K,et,J.lineWidth))}function I(Y,K,et,J){var ct,_t,M,H;J.top&&(ct=et.x,_t=et.y,M=et.x+K.width,H=et.y,J.right&&(M+=.5*J.right),J.left&&(ct-=.5*J.left),X(J.top,ct,_t,M,H)),J.bottom&&(ct=et.x,_t=et.y+K.height,M=et.x+K.width,H=et.y+K.height,J.right&&(M+=.5*J.right),J.left&&(ct-=.5*J.left),X(J.bottom,ct,_t,M,H)),J.left&&(ct=et.x,_t=et.y,M=et.x,H=et.y+K.height,J.top&&(_t-=.5*J.top),J.bottom&&(H+=.5*J.bottom),X(J.left,ct,_t,M,H)),J.right&&(ct=et.x+K.width,_t=et.y,M=et.x+K.width,H=et.y+K.height,J.top&&(_t-=.5*J.top),J.bottom&&(H+=.5*J.bottom),X(J.right,ct,_t,M,H));function X(tt,it,pt,gt,bt){Y.getDocument().setLineWidth(tt),Y.getDocument().line(it,pt,gt,bt,"S")}}function R(Y,K,et,J){var ct=K.settings.margin.bottom,_t=K.settings.showFoot;return(_t==="everyPage"||_t==="lastPage"&&et)&&(ct+=K.getFootHeight(K.columns)),Y.pageSize().height-J.y-ct}function G(Y,K,et,J,ct,_t){ct===void 0&&(ct=[]),_t===void 0&&(_t=!1),Y.applyStyles(Y.userStyles),K.settings.showFoot==="everyPage"&&!_t&&K.foot.forEach(function(H){return D(Y,K,H,J,ct)}),K.callEndPageHooks(Y,J);var M=K.settings.margin;(0,h.addTableBorder)(Y,K,et,J),ot(Y),K.pageNumber++,K.pageCount++,J.x=M.left,J.y=M.top,et.y=M.top,K.callWillDrawPageHooks(Y,J),K.settings.showHead==="everyPage"&&(K.head.forEach(function(H){return D(Y,K,H,J,ct)}),Y.applyStyles(Y.userStyles))}l.addPage=G;function ot(Y){var K=Y.pageNumber();Y.setPage(K+1);var et=Y.pageNumber();return et===K?(Y.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var h=c(420);function f(p,v,_){var S;_===void 0&&(_={});var x=(0,h.getPageAvailableWidth)(p,v),T=new Map,N=[],O=[],B=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?B=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(B=[v.settings.horizontalPageBreakRepeat]),B.forEach(function(C){var D=v.columns.find(function(E){return E.dataKey===C||E.index===C});D&&!T.has(D.index)&&(T.set(D.index,!0),N.push(D.index),O.push(v.columns[D.index]),x-=D.wrappedWidth)});for(var W=!0,P=(S=_==null?void 0:_.start)!==null&&S!==void 0?S:0;P<v.columns.length;){if(T.has(P)){P++;continue}var A=v.columns[P].wrappedWidth;if(W||x>=A)W=!1,N.push(P),O.push(v.columns[P]),x-=A;else break;P++}return{colIndexes:N,columns:O,lastIndex:P-1}}function m(p,v){for(var _=[],S=0;S<v.columns.length;S++){var x=f(p,v,{start:S});x.columns.length&&(_.push(x),S=x.lastIndex)}return _}l.calculateAllColumnsCanFitInPage=m},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var h=c(420);function f(N,O){m(N,O);var B=[],W=0;O.columns.forEach(function(A){var C=A.getMaxCustomCellWidth(O);C?A.width=C:(A.width=A.wrappedWidth,B.push(A)),W+=A.width});var P=O.getWidth(N.pageSize().width)-W;P&&(P=p(B,P,function(A){return Math.max(A.minReadableWidth,A.minWidth)})),P&&(P=p(B,P,function(A){return A.minWidth})),P=Math.abs(P),!O.settings.horizontalPageBreak&&P>.1/N.scaleFactor()&&(P=P<1?P:Math.round(P),console.warn("Of the table content, ".concat(P," units width could not fit page"))),_(O),S(O,N),v(O)}l.calculateWidths=f;function m(N,O){var B=N.scaleFactor(),W=O.settings.horizontalPageBreak,P=(0,h.getPageAvailableWidth)(N,O);O.allRows().forEach(function(A){for(var C=0,D=O.columns;C<D.length;C++){var E=D[C],I=A.cells[E.index];if(I){var R=O.hooks.didParseCell;O.callCellHooks(N,R,I,A,E,null);var G=I.padding("horizontal");I.contentWidth=(0,h.getStringWidth)(I.text,I.styles,N)+G;var ot=(0,h.getStringWidth)(I.text.join(" ").split(/[^\S\u00A0]+/),I.styles,N);if(I.minReadableWidth=ot+I.padding("horizontal"),typeof I.styles.cellWidth=="number")I.minWidth=I.styles.cellWidth,I.wrappedWidth=I.styles.cellWidth;else if(I.styles.cellWidth==="wrap"||W===!0)I.contentWidth>P?(I.minWidth=P,I.wrappedWidth=P):(I.minWidth=I.contentWidth,I.wrappedWidth=I.contentWidth);else{var Y=10/B;I.minWidth=I.styles.minCellWidth||Y,I.wrappedWidth=I.contentWidth,I.minWidth>I.wrappedWidth&&(I.wrappedWidth=I.minWidth)}}}}),O.allRows().forEach(function(A){for(var C=0,D=O.columns;C<D.length;C++){var E=D[C],I=A.cells[E.index];if(I&&I.colSpan===1)E.wrappedWidth=Math.max(E.wrappedWidth,I.wrappedWidth),E.minWidth=Math.max(E.minWidth,I.minWidth),E.minReadableWidth=Math.max(E.minReadableWidth,I.minReadableWidth);else{var R=O.styles.columnStyles[E.dataKey]||O.styles.columnStyles[E.index]||{},G=R.cellWidth||R.minCellWidth;G&&typeof G=="number"&&(E.minWidth=G,E.wrappedWidth=G)}I&&(I.colSpan>1&&!E.minWidth&&(E.minWidth=I.minWidth),I.colSpan>1&&!E.wrappedWidth&&(E.wrappedWidth=I.minWidth))}})}function p(N,O,B){for(var W=O,P=N.reduce(function(Y,K){return Y+K.wrappedWidth},0),A=0;A<N.length;A++){var C=N[A],D=C.wrappedWidth/P,E=W*D,I=C.width+E,R=B(C),G=I<R?R:I;O-=G-C.width,C.width=G}if(O=Math.round(O*1e10)/1e10,O){var ot=N.filter(function(Y){return O<0?Y.width>B(Y):!0});ot.length&&(O=p(ot,O,B))}return O}l.resizeColumns=p;function v(N){for(var O={},B=1,W=N.allRows(),P=0;P<W.length;P++)for(var A=W[P],C=0,D=N.columns;C<D.length;C++){var E=D[C],I=O[E.index];if(B>1)B--,delete A.cells[E.index];else if(I)I.cell.height+=A.height,B=I.cell.colSpan,delete A.cells[E.index],I.left--,I.left<=1&&delete O[E.index];else{var R=A.cells[E.index];if(!R)continue;if(R.height=A.height,R.rowSpan>1){var G=W.length-P,ot=R.rowSpan>G?G:R.rowSpan;O[E.index]={cell:R,left:ot,row:A}}}}}function _(N){for(var O=N.allRows(),B=0;B<O.length;B++)for(var W=O[B],P=null,A=0,C=0,D=0;D<N.columns.length;D++){var E=N.columns[D];if(C-=1,C>1&&N.columns[D+1])A+=E.width,delete W.cells[E.index];else if(P){var I=P;delete W.cells[E.index],P=null,I.width=E.width+A}else{var I=W.cells[E.index];if(!I)continue;if(C=I.colSpan,A=0,I.colSpan>1){P=I,A+=E.width;continue}I.width=E.width+A}}}function S(N,O){for(var B={count:0,height:0},W=0,P=N.allRows();W<P.length;W++){for(var A=P[W],C=0,D=N.columns;C<D.length;C++){var E=D[C],I=A.cells[E.index];if(I){O.applyStyles(I.styles,!0);var R=I.width-I.padding("horizontal");if(I.styles.overflow==="linebreak")I.text=O.splitTextToSize(I.text,R+1/O.scaleFactor(),{fontSize:I.styles.fontSize});else if(I.styles.overflow==="ellipsize")I.text=x(I.text,R,I.styles,O,"...");else if(I.styles.overflow==="hidden")I.text=x(I.text,R,I.styles,O,"");else if(typeof I.styles.overflow=="function"){var G=I.styles.overflow(I.text,R);typeof G=="string"?I.text=[G]:I.text=G}I.contentHeight=I.getContentHeight(O.scaleFactor(),O.getLineHeightFactor());var ot=I.contentHeight/I.rowSpan;I.rowSpan>1&&B.count*B.height<ot*I.rowSpan?B={height:ot,count:I.rowSpan}:B&&B.count>0&&B.height>ot&&(ot=B.height),ot>A.height&&(A.height=ot)}}B.count--}}function x(N,O,B,W,P){return N.map(function(A){return T(A,O,B,W,P)})}l.ellipsize=x;function T(N,O,B,W,P){var A=1e4*W.scaleFactor();if(O=Math.ceil(O*A)/A,O>=(0,h.getStringWidth)(N,B,W))return N;for(;O<(0,h.getStringWidth)(N+P,B,W)&&!(N.length<=1);)N=N.substring(0,N.length-1);return N.trim()+P}},964:function(a){if(typeof e=="undefined"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=e}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),c=s(776),h=s(664),f=s(972),m=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return m.Table}});var p=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var v=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return v.Row}});function _(O){(0,l.default)(O)}a.applyPlugin=_;function S(O,B){var W=(0,c.parseInput)(O,B),P=(0,f.createTable)(O,W);(0,h.drawTable)(O,P)}function x(O,B){var W=(0,c.parseInput)(O,B);return(0,f.createTable)(O,W)}a.__createTable=x;function T(O,B){(0,h.drawTable)(O,B)}a.__drawTable=T;try{var N=s(964);N.jsPDF&&(N=N.jsPDF),_(N)}catch(O){}a.default=S}(),o}()})})(MP);function FP(n){return nt(this,null,function*(){const t=new ie;t.setFont("helvetica"),t.setFontSize(20),t.text("Reporte de Ventas",105,20,{align:"center"}),t.setFontSize(12),t.text(`Período: ${Gr(n.fechaInicio)} - ${Gr(n.fechaFin)}`,20,35),t.text(`Total de Ventas: $${n.totalVentas.toFixed(2)}`,20,45),t.text(`Cantidad de Pedidos: ${n.cantidadPedidos}`,20,55);const e=[["ID","Cliente","Productos","Total","Fecha"]],i=n.pedidos.map(r=>[r.id,r.nombreCliente,r.productos.map(s=>`${s.cantidad}x ${s.nombre}`).join(`
`),`$${r.total.toFixed(2)}`,Gr(r.fechaCreacion)]);return t.autoTable({startY:65,head:e,body:i,theme:"grid",styles:{fontSize:10,cellPadding:5},columnStyles:{0:{cellWidth:20},1:{cellWidth:40},2:{cellWidth:60},3:{cellWidth:30},4:{cellWidth:40}}}),t.output("blob")})}class VP{static generarReporteVentas(t,e){return nt(this,null,function*(){try{const r=(yield sr.obtenerTodosPedidos()).datos.filter(a=>a.estado==="completed"&&new Date(a.fechaCreacion)>=new Date(t)&&new Date(a.fechaCreacion)<=new Date(e)),s={fechaInicio:t,fechaFin:e,totalVentas:r.reduce((a,l)=>a+l.total,0),cantidadPedidos:r.length,pedidos:r};return{exito:!0,datos:yield FP(s)}}catch(i){return{exito:!1,mensaje:i.message}}})}}class BP{static obtenerDatosAnalisis(){return nt(this,null,function*(){try{const e=(yield _i.obtenerTodosProductos()).datos.filter(S=>S.tipo==="terminado"),i=new Date,r=new Date(i.getTime()-7*24*60*60*1e3),s=new Date(i.getTime()-30*24*60*60*1e3),o=new Date(i.getTime()-180*24*60*60*1e3),a=Wo(Ni,"pedidos"),[l,c,h]=yield Promise.all([Dl(Hh(a,Al("estado","==","completed"),Al("fechaCreacion",">=",r.toISOString()),Rf("fechaCreacion","desc"))),Dl(Hh(a,Al("estado","==","completed"),Al("fechaCreacion",">=",s.toISOString()),Rf("fechaCreacion","desc"))),Dl(Hh(a,Al("estado","==","completed"),Al("fechaCreacion",">=",o.toISOString()),Rf("fechaCreacion","desc")))]),f=this.procesarDatosVentas(l,e),m=this.procesarDatosVentas(c,e),p=this.procesarDatosVentas(h,e),v=this.calcularTendencias(p,m),_=this.calcularPredicciones(m,e);return{exito:!0,datos:{estadisticas:{semanal:f,mensual:m,semestral:p},tendencias:v,predicciones:_}}}catch(t){return console.error("Error al obtener datos de análisis:",t),{exito:!1,mensaje:t.message}}})}static procesarDatosVentas(t,e){const i={};return e.forEach(r=>{i[r.nombre]={nombre:r.nombre,cantidad:0,ingresos:0}}),t.forEach(r=>{const s=r.data();s.productos&&Array.isArray(s.productos)&&s.productos.forEach(o=>{i[o.nombre]&&(i[o.nombre].cantidad+=o.cantidad,i[o.nombre].ingresos+=o.cantidad*o.precio)})}),Object.values(i)}static calcularTendencias(t,e){return t.map(i=>{const r=e.find(l=>l.nombre===i.nombre),s=i.cantidad/180||.01,a=(((r==null?void 0:r.cantidad)||0)/30-s)/s*100;return{nombre:i.nombre,tendencia:a.toFixed(2),estable:Math.abs(a)<10}})}static calcularPredicciones(t,e){return e.map(i=>{const r=t.find(a=>a.nombre===i.nombre),s=((r==null?void 0:r.cantidad)||0)/30,o=s>0?Math.floor(i.cantidad/s):999;return{nombre:i.nombre,stockActual:i.cantidad,ventaPromedioDiaria:s.toFixed(2),diasHastaAgotamiento:o,fechaEstimadaAgotamiento:o===999?"Sin datos suficientes":new Date(Date.now()+o*24*60*60*1e3).toLocaleDateString()}})}}function jP(n={}){return`
    <div class="analytics-container">
      <h2 class="section-title">Análisis de Ventas</h2>
      
      <div class="analytics-grid">
        <!-- Gráfico de Ventas Semanales -->
        <div class="analytics-card">
          <h3>Ventas de la Última Semana</h3>
          <canvas id="consumoSemanalChart"></canvas>
        </div>

        <!-- Gráfico de Ventas Mensuales -->
        <div class="analytics-card">
          <h3>Ventas del Último Mes</h3>
          <canvas id="consumoMensualChart"></canvas>
        </div>

        <!-- Gráfico de Tendencias Semestrales -->
        <div class="analytics-card">
          <h3>Tendencias de Venta (6 meses)</h3>
          <canvas id="consumoSemestralChart"></canvas>
        </div>

        <!-- Predicciones de Stock -->
        <div class="analytics-card">
          <h3>Predicciones de Stock</h3>
          <div class="predictions-table">
            <table>
              <thead>
                <tr>
                  <th>Producto</th>
                  <th>Stock Actual</th>
                  <th>Venta Promedio Diaria</th>
                  <th>Días hasta Agotamiento</th>
                  <th>Fecha Estimada de Agotamiento</th>
                </tr>
              </thead>
              <tbody>
                ${n.predicciones?n.predicciones.map(t=>`
                  <tr>
                    <td>${t.nombre}</td>
                    <td>${t.stockActual} unidades</td>
                    <td>${t.ventaPromedioDiaria} unidades</td>
                    <td>${t.diasHastaAgotamiento} días</td>
                    <td>${t.fechaEstimadaAgotamiento}</td>
                  </tr>
                `).join(""):""}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Análisis de Tendencias -->
        <div class="analytics-card">
          <h3>Análisis de Tendencias</h3>
          <div class="predictions-table">
            <table>
              <thead>
                <tr>
                  <th>Producto</th>
                  <th>Tendencia</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                ${n.tendencias?n.tendencias.map(t=>`
                  <tr>
                    <td>${t.nombre}</td>
                    <td>${t.tendencia}%</td>
                    <td>${t.estable?"Estable":t.tendencia>0?"Creciente":"Decreciente"}</td>
                  </tr>
                `).join(""):""}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  `}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Uu(n){return n+.5|0}const Lo=(n,t,e)=>Math.max(Math.min(n,e),t);function Bc(n){return Lo(Uu(n*2.55),0,255)}function Uo(n){return Lo(Uu(n*255),0,255)}function Es(n){return Lo(Uu(n/2.55)/100,0,1)}function M1(n){return Lo(Uu(n*100),0,100)}const rr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zp=[..."0123456789ABCDEF"],UP=n=>zp[n&15],zP=n=>zp[(n&240)>>4]+zp[n&15],Ih=n=>(n&240)>>4===(n&15),qP=n=>Ih(n.r)&&Ih(n.g)&&Ih(n.b)&&Ih(n.a);function HP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&rr[n[1]]*17,g:255&rr[n[2]]*17,b:255&rr[n[3]]*17,a:t===5?rr[n[4]]*17:255}:(t===7||t===9)&&(e={r:rr[n[1]]<<4|rr[n[2]],g:rr[n[3]]<<4|rr[n[4]],b:rr[n[5]]<<4|rr[n[6]],a:t===9?rr[n[7]]<<4|rr[n[8]]:255})),e}const WP=(n,t)=>n<255?t(n):"";function $P(n){var t=qP(n)?UP:zP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+WP(n.a,t):void 0}const GP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U5(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function KP(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function YP(n,t,e){const i=U5(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function XP(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function om(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=XP(e,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function am(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Uo)}function lm(n,t,e){return am(U5,n,t,e)}function QP(n,t,e){return am(YP,n,t,e)}function JP(n,t,e){return am(KP,n,t,e)}function z5(n){return(n%360+360)%360}function ZP(n){const t=GP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Bc(+t[5]):Uo(+t[5]));const r=z5(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=QP(r,s,o):t[1]==="hsv"?i=JP(r,s,o):i=lm(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function tT(n,t){var e=om(n);e[0]=z5(e[0]+t),e=lm(e),n.r=e[0],n.g=e[1],n.b=e[2]}function eT(n){if(!n)return;const t=om(n),e=t[0],i=M1(t[1]),r=M1(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Es(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const O1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nT(){const n={},t=Object.keys(F1),e=Object.keys(O1);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,O1[s]);s=parseInt(F1[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let Ph;function iT(n){Ph||(Ph=nT(),Ph.transparent=[0,0,0,0]);const t=Ph[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const rT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sT(n){const t=rT.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?Bc(o):Lo(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Bc(i):Lo(i,0,255)),r=255&(t[4]?Bc(r):Lo(r,0,255)),s=255&(t[6]?Bc(s):Lo(s,0,255)),{r:i,g:r,b:s,a:e}}}function oT(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Es(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const $f=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,El=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function aT(n,t,e){const i=El(Es(n.r)),r=El(Es(n.g)),s=El(Es(n.b));return{r:Uo($f(i+e*(El(Es(t.r))-i))),g:Uo($f(r+e*(El(Es(t.g))-r))),b:Uo($f(s+e*(El(Es(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Th(n,t,e){if(n){let i=om(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=lm(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function q5(n,t){return n&&Object.assign(t||{},n)}function V1(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Uo(n[3]))):(t=q5(n,{r:0,g:0,b:0,a:1}),t.a=Uo(t.a)),t}function lT(n){return n.charAt(0)==="r"?sT(n):ZP(n)}class _u{constructor(t){if(t instanceof _u)return t;const e=typeof t;let i;e==="object"?i=V1(t):e==="string"&&(i=HP(t)||iT(t)||lT(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=q5(this._rgb);return t&&(t.a=Es(t.a)),t}set rgb(t){this._rgb=V1(t)}rgbString(){return this._valid?oT(this._rgb):void 0}hexString(){return this._valid?$P(this._rgb):void 0}hslString(){return this._valid?eT(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=aT(this._rgb,t._rgb,e)),this}clone(){return new _u(this.rgb)}alpha(t){return this._rgb.a=Uo(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Uu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Th(this._rgb,2,t),this}darken(t){return Th(this._rgb,2,-t),this}saturate(t){return Th(this._rgb,1,t),this}desaturate(t){return Th(this._rgb,1,-t),this}rotate(t){return tT(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function As(){}const cT=(()=>{let n=0;return()=>n++})();function we(n){return n==null}function an(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ee(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Hi(n,t){return gn(n)?n:t}function be(n,t){return typeof n=="undefined"?t:n}const uT=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,H5=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Je(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ue(n,t,e,i){let r,s,o;if(an(n))for(s=n.length,r=0;r<s;r++)t.call(e,n[r],r);else if(Ee(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Ad(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function xd(n){if(an(n))return n.map(xd);if(Ee(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=xd(n[e[r]]);return t}return n}function W5(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function hT(n,t,e,i){if(!W5(n))return;const r=t[n],s=e[n];Ee(r)&&Ee(s)?wu(r,s,i):t[n]=xd(s)}function wu(n,t,e){const i=an(t)?t:[t],r=i.length;if(!Ee(n))return n;e=e||{};const s=e.merger||hT;let o;for(let a=0;a<r;++a){if(o=i[a],!Ee(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],n,o,e)}return n}function nu(n,t){return wu(n,t,{merger:dT})}function dT(n,t,e){if(!W5(n))return;const i=t[n],r=e[n];Ee(i)&&Ee(r)?nu(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=xd(r))}const B1={"":n=>n,x:n=>n.x,y:n=>n.y};function fT(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function pT(n){const t=fT(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Ko(n,t){return(B1[t]||(B1[t]=pT(t)))(n)}function cm(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Au=n=>typeof n!="undefined",Yo=n=>typeof n=="function",j1=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function gT(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const on=Math.PI,sn=2*on,mT=sn+on,Sd=Number.POSITIVE_INFINITY,yT=on/180,Sn=on/2,_a=on/4,U1=on*2/3,Co=Math.log10,ts=Math.sign;function iu(n,t,e){return Math.abs(n-t)<e}function z1(n){const t=Math.round(n);n=iu(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Co(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function vT(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function bT(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Jl(n){return!bT(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function _T(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function $5(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function wr(n){return n*(on/180)}function um(n){return n*(180/on)}function q1(n){if(!gn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function G5(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*on&&(s+=sn),{angle:s,distance:r}}function qp(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function wT(n,t){return(n-t+mT)%sn-on}function Wi(n){return(n%sn+sn)%sn}function xu(n,t,e,i){const r=Wi(n),s=Wi(t),o=Wi(e),a=Wi(s-r),l=Wi(o-r),c=Wi(r-s),h=Wi(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function jn(n,t,e){return Math.max(t,Math.min(e,n))}function AT(n){return jn(n,-32768,32767)}function ks(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function hm(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const Ns=(n,t,e,i)=>hm(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),xT=(n,t,e)=>hm(n,e,i=>n[i][t]>=e);function ST(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const K5=["push","pop","shift","splice","unshift"];function ET(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),K5.forEach(e=>{const i="_onData"+cm(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function H1(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(K5.forEach(s=>{delete n[s]}),delete n._chartjs)}function Y5(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const X5=function(){return typeof window=="undefined"?function(n){return n()}:window.requestAnimationFrame}();function Q5(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,X5.call(window,()=>{i=!1,n.apply(t,e)}))}}function IT(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const dm=n=>n==="start"?"left":n==="end"?"right":"center",oi=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,PT=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function J5(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:f,max:m,minDefined:p,maxDefined:v}=o.getUserBounds();if(p){if(r=Math.min(Ns(l,h,f).lo,e?i:Ns(t,h,o.getPixelForValue(f)).lo),c){const _=l.slice(0,r+1).reverse().findIndex(S=>!we(S[a.axis]));r-=Math.max(0,_)}r=jn(r,0,i-1)}if(v){let _=Math.max(Ns(l,o.axis,m,!0).hi+1,e?0:Ns(t,h,o.getPixelForValue(m),!0).hi+1);if(c){const S=l.slice(_-1).findIndex(x=>!we(x[a.axis]));_+=Math.max(0,S)}s=jn(_,r,i)-r}else s=i-r}return{start:r,count:s}}function Z5(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const Lh=n=>n===0||n===1,W1=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*sn/e)),$1=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*sn/e)+1,ru={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Sn)+1,easeOutSine:n=>Math.sin(n*Sn),easeInOutSine:n=>-.5*(Math.cos(on*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Lh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Lh(n)?n:W1(n,.075,.3),easeOutElastic:n=>Lh(n)?n:$1(n,.075,.3),easeInOutElastic(n){return Lh(n)?n:n<.5?.5*W1(n*2,.1125,.45):.5+.5*$1(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-ru.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ru.easeInBounce(n*2)*.5:ru.easeOutBounce(n*2-1)*.5+.5};function fm(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function G1(n){return fm(n)?n:new _u(n)}function Gf(n){return fm(n)?n:new _u(n).saturate(.5).darken(.1).hexString()}const TT=["x","y","borderWidth","radius","tension"],LT=["color","borderColor","backgroundColor"];function CT(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:LT},numbers:{type:"number",properties:TT}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function kT(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const K1=new Map;function NT(n,t){t=t||{};const e=n+JSON.stringify(t);let i=K1.get(e);return i||(i=new Intl.NumberFormat(n,t),K1.set(e,i)),i}function zu(n,t,e){return NT(t,e).format(n)}const tb={values(n){return an(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=RT(n,e)}const o=Co(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zu(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Co(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?tb.numeric.call(this,n,t,e):""}};function RT(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Zd={formatters:tb};function DT(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const $a=Object.create(null),Hp=Object.create(null);function su(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function Kf(n,t,e){return typeof t=="string"?wu(su(n,t),e):wu(su(n,""),t)}class MT{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Gf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Gf(r.borderColor),this.hoverColor=(i,r)=>Gf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Kf(this,t,e)}get(t){return su(this,t)}describe(t,e){return Kf(Hp,t,e)}override(t,e){return Kf($a,t,e)}route(t,e,i,r){const s=su(this,t),o=su(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Ee(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var ln=new MT({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CT,kT,DT]);function OT(n){return!n||we(n.size)||we(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ed(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function FT(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,h,f,m;for(l=0;l<a;l++)if(f=e[l],f!=null&&!an(f))o=Ed(n,r,s,o,f);else if(an(f))for(c=0,h=f.length;c<h;c++)m=f[c],m!=null&&!an(m)&&(o=Ed(n,r,s,o,m));n.restore();const p=s.length/2;if(p>e.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return o}function wa(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function Y1(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Wp(n,t,e,i){eb(n,t,e,i,null)}function eb(n,t,e,i,r){let s,o,a,l,c,h,f,m;const p=t.pointStyle,v=t.rotation,_=t.radius;let S=(v||0)*yT;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(S),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),p){default:r?n.ellipse(e,i,r/2,_,0,0,sn):n.arc(e,i,_,0,sn),n.closePath();break;case"triangle":h=r?r/2:_,n.moveTo(e+Math.sin(S)*h,i-Math.cos(S)*_),S+=U1,n.lineTo(e+Math.sin(S)*h,i-Math.cos(S)*_),S+=U1,n.lineTo(e+Math.sin(S)*h,i-Math.cos(S)*_),n.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(S+_a)*l,f=Math.cos(S+_a)*(r?r/2-c:l),a=Math.sin(S+_a)*l,m=Math.sin(S+_a)*(r?r/2-c:l),n.arc(e-f,i-a,c,S-on,S-Sn),n.arc(e+m,i-o,c,S-Sn,S),n.arc(e+f,i+a,c,S,S+Sn),n.arc(e-m,i+o,c,S+Sn,S+on),n.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,h=r?r/2:l,n.rect(e-h,i-l,2*h,2*l);break}S+=_a;case"rectRot":f=Math.cos(S)*(r?r/2:_),o=Math.cos(S)*_,a=Math.sin(S)*_,m=Math.sin(S)*(r?r/2:_),n.moveTo(e-f,i-a),n.lineTo(e+m,i-o),n.lineTo(e+f,i+a),n.lineTo(e-m,i+o),n.closePath();break;case"crossRot":S+=_a;case"cross":f=Math.cos(S)*(r?r/2:_),o=Math.cos(S)*_,a=Math.sin(S)*_,m=Math.sin(S)*(r?r/2:_),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"star":f=Math.cos(S)*(r?r/2:_),o=Math.cos(S)*_,a=Math.sin(S)*_,m=Math.sin(S)*(r?r/2:_),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o),S+=_a,f=Math.cos(S)*(r?r/2:_),o=Math.cos(S)*_,a=Math.sin(S)*_,m=Math.sin(S)*(r?r/2:_),n.moveTo(e-f,i-a),n.lineTo(e+f,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"line":o=r?r/2:Math.cos(S)*_,a=Math.sin(S)*_,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(S)*(r?r/2:_),i+Math.sin(S)*_);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Rs(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function tf(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ef(n){n.restore()}function VT(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function BT(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function jT(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),we(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function UT(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function zT(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Ga(n,t,e,i,r,s={}){const o=an(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,jT(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&zT(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),we(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),UT(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function Su(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*on,on,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,on,Sn,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Sn,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Sn,!0),n.lineTo(e+o.topLeft,i)}const qT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HT=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WT(n,t){const e=(""+n).match(qT);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const $T=n=>+n||0;function pm(n,t){const e={},i=Ee(t),r=i?Object.keys(t):t,s=Ee(n)?i?o=>be(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=$T(s(o));return e}function nb(n){return pm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Fa(n){return pm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function fi(n){const t=nb(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Mn(n,t){n=n||{},t=t||ln.font;let e=be(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=be(n.style,t.style);i&&!(""+i).match(HT)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:be(n.family,t.family),lineHeight:WT(be(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:be(n.weight,t.weight),string:""};return r.string=OT(r),r}function jc(n,t,e,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function GT(n,t,e){const{min:i,max:r}=n,s=H5(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Jo(n,t){return Object.assign(Object.create(n),t)}function gm(n,t=[""],e,i,r=()=>n[0]){const s=e||n;typeof i=="undefined"&&(i=ob("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>gm([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return rb(a,l,()=>e3(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Q1(a).includes(l)},ownKeys(a){return Q1(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Zl(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:ib(n,i),setContext:s=>Zl(n,s,e,i),override:s=>Zl(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return rb(s,o,()=>YT(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function ib(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Yo(e)?e:()=>e,isIndexable:Yo(i)?i:()=>i}}const KT=(n,t)=>n?n+cm(t):t,mm=(n,t)=>Ee(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rb(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function YT(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return Yo(a)&&o.isScriptable(t)&&(a=XT(t,a,n,e)),an(a)&&a.length&&(a=QT(t,a,n,o.isIndexable)),mm(t,a)&&(a=Zl(a,r,s&&s[t],o)),a}function XT(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),mm(n,l)&&(l=ym(r._scopes,r,n,l)),l}function QT(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index!="undefined"&&i(n))return t[s.index%t.length];if(Ee(t[0])){const l=t,c=r._scopes.filter(h=>h!==l);t=[];for(const h of l){const f=ym(c,r,n,h);t.push(Zl(f,s,o&&o[n],a))}}return t}function sb(n,t,e){return Yo(n)?n(t,e):n}const JT=(n,t)=>n===!0?t:typeof n=="string"?Ko(t,n):void 0;function ZT(n,t,e,i,r){for(const s of t){const o=JT(e,s);if(o){n.add(o);const a=sb(o._fallback,e,r);if(typeof a!="undefined"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i!="undefined"&&e!==i)return null}return!1}function ym(n,t,e,i){const r=t._rootScopes,s=sb(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=X1(a,o,e,s||e,i);return l===null||typeof s!="undefined"&&s!==e&&(l=X1(a,o,s,l,i),l===null)?!1:gm(Array.from(a),[""],r,s,()=>t3(t,e,i))}function X1(n,t,e,i,r){for(;e;)e=ZT(n,t,e,i,r);return e}function t3(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return an(r)&&Ee(e)?e:r||{}}function e3(n,t,e,i){let r;for(const s of t)if(r=ob(KT(s,n),e),typeof r!="undefined")return mm(n,r)?ym(e,i,n,r):r}function ob(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i!="undefined")return i}}function Q1(n){let t=n._keys;return t||(t=n._keys=n3(n._scopes)),t}function n3(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function ab(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+e,h=t[c],o[a]={r:r.parse(Ko(h,s),c)};return o}const i3=Number.EPSILON||1e-14,tc=(n,t)=>t<n.length&&!n[t].skip&&n[t],lb=n=>n==="x"?"y":"x";function r3(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=qp(s,r),l=qp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=i*c,m=i*h;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+m*(o.x-r.x),y:s.y+m*(o.y-r.y)}}}function s3(n,t,e){const i=n.length;let r,s,o,a,l,c=tc(n,0);for(let h=0;h<i-1;++h)if(l=c,c=tc(n,h+1),!(!l||!c)){if(iu(t[h],0,i3)){e[h]=e[h+1]=0;continue}r=e[h]/t[h],s=e[h+1]/t[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=r*o*t[h],e[h+1]=s*o*t[h])}}function o3(n,t,e="x"){const i=lb(e),r=n.length;let s,o,a,l=tc(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=tc(n,c+1),!a)continue;const h=a[e],f=a[i];o&&(s=(h-o[e])/3,a[`cp1${e}`]=h-s,a[`cp1${i}`]=f-s*t[c]),l&&(s=(l[e]-h)/3,a[`cp2${e}`]=h+s,a[`cp2${i}`]=f+s*t[c])}}function a3(n,t="x"){const e=lb(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=tc(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=tc(n,o+1),!!l){if(c){const h=c[t]-l[t];r[o]=h!==0?(c[e]-l[e])/h:0}s[o]=a?c?ts(r[o-1])!==ts(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}s3(n,r,s),o3(n,s,t)}function Ch(n,t,e){return Math.max(Math.min(n,e),t)}function l3(n,t){let e,i,r,s,o,a=Rs(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Rs(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=Ch(r.cp1x,t.left,t.right),r.cp1y=Ch(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Ch(r.cp2x,t.left,t.right),r.cp2y=Ch(r.cp2y,t.top,t.bottom)))}function c3(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")a3(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=r3(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&l3(n,e)}function vm(){return typeof window!="undefined"&&typeof document!="undefined"}function bm(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Id(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const nf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function u3(n,t){return nf(n).getPropertyValue(t)}const h3=["top","right","bottom","left"];function Va(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=h3[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const d3=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function f3(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(d3(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ia(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=nf(e),s=r.boxSizing==="border-box",o=Va(r,"padding"),a=Va(r,"border","width"),{x:l,y:c,box:h}=f3(n,e),f=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:p,height:v}=t;return s&&(p-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/p*e.width/i),y:Math.round((c-m)/v*e.height/i)}}function p3(n,t,e){let i,r;if(t===void 0||e===void 0){const s=n&&bm(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const o=s.getBoundingClientRect(),a=nf(s),l=Va(a,"border","width"),c=Va(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=Id(a.maxWidth,s,"clientWidth"),r=Id(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||Sd,maxHeight:r||Sd}}const kh=n=>Math.round(n*10)/10;function g3(n,t,e,i){const r=nf(n),s=Va(r,"margin"),o=Id(r.maxWidth,n,"clientWidth")||Sd,a=Id(r.maxHeight,n,"clientHeight")||Sd,l=p3(n,t,e);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const m=Va(r,"border","width"),p=Va(r,"padding");c-=p.width+m.width,h-=p.height+m.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=kh(Math.min(c,o,l.maxWidth)),h=kh(Math.min(h,a,l.maxHeight)),c&&!h&&(h=kh(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=kh(Math.floor(h*i))),{width:c,height:h}}function J1(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const m3=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};vm()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return n}();function Z1(n,t){const e=u3(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Pa(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function y3(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function v3(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=Pa(n,r,e),a=Pa(r,s,e),l=Pa(s,t,e),c=Pa(o,a,e),h=Pa(a,l,e);return Pa(c,h,e)}const b3=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},_3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Ul(n,t,e){return n?b3(t,e):_3()}function cb(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function ub(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function hb(n){return n==="angle"?{between:xu,compare:wT,normalize:Wi}:{between:ks,compare:(t,e)=>t-e,normalize:t=>t}}function t2({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function w3(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=hb(i),l=t.length;let{start:c,end:h,loop:f}=n,m,p;if(f){for(c+=l,h+=l,m=0,p=l;m<p&&o(a(t[c%l][i]),r,s);++m)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:n.style}}function db(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=hb(i),{start:h,end:f,loop:m,style:p}=w3(n,t,e),v=[];let _=!1,S=null,x,T,N;const O=()=>l(r,N,x)&&a(r,N)!==0,B=()=>a(s,x)===0||l(s,N,x),W=()=>_||O(),P=()=>!_||B();for(let A=h,C=h;A<=f;++A)T=t[A%o],!T.skip&&(x=c(T[i]),x!==N&&(_=l(x,r,s),S===null&&W()&&(S=a(x,r)===0?A:C),S!==null&&P()&&(v.push(t2({start:S,end:A,loop:m,count:o,style:p})),S=null),C=A,N=x));return S!==null&&v.push(t2({start:S,end:f,loop:m,count:o,style:p})),v}function fb(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=db(i[r],n.points,t);s.length&&e.push(...s)}return e}function A3(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function x3(n,t,e,i){const r=n.length,s=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function S3(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=A3(e,r,s,i);if(i===!0)return e2(n,[{start:o,end:a,loop:s}],e,t);const l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return e2(n,x3(e,o,l,c),e,t)}function e2(n,t,e,i){return!i||!i.setContext||!e?t:E3(n,t,e,i)}function E3(n,t,e,i){const r=n._chart.getContext(),s=n2(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let h=s,f=t[0].start,m=f;function p(v,_,S,x){const T=a?-1:1;if(v!==_){for(v+=l;e[v%l].skip;)v-=T;for(;e[_%l].skip;)_+=T;v%l!==_%l&&(c.push({start:v%l,end:_%l,loop:S,style:x}),h=x,f=_%l)}}for(const v of t){f=a?f:v.start;let _=e[f%l],S;for(m=f+1;m<=v.end;m++){const x=e[m%l];S=n2(i.setContext(Jo(r,{type:"segment",p0:_,p1:x,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),I3(S,h)&&p(f,m-1,v.loop,h),_=x,h=S}f<m-1&&p(f,m-1,v.loop,h)}return c}function n2(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function I3(n,t){if(!t)return!1;const e=[],i=function(r,s){return fm(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Nh(n,t,e){return n.options.clip?n[e]:t[e]}function P3(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Nh(e,t,"left"),right:Nh(e,t,"right"),top:Nh(i,t,"top"),bottom:Nh(i,t,"bottom")}:t}function pb(n,t){const e=t._clip;if(e.disabled)return!1;const i=P3(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class T3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=X5.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xs=new T3;const i2="transparent",L3={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=G1(n||i2),r=i.valid&&G1(t||i2);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class C3{constructor(t,e,i,r){const s=e[i];r=jc([t.to,r,s,t.from]);const o=jc([t.from,s,r]);this._active=!0,this._fn=t.fn||L3[t.type||typeof o],this._easing=ru[t.easing]||ru.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=jc([t.to,e,r,t.from]),this._from=jc([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class gb{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ee(t))return;const e=Object.keys(ln.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ee(s))return;const o={};for(const a of e)o[a]=s[a];(an(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=N3(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&k3(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}const h=e[c];let f=s[c];const m=i.get(c);if(f)if(m&&f.active()){f.update(m,h,a);continue}else f.cancel();if(!m||!m.duration){t[c]=h;continue}s[c]=f=new C3(m,t,c,h),r.push(f)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return xs.add(this._chart,i),!0}}function k3(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function N3(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function r2(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function R3(n,t,e){if(e===!1)return!1;const i=r2(n,e),r=r2(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function D3(n){let t,e,i,r;return Ee(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function mb(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function s2(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(h=!0,i.all)continue;break}c=n.values[l],gn(c)&&(s||t===0||ts(t)===ts(c))&&(t+=c)}return!h&&!i.all?0:t}function M3(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:n[h]};return a}function Yf(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function O3(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function F3(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function V3(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function o2(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function a2(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=O3(s,o,i),f=t.length;let m;for(let p=0;p<f;++p){const v=t[p],{[l]:_,[c]:S}=v,x=v._stacks||(v._stacks={});m=x[c]=V3(r,h,_),m[a]=S,m._top=o2(m,o,!0,i.type),m._bottom=o2(m,o,!1,i.type);const T=m._visualValues||(m._visualValues={});T[a]=S}}function Xf(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function B3(n,t){return Jo(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function j3(n,t,e){return Jo(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Tc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const Qf=n=>n==="reset"||n==="none",l2=(n,t)=>t?n:Object.assign({},n),U3=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:mb(e,!0),values:null};class xr{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Yf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Tc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(f,m,p,v)=>f==="x"?m:f==="r"?v:p,s=e.xAxisID=be(i.xAxisID,Xf(t,"x")),o=e.yAxisID=be(i.yAxisID,Xf(t,"y")),a=e.rAxisID=be(i.rAxisID,Xf(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,s,o,a),h=e.vAxisID=r(l,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&H1(this._data,this),t._stacked&&Tc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ee(e)){const r=this._cachedMeta;this._data=M3(e,r)}else if(i!==e){if(i){H1(i,this);const r=this._cachedMeta;Tc(r),r._parsed=[]}e&&Object.isExtensible(e)&&ET(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=Yf(e.vScale,e),e.stack!==i.stack&&(r=!0,Tc(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(a2(this,e._parsed),e._stacked=Yf(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,f,m;if(this._parsing===!1)i._parsed=r,i._sorted=!0,m=r;else{an(r[t])?m=this.parseArrayData(i,r,t,e):Ee(r[t])?m=this.parseObjectData(i,r,t,e):m=this.parsePrimitiveData(i,r,t,e);const p=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<e;++h)i._parsed[h+t]=f=m[h],l&&(p()&&(l=!1),c=f);i._sorted=l}o&&a2(this,m)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,f=new Array(r);let m,p,v;for(m=0,p=r;m<p;++m)v=m+i,f[m]={[a]:h||s.parse(c[v],v),[l]:o.parse(e[v],v)};return f}parseArrayData(t,e,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,c,h,f;for(l=0,c=r;l<c;++l)h=l+i,f=e[h],a[l]={x:s.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(t,e,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,f,m,p;for(h=0,f=r;h<f;++h)m=h+i,p=e[m],c[h]={x:s.parse(Ko(p,a),m),y:o.parse(Ko(p,l),m)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:mb(r,!0),values:e._stacks[t.axis]._visualValues};return s2(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let o=s===null?NaN:s;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=s2(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=U3(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=F3(a);let m,p;function v(){p=r[m];const _=p[a.axis];return!gn(p[t.axis])||h>_||f<_}for(m=0;m<o&&!(!v()&&(this.updateRangeFromParsed(c,t,p,l),s));++m);if(s){for(m=o-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],gn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=D3(be(this.options.clip,R3(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,s,a,l),h=a;h<a+l;++h){const f=r[h];f.hidden||(f.active&&c?o.push(f):f.draw(t,s))}for(h=0;h<o.length;++h)o[h].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=j3(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=B3(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],l=this.enableOptionSharing&&Au(i);if(a)return l2(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],m=c.getOptionScopes(this.getDataset(),h),p=Object.keys(ln.elements[t]),v=()=>this.getContext(i,r,e),_=c.resolveNamedOptions(m,p,v,f);return _.$shared&&(_.$shared=l,s[o]=Object.freeze(l2(_,l))),_}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,e),m=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(m,this.getContext(t,i,e))}const c=new gb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Qf(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){Qf(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Qf(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Tc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ft(xr,"defaults",{}),Ft(xr,"datasetElementType",null),Ft(xr,"dataElementType",null);function z3(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=Y5(i.sort((r,s)=>r-s))}return n._cache.$bar}function q3(n){const t=n.iScale,e=z3(t,n.type);let i=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Au(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function H3(n,t,e,i){const r=e.barThickness;let s,o;return we(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function W3(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function $3(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function yb(n,t,e,i){return an(n)?$3(n,t,e,i):t[e.axis]=e.parse(n,i),t}function c2(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,f,m;for(c=e,h=e+i;c<h;++c)m=t[c],f={},f[r.axis]=a||r.parse(o[c],c),l.push(yb(m,f,s,c));return l}function Jf(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function G3(n,t,e){return n!==0?ts(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function K3(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function Y3(n,t,e,i){let r=t.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=K3(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=h:(s[u2(h,o,a,l)]=!0,r=c)),s[u2(r,o,a,l)]=!0,n.borderSkipped=s}function u2(n,t,e,i){return i?(n=X3(n,t,e),n=h2(n,e,t)):n=h2(n,t,e),n}function X3(n,t,e){return n===t?e:n===e?t:n}function h2(n,t,e){return n==="start"?t:n==="end"?e:n}function Q3(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Xh extends xr{parsePrimitiveData(t,e,i,r){return c2(t,e,i,r)}parseArrayData(t,e,i,r){return c2(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,f=[];let m,p,v,_;for(m=i,p=i+r;m<p;++m)_=e[m],v={},v[s.axis]=s.parse(Ko(_,c),m),f.push(yb(Ko(_,h),v,o,m));return f}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),o=s._custom,a=Jf(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:m}=this._getSharedOptions(e,r);for(let p=e;p<e+i;p++){const v=this.getParsed(p),_=s||we(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),S=this._calculateBarIndexPixels(p,h),x=(v._stacks||{})[a.axis],T={horizontal:c,base:_.base,enableBorderRadius:!x||Jf(v._custom)||o===x._top||o===x._bottom,x:c?_.head:S.center,y:c?S.center:_.head,height:c?S.size:Math.abs(_.size),width:c?Math.abs(_.size):S.size};m&&(T.options=f||this.resolveDataElementOptions(p,t[p].active?"active":r));const N=T.options||t[p].options;Y3(T,N,x,o),Q3(T,N,h.ratio),this.updateElement(t[p],p,T,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[i.axis],c=h=>{const f=h._parsed.find(p=>p[i.axis]===l),m=f&&f[h.vScale.axis];if(we(m)||isNaN(m))return!0};for(const h of r)if(!(e!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let s,o;for(s=0,o=e.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=t.barThickness;return{min:a||q3(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,h=Jf(c);let f=l[e.axis],m=0,p=i?this.applyStack(e,l,i):f,v,_;p!==f&&(m=p-f,p=f),h&&(f=c.barStart,p=c.barEnd-c.barStart,f!==0&&ts(f)!==ts(c.barEnd)&&(m=0),m+=f);const S=!we(s)&&!h?s:m;let x=e.getPixelForValue(S);if(this.chart.getDataVisibility(t)?v=e.getPixelForValue(m+p):v=x,_=v-x,Math.abs(_)<o){_=G3(_,e,a)*o,f===a&&(x-=_/2);const T=e.getPixelForDecimal(0),N=e.getPixelForDecimal(1),O=Math.min(T,N),B=Math.max(T,N);x=Math.max(Math.min(x,B),O),v=x+_,i&&!h&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(v)-e.getValueForPixel(x))}if(x===e.getPixelForValue(a)){const T=ts(_)*e.getLineWidthForValue(a)/2;x+=T,_-=T}return{size:_,base:x,head:v,center:v+_/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,s=r.skipNull,o=be(r.maxBarThickness,1/0);let a,l;if(e.grouped){const c=s?this._getStackCount(t):e.stackCount,h=r.barThickness==="flex"?W3(t,e,r,c):H3(t,e,r,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=h.start+h.chunk*f+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}Ft(Xh,"id","bar"),Ft(Xh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ft(Xh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qh extends xr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const s=super.parsePrimitiveData(t,e,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(t,e,i,r){const s=super.parseArrayData(t,e,i,r);for(let o=0;o<s.length;o++){const a=e[i+o];s[o]._custom=be(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(t,e,i,r){const s=super.parseObjectData(t,e,i,r);for(let o=0;o<s.length;o++){const a=e[i+o];s[o]._custom=be(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,r),h=o.axis,f=a.axis;for(let m=e;m<e+i;m++){const p=t[m],v=!s&&this.getParsed(m),_={},S=_[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(v[h]),x=_[f]=s?a.getBasePixel():a.getPixelForValue(v[f]);_.skip=isNaN(S)||isNaN(x),c&&(_.options=l||this.resolveDataElementOptions(m,p.active?"active":r),s&&(_.options.radius=0)),this.updateElement(p,m,_,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return e!=="active"&&(r.radius=0),r.radius+=be(i&&i._custom,s),r}}Ft(Qh,"id","bubble"),Ft(Qh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ft(Qh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function J3(n,t,e){let i=1,r=1,s=0,o=0;if(t<sn){const a=n,l=a+t,c=Math.cos(a),h=Math.sin(a),f=Math.cos(l),m=Math.sin(l),p=(N,O,B)=>xu(N,a,l,!0)?1:Math.max(O,O*e,B,B*e),v=(N,O,B)=>xu(N,a,l,!0)?-1:Math.min(O,O*e,B,B*e),_=p(0,c,f),S=p(Sn,h,m),x=v(on,c,f),T=v(on+Sn,h,m);i=(_-x)/2,r=(S-T)/2,s=-(_+x)/2,o=-(S+T)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Ca extends xr{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(Ee(i[t])){const{key:l="value"}=this._parsing;s=c=>+Ko(i[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return wr(this.options.rotation-90)}_getCircumference(){return wr(this.options.circumference)}_getRotationExtents(){let t=sn,e=-sn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(uT(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:v,offsetY:_}=J3(f,h,l),S=(i.width-o)/m,x=(i.height-o)/p,T=Math.max(Math.min(S,x)/2,0),N=H5(this.options.radius,T),O=Math.max(N*l,0),B=(N-O)/this._getVisibleDatasetWeightTotal();this.offsetX=v*N,this.offsetY=_*N,r.total=this.calculateTotal(),this.outerRadius=N-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*c,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/sn)}updateElements(t,e,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,f=(a.top+a.bottom)/2,m=s&&c.animateScale,p=m?0:this.innerRadius,v=m?0:this.outerRadius,{sharedOptions:_,includeOptions:S}=this._getSharedOptions(e,r);let x=this._getRotation(),T;for(T=0;T<e;++T)x+=this._circumference(T,s);for(T=e;T<e+i;++T){const N=this._circumference(T,s),O=t[T],B={x:h+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+N,circumference:N,outerRadius:v,innerRadius:p};S&&(B.options=_||this.resolveDataElementOptions(T,O.active?"active":r)),x+=N,this.updateElement(O,T,B,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?sn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=zu(e._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,s,o,a,l;if(!t){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,a=o.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const s=this.resolveDataElementOptions(i);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(be(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ft(Ca,"id","doughnut"),Ft(Ca,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ft(Ca,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Ft(Ca,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class Jh extends xr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=J5(e,r,o);this._drawStart=a,this._drawCount=l,Z5(e)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},t),this.updateElements(r,a,l,t)}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,r),m=o.axis,p=a.axis,{spanGaps:v,segment:_}=this.options,S=Jl(v)?v:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||r==="none",T=e+i,N=t.length;let O=e>0&&this.getParsed(e-1);for(let B=0;B<N;++B){const W=t[B],P=x?W:{};if(B<e||B>=T){P.skip=!0;continue}const A=this.getParsed(B),C=we(A[p]),D=P[m]=o.getPixelForValue(A[m],B),E=P[p]=s||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[p],B);P.skip=isNaN(D)||isNaN(E)||C,P.stop=B>0&&Math.abs(A[m]-O[m])>S,_&&(P.parsed=A,P.raw=c.data[B]),f&&(P.options=h||this.resolveDataElementOptions(B,W.active?"active":r)),x||this.updateElement(W,B,P,r),O=A}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ft(Jh,"id","line"),Ft(Jh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ft(Jh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ou extends xr{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=zu(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,e,i,r){return ab.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,f=c.yCenter,m=c.getIndexAngle(0)-.5*on;let p=m,v;const _=360/this.countVisibleElements();for(v=0;v<e;++v)p+=this._computeAngle(v,r,_);for(v=e;v<e+i;v++){const S=t[v];let x=p,T=p+this._computeAngle(v,r,_),N=o.getDataVisibility(v)?c.getDistanceFromCenterForValue(this.getParsed(v).r):0;p=T,s&&(l.animateScale&&(N=0),l.animateRotate&&(x=T=m));const O={x:h,y:f,innerRadius:0,outerRadius:N,startAngle:x,endAngle:T,options:this.resolveDataElementOptions(v,S.active?"active":r)};this.updateElement(S,v,O,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?wr(this.resolveDataElementOptions(t,e).angle||i):0}}Ft(ou,"id","polarArea"),Ft(ou,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ft(ou,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $p extends Ca{}Ft($p,"id","pie"),Ft($p,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Zh extends xr{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return ab.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],s=e.iScale.getLabels();if(i.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=e;a<e+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":r),h=s.getPointPositionForValue(a,this.getParsed(a).r),f=o?s.xCenter:h.x,m=o?s.yCenter:h.y,p={x:f,y:m,angle:h.angle,skip:isNaN(f)||isNaN(m),options:c};this.updateElement(l,a,p,r)}}}Ft(Zh,"id","radar"),Ft(Zh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ft(Zh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class td extends xr{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:s,count:o}=J5(e,i,r);if(this._drawStart=s,this._drawCount=o,Z5(e)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,r),f=this.getSharedOptions(h),m=this.includeOptions(r,f),p=o.axis,v=a.axis,{spanGaps:_,segment:S}=this.options,x=Jl(_)?_:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none";let N=e>0&&this.getParsed(e-1);for(let O=e;O<e+i;++O){const B=t[O],W=this.getParsed(O),P=T?B:{},A=we(W[v]),C=P[p]=o.getPixelForValue(W[p],O),D=P[v]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,W,l):W[v],O);P.skip=isNaN(C)||isNaN(D)||A,P.stop=O>0&&Math.abs(W[p]-N[p])>x,S&&(P.parsed=W,P.raw=c.data[O]),m&&(P.options=f||this.resolveDataElementOptions(O,B.active?"active":r)),T||this.updateElement(B,O,P,r),N=W}this.updateSharedOptions(f,r,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const s=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,s,o)/2}}Ft(td,"id","scatter"),Ft(td,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ft(td,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Z3=Object.freeze({__proto__:null,BarController:Xh,BubbleController:Qh,DoughnutController:Ca,LineController:Jh,PieController:$p,PolarAreaController:ou,RadarController:Zh,ScatterController:td});function Aa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _m{constructor(t){Ft(this,"options");this.options=t||{}}static override(t){Object.assign(_m.prototype,t)}init(){}formats(){return Aa()}parse(){return Aa()}format(){return Aa()}add(){return Aa()}diff(){return Aa()}startOf(){return Aa()}endOf(){return Aa()}}var tL={_date:_m};function eL(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const c=a._reversePixels?xT:Ns;if(i){if(r._sharedOptions){const h=s[0],f=typeof h.getRange=="function"&&h.getRange(t);if(f){const m=c(s,t,e-f),p=c(s,t,e+f);return{lo:m.lo,hi:p.hi}}}}else{const h=c(s,t,e);if(l){const{vScale:f}=r._cachedMeta,{_parsed:m}=n,p=m.slice(0,h.lo+1).reverse().findIndex(_=>!we(_[f.axis]));h.lo-=Math.max(0,p);const v=m.slice(h.hi).findIndex(_=>!we(_[f.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function qu(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:f,hi:m}=eL(s[a],t,o,r);for(let p=f;p<=m;++p){const v=h[p];v.skip||i(v,c,p)}}}function nL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Zf(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||qu(n,e,t,function(a,l,c){!r&&!Rs(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function iL(n,t,e,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:f}=G5(o,{x:t.x,y:t.y});xu(f,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return qu(n,e,t,s),r}function rL(n,t,e,i,r,s){let o=[];const a=nL(e);let l=Number.POSITIVE_INFINITY;function c(h,f,m){const p=h.inRange(t.x,t.y,r);if(i&&!p)return;const v=h.getCenterPoint(r);if(!(!!s||n.isPointInArea(v))&&!p)return;const S=a(t,v);S<l?(o=[{element:h,datasetIndex:f,index:m}],l=S):S===l&&o.push({element:h,datasetIndex:f,index:m})}return qu(n,e,t,c),o}function tp(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?iL(n,t,e,r):rL(n,t,e,i,r,s)}function d2(n,t,e,i,r){const s=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return qu(n,e,t,(l,c,h)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var sL={evaluateInteractionItems:qu,modes:{index(n,t,e,i){const r=Ia(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Zf(n,r,s,i,o):tp(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,i){const r=Ia(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?Zf(n,r,s,i,o):tp(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const r=Ia(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Zf(n,r,s,i,o)},nearest(n,t,e,i){const r=Ia(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return tp(n,r,s,e.intersect,i,o)},x(n,t,e,i){const r=Ia(t,n);return d2(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Ia(t,n);return d2(n,r,"y",e.intersect,i)}}};const vb=["left","top","right","bottom"];function Lc(n,t){return n.filter(e=>e.pos===t)}function f2(n,t){return n.filter(e=>vb.indexOf(e.pos)===-1&&e.box.axis===t)}function Cc(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function oL(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function aL(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!vb.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function lL(n,t){const e=aL(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&t.availableHeight)}return e}function cL(n){const t=oL(n),e=Cc(t.filter(c=>c.box.fullSize),!0),i=Cc(Lc(t,"left"),!0),r=Cc(Lc(t,"right")),s=Cc(Lc(t,"top"),!0),o=Cc(Lc(t,"bottom")),a=f2(t,"x"),l=f2(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Lc(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function p2(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function bb(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function uL(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Ee(r)){e.size&&(n[r]-=e.size);const f=i[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,n[r]+=e.size}s.getPadding&&bb(o,s.getPadding());const a=Math.max(0,t.outerWidth-p2(o,n,"left","right")),l=Math.max(0,t.outerHeight-p2(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function hL(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function dL(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Uc(n,t,e,i){const r=[];let s,o,a,l,c,h;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,dL(a.horizontal,t));const{same:f,other:m}=uL(t,e,a,i);c|=f&&r.length,h=h||m,l.fullSize||r.push(a)}return c&&Uc(r,t,e,i)||h}function Rh(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function g2(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*h,m=c.size||l.height;Au(c.start)&&(o=c.start),l.fullSize?Rh(l,r.left,o,e.outerWidth-r.right-r.left,m):Rh(l,t.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*h,m=c.size||l.width;Au(c.start)&&(s=c.start),l.fullSize?Rh(l,s,r.top,m,e.outerHeight-r.bottom-r.top):Rh(l,s,t.top+c.placed,m,f),c.start=s,c.placed+=f,s=l.right}}t.x=s,t.y=o}var ui={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=fi(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=cL(n.boxes),l=a.vertical,c=a.horizontal;Ue(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const h=l.reduce((_,S)=>S.box.options&&S.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},r);bb(m,fi(i));const p=Object.assign({maxPadding:m,w:s,h:o,x:r.left,y:r.top},r),v=lL(l.concat(c),f);Uc(a.fullSize,p,f,v),Uc(l,p,f,v),Uc(c,p,f,v)&&Uc(l,p,f,v),hL(p),g2(a.leftAndTop,p,f,v),p.x+=p.w,p.y+=p.h,g2(a.rightAndBottom,p,f,v),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ue(a.chartArea,_=>{const S=_.box;Object.assign(S,n.chartArea),S.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class _b{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class fL extends _b{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ed="$chartjs",pL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},m2=n=>n===null||n==="";function gL(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[ed]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",m2(r)){const s=Z1(n,"width");s!==void 0&&(n.width=s)}if(m2(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=Z1(n,"height");s!==void 0&&(n.height=s)}return n}const wb=m3?{passive:!0}:!1;function mL(n,t,e){n&&n.addEventListener(t,e,wb)}function yL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,wb)}function vL(n,t){const e=pL[n.type]||n.type,{x:i,y:r}=Ia(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Pd(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function bL(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Pd(a.addedNodes,i),o=o&&!Pd(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function _L(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Pd(a.removedNodes,i),o=o&&!Pd(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Eu=new Map;let y2=0;function Ab(){const n=window.devicePixelRatio;n!==y2&&(y2=n,Eu.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function wL(n,t){Eu.size||window.addEventListener("resize",Ab),Eu.set(n,t)}function AL(n){Eu.delete(n),Eu.size||window.removeEventListener("resize",Ab)}function xL(n,t,e){const i=n.canvas,r=i&&bm(i);if(!r)return;const s=Q5((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),wL(n,s),o}function ep(n,t,e){e&&e.disconnect(),t==="resize"&&AL(n)}function SL(n,t,e){const i=n.canvas,r=Q5(s=>{n.ctx!==null&&e(vL(s,n))},n);return mL(i,t,r),r}class EL extends _b{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(gL(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[ed])return!1;const i=e[ed].initial;["height","width"].forEach(s=>{const o=i[s];we(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[ed],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:bL,detach:_L,resize:xL}[e]||SL;r[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:ep,detach:ep,resize:ep}[e]||yL)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return g3(t,e,i,r)}isAttached(t){const e=t&&bm(t);return!!(e&&e.isConnected)}}function IL(n){return!vm()||typeof OffscreenCanvas!="undefined"&&n instanceof OffscreenCanvas?fL:EL}class Er{constructor(){Ft(this,"x");Ft(this,"y");Ft(this,"active",!1);Ft(this,"options");Ft(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Jl(this.x)&&Jl(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Ft(Er,"defaults",{}),Ft(Er,"defaultRoutes");function PL(n,t){const e=n.options.ticks,i=TL(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?CL(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return kL(t,c,s,o/r),c;const h=LL(s,t,r);if(o>0){let f,m;const p=o>1?Math.round((l-a)/(o-1)):null;for(Dh(t,c,h,we(p)?0:a-p,a),f=0,m=o-1;f<m;f++)Dh(t,c,h,s[f],s[f+1]);return Dh(t,c,h,l,we(p)?t.length:l+p),c}return Dh(t,c,h),c}function TL(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function LL(n,t,e){const i=NL(n),r=t.length/e;if(!i)return Math.max(r,1);const s=vT(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function CL(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function kL(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function Dh(n,t,e,i,r){const s=be(i,0),o=Math.min(be(r,n.length),n.length);let a=0,l,c,h;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),h=s;h<0;)a++,h=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===h&&(t.push(n[c]),a++,h=Math.round(s+a*e))}function NL(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const RL=n=>n==="left"?"right":n==="right"?"left":n,v2=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,b2=(n,t)=>Math.min(t||n,n);function _2(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function DL(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function ML(n,t){Ue(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function kc(n){return n.drawTicks?n.tickLength:0}function w2(n,t){if(!n.display)return 0;const e=Mn(n.font,t),i=fi(n.padding);return(an(n.text)?n.text.length:1)*e.lineHeight+i.height}function OL(n,t){return Jo(n,{scale:t,type:"scale"})}function FL(n,t,e){return Jo(n,{tick:e,index:t,type:"tick"})}function VL(n,t,e){let i=dm(n);return(e&&t!=="right"||!e&&t==="right")&&(i=RL(i)),i}function BL(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let f=0,m,p,v;const _=o-r,S=a-s;if(n.isHorizontal()){if(p=oi(i,s,a),Ee(e)){const x=Object.keys(e)[0],T=e[x];v=h[x].getPixelForValue(T)+_-t}else e==="center"?v=(c.bottom+c.top)/2+_-t:v=v2(n,e,t);m=a-s}else{if(Ee(e)){const x=Object.keys(e)[0],T=e[x];p=h[x].getPixelForValue(T)-S+t}else e==="center"?p=(c.left+c.right)/2-S+t:p=v2(n,e,t);v=oi(i,o,r),f=e==="left"?-Sn:Sn}return{titleX:p,titleY:v,maxWidth:m,rotation:f}}class Qa extends Er{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Hi(t,Number.POSITIVE_INFINITY),e=Hi(e,Number.NEGATIVE_INFINITY),i=Hi(i,Number.POSITIVE_INFINITY),r=Hi(r,Number.NEGATIVE_INFINITY),{min:Hi(t,i),max:Hi(e,r),minDefined:gn(t),maxDefined:gn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:Hi(e,Hi(i,e)),max:Hi(i,Hi(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Je(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=GT(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?_2(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=PL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Je(this.options.afterUpdate,[this])}beforeSetDimensions(){Je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Je(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Je(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Je(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=b2(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),f=h.widest.width,m=h.highest.height,p=jn(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),f+6>a&&(a=p/(i-(t.offset?.5:1)),l=this.maxHeight-kc(t.grid)-e.padding-w2(t.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=um(Math.min(Math.asin(jn((h.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(m/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Je(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=w2(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=kc(s)+l):(t.height=this.maxHeight,t.width=kc(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:m}=this._getLabelSizes(),p=i.padding*2,v=wr(this.labelRotation),_=Math.cos(v),S=Math.sin(v);if(a){const x=i.mirror?0:S*f.width+_*m.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=i.mirror?0:_*f.width+S*m.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,h,S,_)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;l?c?(m=r*t.width,p=i*e.height):(m=i*t.height,p=r*e.width):s==="start"?p=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,p=e.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let h=e.height/2,f=t.height/2;s==="start"?(h=0,f=t.height):s==="end"&&(h=e.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Je(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)we(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=_2(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/b2(e,i));let c=0,h=0,f,m,p,v,_,S,x,T,N,O,B;for(f=0;f<e;f+=l){if(v=t[f].label,_=this._resolveTickFontOptions(f),r.font=S=_.string,x=s[S]=s[S]||{data:{},gc:[]},T=_.lineHeight,N=O=0,!we(v)&&!an(v))N=Ed(r,x.data,x.gc,N,v),O=T;else if(an(v))for(m=0,p=v.length;m<p;++m)B=v[m],!we(B)&&!an(B)&&(N=Ed(r,x.data,x.gc,N,B),O+=T);o.push(N),a.push(O),c=Math.max(N,c),h=Math.max(O,h)}ML(s,e);const W=o.indexOf(c),P=a.indexOf(h),A=C=>({width:o[C]||0,height:a[C]||0});return{first:A(0),last:A(e-1),widest:A(W),highest:A(P),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return AT(this._alignToPixels?wa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=FL(this.getContext(),t,i))}return this.$context||(this.$context=OL(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=wr(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=kc(s),p=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,S=_/2,x=function(Y){return wa(i,Y,_)};let T,N,O,B,W,P,A,C,D,E,I,R;if(o==="top")T=x(this.bottom),P=this.bottom-m,C=T-S,E=x(t.top)+S,R=t.bottom;else if(o==="bottom")T=x(this.top),E=t.top,R=x(t.bottom)-S,P=T+S,C=this.top+m;else if(o==="left")T=x(this.right),W=this.right-m,A=T-S,D=x(t.left)+S,I=t.right;else if(o==="right")T=x(this.left),D=t.left,I=x(t.right)-S,W=T+S,A=this.left+m;else if(e==="x"){if(o==="center")T=x((t.top+t.bottom)/2+.5);else if(Ee(o)){const Y=Object.keys(o)[0],K=o[Y];T=x(this.chart.scales[Y].getPixelForValue(K))}E=t.top,R=t.bottom,P=T+S,C=P+m}else if(e==="y"){if(o==="center")T=x((t.left+t.right)/2);else if(Ee(o)){const Y=Object.keys(o)[0],K=o[Y];T=x(this.chart.scales[Y].getPixelForValue(K))}W=T-S,A=W-m,D=t.left,I=t.right}const G=be(r.ticks.maxTicksLimit,f),ot=Math.max(1,Math.ceil(f/G));for(N=0;N<f;N+=ot){const Y=this.getContext(N),K=s.setContext(Y),et=a.setContext(Y),J=K.lineWidth,ct=K.color,_t=et.dash||[],M=et.dashOffset,H=K.tickWidth,X=K.tickColor,tt=K.tickBorderDash||[],it=K.tickBorderDashOffset;O=DL(this,N,l),O!==void 0&&(B=wa(i,O,J),c?W=A=D=I=B:P=C=E=R=B,p.push({tx1:W,ty1:P,tx2:A,ty2:C,x1:D,y1:E,x2:I,y2:R,width:J,color:ct,borderDash:_t,borderDashOffset:M,tickWidth:H,tickColor:X,tickBorderDash:tt,tickBorderDashOffset:it}))}return this._ticksLength=f,this._borderValue=T,p}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=s,m=kc(i.grid),p=m+h,v=f?-h:p,_=-wr(this.labelRotation),S=[];let x,T,N,O,B,W,P,A,C,D,E,I,R="middle";if(r==="top")W=this.bottom-v,P=this._getXAxisLabelAlignment();else if(r==="bottom")W=this.top+v,P=this._getXAxisLabelAlignment();else if(r==="left"){const ot=this._getYAxisLabelAlignment(m);P=ot.textAlign,B=ot.x}else if(r==="right"){const ot=this._getYAxisLabelAlignment(m);P=ot.textAlign,B=ot.x}else if(e==="x"){if(r==="center")W=(t.top+t.bottom)/2+p;else if(Ee(r)){const ot=Object.keys(r)[0],Y=r[ot];W=this.chart.scales[ot].getPixelForValue(Y)+p}P=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")B=(t.left+t.right)/2-p;else if(Ee(r)){const ot=Object.keys(r)[0],Y=r[ot];B=this.chart.scales[ot].getPixelForValue(Y)}P=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const G=this._getLabelSizes();for(x=0,T=a.length;x<T;++x){N=a[x],O=N.label;const ot=s.setContext(this.getContext(x));A=this.getPixelForTick(x)+s.labelOffset,C=this._resolveTickFontOptions(x),D=C.lineHeight,E=an(O)?O.length:1;const Y=E/2,K=ot.color,et=ot.textStrokeColor,J=ot.textStrokeWidth;let ct=P;o?(B=A,P==="inner"&&(x===T-1?ct=this.options.reverse?"left":"right":x===0?ct=this.options.reverse?"right":"left":ct="center"),r==="top"?c==="near"||_!==0?I=-E*D+D/2:c==="center"?I=-G.highest.height/2-Y*D+D:I=-G.highest.height+D/2:c==="near"||_!==0?I=D/2:c==="center"?I=G.highest.height/2-Y*D:I=G.highest.height-E*D,f&&(I*=-1),_!==0&&!ot.showLabelBackdrop&&(B+=D/2*Math.sin(_))):(W=A,I=(1-E)*D/2);let _t;if(ot.showLabelBackdrop){const M=fi(ot.backdropPadding),H=G.heights[x],X=G.widths[x];let tt=I-M.top,it=0-M.left;switch(R){case"middle":tt-=H/2;break;case"bottom":tt-=H;break}switch(P){case"center":it-=X/2;break;case"right":it-=X;break;case"inner":x===T-1?it-=X:x>0&&(it-=X/2);break}_t={left:it,top:tt,width:X+M.width,height:H+M.height,color:ot.backdropColor}}S.push({label:O,font:C,textOffset:I,options:{rotation:_,color:K,strokeColor:et,strokeWidth:J,textAlign:ct,textBaseline:R,translation:[B,W],backdrop:_t}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-wr(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let c,h;return e==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,m;this.isHorizontal()?(c=wa(t,this.left,o)-o/2,h=wa(t,this.right,a)+a/2,f=m=l):(f=wa(t,this.top,o)-o/2,m=wa(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,f),e.lineTo(h,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&tf(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Ga(i,c,0,h,l,a)}r&&ef(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=Mn(i.font),o=fi(i.padding),a=i.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||Ee(e)?(l+=o.bottom,an(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:m}=BL(this,l,e,a);Ga(t,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:m,textAlign:VL(a,e,r),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=be(t.grid&&t.grid.z,-1),r=be(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Qa.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Mn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Mh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;zL(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,jL(t,o,i),this.override&&ln.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in ln[r]&&(delete ln[r][i],this.override&&delete $a[i])}}function jL(n,t,e){const i=wu(Object.create(null),[e?ln.get(e):{},ln.get(t),n.defaults]);ln.set(t,i),n.defaultRoutes&&UL(t,n.defaultRoutes),n.descriptors&&ln.describe(t,n.descriptors)}function UL(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");ln.route(s,r,l,a)})}function zL(n){return"id"in n&&"defaults"in n}class qL{constructor(){this.controllers=new Mh(xr,"datasets",!0),this.elements=new Mh(Er,"elements"),this.plugins=new Mh(Object,"plugins"),this.scales=new Mh(Qa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ue(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=cm(t);Je(i["before"+r],[],i),e[t](i),Je(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Hr=new qL;class HL{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],l=[e,r,s.options];if(Je(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){we(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=be(i.options&&i.options.plugins,{}),s=WL(i);return r===!1&&!e?[]:GL(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function WL(n){const t={},e=[],i=Object.keys(Hr.plugins.items);for(let s=0;s<i.length;s++)e.push(Hr.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function $L(n,t){return!t&&n===!1?null:n===!0?{}:n}function GL(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=$L(i[l],r);c!==null&&s.push({plugin:a,options:KL(n.config,{plugin:a,local:e[l]},c,o)})}return s}function KL(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gp(n,t){const e=ln.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function YL(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function XL(n,t){return n===t?"_index_":"_value_"}function A2(n){if(n==="x"||n==="y"||n==="r")return n}function QL(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Kp(n,...t){if(A2(n))return n;for(const e of t){const i=e.axis||QL(e.position)||n.length>1&&A2(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function x2(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function JL(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return x2(n,"x",e[0])||x2(n,"y",e[0])}return{}}function ZL(n,t){const e=$a[n.type]||{scales:{}},i=t.scales||{},r=Gp(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Kp(o,a,JL(o,n),ln.scales[a.type]),c=XL(l,r),h=e.scales||{};s[o]=nu(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Gp(a,t),h=($a[a]||{}).scales||{};Object.keys(h).forEach(f=>{const m=YL(f,l),p=o[m+"AxisID"]||m;s[p]=s[p]||Object.create(null),nu(s[p],[{axis:m},i[p],h[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];nu(a,[ln.scales[a.type],ln.scale])}),s}function xb(n){const t=n.options||(n.options={});t.plugins=be(t.plugins,{}),t.scales=ZL(n,t)}function Sb(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function tC(n){return n=n||{},n.data=Sb(n.data),xb(n),n}const S2=new Map,Eb=new Set;function Oh(n,t){let e=S2.get(n);return e||(e=t(),S2.set(n,e),Eb.add(e)),e}const Nc=(n,t,e)=>{const i=Ko(t,e);i!==void 0&&n.add(i)};class eC{constructor(t){this._config=tC(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Sb(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),xb(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Oh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Oh(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Oh(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Oh(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(f=>Nc(l,t,f))),h.forEach(f=>Nc(l,r,f)),h.forEach(f=>Nc(l,$a[s]||{},f)),h.forEach(f=>Nc(l,ln,f)),h.forEach(f=>Nc(l,Hp,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Eb.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,$a[e]||{},ln.datasets[e]||{},{type:e},ln,Hp]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=E2(this._resolverCache,t,r);let l=o;if(iC(o,e)){s.$shared=!1,i=Yo(i)?i():i;const c=this.createResolver(t,i,a);l=Zl(o,i,c)}for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=E2(this._resolverCache,t,i);return Ee(e)?Zl(s,e,void 0,r):s}}function E2(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:gm(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const nC=n=>Ee(n)&&Object.getOwnPropertyNames(n).some(t=>Yo(n[t]));function iC(n,t){const{isScriptable:e,isIndexable:i}=ib(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(Yo(a)||nC(a))||o&&an(a))return!0}return!1}var rC="4.4.9";const sC=["top","bottom","left","right","chartArea"];function I2(n,t){return n==="top"||n==="bottom"||sC.indexOf(n)===-1&&t==="x"}function P2(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function T2(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Je(e&&e.onComplete,[n],t)}function oC(n){const t=n.chart,e=t.options.animation;Je(e&&e.onProgress,[n],t)}function Ib(n){return vm()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const nd={},L2=n=>{const t=Ib(n);return Object.values(nd).filter(e=>e.canvas===t).pop()};function aC(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function lC(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class _r{static register(...t){Hr.add(...t),C2()}static unregister(...t){Hr.remove(...t),C2()}constructor(t,e){const i=this.config=new eC(e),r=Ib(t),s=L2(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||IL(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=cT(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new HL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=IT(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],nd[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xs.listen(this,"complete",T2),xs.listen(this,"progress",oC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return we(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Y1(this.canvas,this.ctx),this}stop(){return xs.stop(this),this}resize(t,e){xs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,J1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Je(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ue(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const a=e[o],l=Kp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ue(s,o=>{const a=o.options,l=a.id,c=Kp(l,a),h=be(a.type,o.dtype);(a.position===void 0||I2(a.position,c)!==I2(o.dposition))&&(a.position=o.dposition),r[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{const m=Hr.getScale(h);f=new m({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,t)}),Ue(r,(o,a)=>{o||delete i[a]}),Ue(i,o=>{ui.configure(this,o,o.options),ui.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(P2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Gp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Hr.getController(a),{datasetElementType:c,dataElementType:h}=ln.datasets[a];Object.assign(l,{dataElementType:Hr.getElement(h),datasetElementType:c&&Hr.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ue(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),m=!r&&s.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ue(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(P2("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ue(this.scales,t=>{ui.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!j1(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const o=i==="_removeElements"?-s:s;aC(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!j1(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ui.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ue(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Yo(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xs.has(this)?this.attached&&!xs.running(this)&&xs.start(this):(this.draw(),T2({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=pb(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&tf(e,r),t.controller.draw(),r&&ef(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Rs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=sL.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Jo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);Au(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),xs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Y1(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete nd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ue(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Ue(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ue(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,o,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ad(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),l=gT(t),c=lC(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Je(s.onHover,[t,a,this],this),l&&Je(s.onClick,[t,a,this],this));const h=!Ad(a,r);return(h||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}Ft(_r,"defaults",ln),Ft(_r,"instances",nd),Ft(_r,"overrides",$a),Ft(_r,"registry",Hr),Ft(_r,"version",rC),Ft(_r,"getChart",L2);function C2(){return Ue(_r.instances,n=>n._plugins.invalidate())}function cC(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+Sn,i-Sn),n.closePath(),n.clip()}function uC(n){return pm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function hC(n,t,e,i){const r=uC(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{const c=(e-Math.min(s,l))*i/2;return jn(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:jn(r.innerStart,0,o),innerEnd:jn(r.innerEnd,0,o)}}function Il(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Td(n,t,e,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,f=Math.max(t.outerRadius+i+e-c,0),m=h>0?h+i+e+c:0;let p=0;const v=r-l;if(i){const ot=h>0?h-i:0,Y=f>0?f-i:0,K=(ot+Y)/2,et=K!==0?v*K/(K+i):v;p=(v-et)/2}const _=Math.max(.001,v*f-e/on)/f,S=(v-_)/2,x=l+S+p,T=r-S-p,{outerStart:N,outerEnd:O,innerStart:B,innerEnd:W}=hC(t,m,f,T-x),P=f-N,A=f-O,C=x+N/P,D=T-O/A,E=m+B,I=m+W,R=x+B/E,G=T-W/I;if(n.beginPath(),s){const ot=(C+D)/2;if(n.arc(o,a,f,C,ot),n.arc(o,a,f,ot,D),O>0){const J=Il(A,D,o,a);n.arc(J.x,J.y,O,D,T+Sn)}const Y=Il(I,T,o,a);if(n.lineTo(Y.x,Y.y),W>0){const J=Il(I,G,o,a);n.arc(J.x,J.y,W,T+Sn,G+Math.PI)}const K=(T-W/m+(x+B/m))/2;if(n.arc(o,a,m,T-W/m,K,!0),n.arc(o,a,m,K,x+B/m,!0),B>0){const J=Il(E,R,o,a);n.arc(J.x,J.y,B,R+Math.PI,x-Sn)}const et=Il(P,x,o,a);if(n.lineTo(et.x,et.y),N>0){const J=Il(P,C,o,a);n.arc(J.x,J.y,N,x-Sn,C)}}else{n.moveTo(o,a);const ot=Math.cos(C)*f+o,Y=Math.sin(C)*f+a;n.lineTo(ot,Y);const K=Math.cos(D)*f+o,et=Math.sin(D)*f+a;n.lineTo(K,et)}n.closePath()}function dC(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){Td(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%sn||sn))}return Td(n,t,e,i,l,r),n.fill(),l}function fC(n,t,e,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:f,borderDashOffset:m}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=m,p?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let v=t.endAngle;if(s){Td(n,t,e,i,v,r);for(let _=0;_<s;++_)n.stroke();isNaN(a)||(v=o+(a%sn||sn))}p&&cC(n,t,v),s||(Td(n,t,e,i,v,r),n.stroke())}class zc extends Er{constructor(e){super();Ft(this,"circumference");Ft(this,"endAngle");Ft(this,"fullCircles");Ft(this,"innerRadius");Ft(this,"outerRadius");Ft(this,"pixelMargin");Ft(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=G5(s,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,v=be(m,c-l),_=xu(o,l,c)&&l!==c,S=v>=sn||_,x=ks(a,h+p,f+p);return S&&x}getCenterPoint(e){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,f=(s+o)/2,m=(a+l+h+c)/2;return{x:i+Math.cos(f)*m,y:r+Math.sin(f)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>sn?Math.floor(r/sn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(on,r||0)),h=s*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,dC(e,this,h,o,a),fC(e,this,h,o,a),e.restore()}}Ft(zc,"id","arc"),Ft(zc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ft(zc,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ft(zc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Pb(n,t,e=t){n.lineCap=be(e.borderCapStyle,t.borderCapStyle),n.setLineDash(be(e.borderDash,t.borderDash)),n.lineDashOffset=be(e.borderDashOffset,t.borderDashOffset),n.lineJoin=be(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=be(e.borderWidth,t.borderWidth),n.strokeStyle=be(e.borderColor,t.borderColor)}function pC(n,t,e){n.lineTo(e.x,e.y)}function gC(n){return n.stepped?VT:n.tension||n.cubicInterpolationMode==="monotone"?BT:pC}function Tb(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!h?i+c-l:c-l}}function mC(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=Tb(r,e,i),h=gC(s);let{move:f=!0,reverse:m}=i||{},p,v,_;for(p=0;p<=c;++p)v=r[(a+(m?c-p:p))%o],!v.skip&&(f?(n.moveTo(v.x,v.y),f=!1):h(n,_,v,m,s.stepped),_=v);return l&&(v=r[(a+(m?c:0))%o],h(n,_,v,m,s.stepped)),!!l}function yC(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=Tb(r,e,i),{move:l=!0,reverse:c}=i||{};let h=0,f=0,m,p,v,_,S,x;const T=O=>(o+(c?a-O:O))%s,N=()=>{_!==S&&(n.lineTo(h,S),n.lineTo(h,_),n.lineTo(h,x))};for(l&&(p=r[T(0)],n.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=r[T(m)],p.skip)continue;const O=p.x,B=p.y,W=O|0;W===v?(B<_?_=B:B>S&&(S=B),h=(f*h+O)/++f):(N(),n.lineTo(O,B),v=W,f=0,_=S=B),x=B}N()}function Yp(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?yC:mC}function vC(n){return n.stepped?y3:n.tension||n.cubicInterpolationMode==="monotone"?v3:Pa}function bC(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),Pb(n,t.options),n.stroke(r)}function _C(n,t,e,i){const{segments:r,options:s}=t,o=Yp(t);for(const a of r)Pb(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const wC=typeof Path2D=="function";function AC(n,t,e,i){wC&&!t.options.segment?bC(n,t,e,i):_C(n,t,e,i)}class ko extends Er{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;c3(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=S3(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],s=this.points,o=fb(this,{property:e,start:r,end:r});if(!o.length)return;const a=[],l=vC(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:m}=o[c],p=s[f],v=s[m];if(p===v){a.push(p);continue}const _=Math.abs((r-p[e])/(v[e]-p[e])),S=l(p,v,_,i.stepped);S[e]=t[e],a.push(S)}return a.length===1?a[0]:a}pathSegment(t,e,i){return Yp(this)(t,this,e,i)}path(t,e,i){const r=this.segments,s=Yp(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of r)o&=s(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),AC(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ft(ko,"id","line"),Ft(ko,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ft(ko,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ft(ko,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function k2(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}class id extends Er{constructor(e){super();Ft(this,"parsed");Ft(this,"skip");Ft(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return k2(this,e,"x",i)}inYRange(e,i){return k2(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Rs(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Wp(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Ft(id,"id","point"),Ft(id,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ft(id,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Lb(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,h,f;return n.horizontal?(f=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-f,h=i+f):(f=s/2,a=e-f,l=e+f,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function No(n,t,e,i){return n?0:jn(t,e,i)}function xC(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,s=nb(i);return{t:No(r.top,s.top,0,e),r:No(r.right,s.right,0,t),b:No(r.bottom,s.bottom,0,e),l:No(r.left,s.left,0,t)}}function SC(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Fa(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Ee(r);return{topLeft:No(!l||a.top||a.left,s.topLeft,0,o),topRight:No(!l||a.top||a.right,s.topRight,0,o),bottomLeft:No(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:No(!l||a.bottom||a.right,s.bottomRight,0,o)}}function EC(n){const t=Lb(n),e=t.right-t.left,i=t.bottom-t.top,r=xC(n,e/2,i/2),s=SC(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function np(n,t,e,i){const r=t===null,s=e===null,a=n&&!(r&&s)&&Lb(n,i);return a&&(r||ks(t,a.left,a.right))&&(s||ks(e,a.top,a.bottom))}function IC(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function PC(n,t){n.rect(t.x,t.y,t.w,t.h)}function ip(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class rd extends Er{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=EC(this),a=IC(o.radius)?Su:PC;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,ip(o,e,s)),t.clip(),a(t,ip(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,ip(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return np(this,t,e,i)}inXRange(t,e){return np(this,t,null,e)}inYRange(t,e){return np(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Ft(rd,"id","bar"),Ft(rd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ft(rd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var TC=Object.freeze({__proto__:null,ArcElement:zc,BarElement:rd,LineElement:ko,PointElement:id});const Xp=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],N2=Xp.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Cb(n){return Xp[n%Xp.length]}function kb(n){return N2[n%N2.length]}function LC(n,t){return n.borderColor=Cb(t),n.backgroundColor=kb(t),++t}function CC(n,t){return n.backgroundColor=n.data.map(()=>Cb(t++)),t}function kC(n,t){return n.backgroundColor=n.data.map(()=>kb(t++)),t}function NC(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof Ca?t=CC(e,t):r instanceof ou?t=kC(e,t):r&&(t=LC(e,t))}}function R2(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function RC(n){return n&&(n.borderColor||n.backgroundColor)}function DC(){return ln.borderColor!=="rgba(0,0,0,0.1)"||ln.backgroundColor!=="rgba(0,0,0,0.1)"}var MC={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=R2(i)||RC(r)||s&&R2(s)||DC();if(!e.forceOverride&&o)return;const a=NC(n);i.forEach(a)}};function OC(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(s-2);let l=0;const c=t+e-1;let h=t,f,m,p,v,_;for(o[l++]=n[h],f=0;f<s-2;f++){let S=0,x=0,T;const N=Math.floor((f+1)*a)+1+t,O=Math.min(Math.floor((f+2)*a)+1,e)+t,B=O-N;for(T=N;T<O;T++)S+=n[T].x,x+=n[T].y;S/=B,x/=B;const W=Math.floor(f*a)+1+t,P=Math.min(Math.floor((f+1)*a)+1,e)+t,{x:A,y:C}=n[h];for(p=v=-1,T=W;T<P;T++)v=.5*Math.abs((A-S)*(n[T].y-C)-(A-n[T].x)*(x-C)),v>p&&(p=v,m=n[T],_=T);o[l++]=m,h=_}return o[l++]=n[c],o}function FC(n,t,e,i){let r=0,s=0,o,a,l,c,h,f,m,p,v,_;const S=[],x=t+e-1,T=n[t].x,O=n[x].x-T;for(o=t;o<t+e;++o){a=n[o],l=(a.x-T)/O*i,c=a.y;const B=l|0;if(B===h)c<v?(v=c,f=o):c>_&&(_=c,m=o),r=(s*r+a.x)/++s;else{const W=o-1;if(!we(f)&&!we(m)){const P=Math.min(f,m),A=Math.max(f,m);P!==p&&P!==W&&S.push(mo(ti({},n[P]),{x:r})),A!==p&&A!==W&&S.push(mo(ti({},n[A]),{x:r}))}o>0&&W!==p&&S.push(n[W]),S.push(a),h=B,s=0,v=_=c,f=m=p=o}}return S}function Nb(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function D2(n){n.data.datasets.forEach(t=>{Nb(t)})}function VC(n,t){const e=t.length;let i=0,r;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=jn(Ns(t,s.axis,o).lo,0,e-1)),c?r=jn(Ns(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var BC={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){D2(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(jc([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:f,count:m}=VC(l,c);const p=e.threshold||4*i;if(m<=p){Nb(r);return}we(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let v;switch(e.algorithm){case"lttb":v=OC(c,f,m,i,e);break;case"min-max":v=FC(c,f,m,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=v})},destroy(n){D2(n)}};function jC(n,t,e){const i=n.segments,r=n.points,s=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=wm(l,c,r);const h=Qp(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:r[l],end:r[c]});continue}const f=fb(t,h);for(const m of f){const p=Qp(e,s[m.start],s[m.end],m.loop),v=db(a,r,p);for(const _ of v)o.push({source:_,target:m,start:{[e]:M2(h,p,"start",Math.max)},end:{[e]:M2(h,p,"end",Math.min)}})}}return o}function Qp(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=Wi(r),s=Wi(s)),{property:n,start:r,end:s}}function UC(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=wm(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function wm(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function M2(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Rb(n,t){let e=[],i=!1;return an(n)?(i=!0,e=n):e=UC(n,t),e.length?new ko({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function O2(n){return n&&n.fill!==!1}function zC(n,t,e){let r=n[t].fill;const s=[t];let o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!gn(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function qC(n,t,e){const i=GC(n);if(Ee(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return gn(r)&&Math.floor(r)===r?HC(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function HC(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function WC(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ee(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function $C(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ee(n)?i=n.value:i=t.getBaseValue(),i}function GC(n){const t=n.options,e=t.fill;let i=be(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function KC(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=YC(t,e);a.push(Rb({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)XC(r,o[h],a)}return new ko({points:r,options:{}})}function YC(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function XC(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:a,point:l}=QC(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function QC(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],f=o[h.start][e],m=o[h.end][e];if(ks(r,f,m)){a=r===f,l=r===m;break}}return{first:a,last:l,point:i}}class Db{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:o}=this;return e=e||{start:0,end:sn},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function JC(n){const{chart:t,fill:e,line:i}=n;if(gn(e))return ZC(t,e);if(e==="stack")return KC(n);if(e==="shape")return!0;const r=tk(n);return r instanceof Db?r:Rb(r,i)}function ZC(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function tk(n){return(n.scale||{}).getPointPositionForValue?nk(n):ek(n)}function ek(n){const{scale:t={},fill:e}=n,i=WC(e,t);if(gn(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function nk(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=$C(e,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new Db({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function rp(n,t,e){const i=JC(t),{chart:r,index:s,line:o,scale:a,axis:l}=t,c=o.options,h=c.fill,f=c.backgroundColor,{above:m=f,below:p=f}=h||{},v=r.getDatasetMeta(s),_=pb(r,v);i&&o.points.length&&(tf(n,e),ik(n,{line:o,target:i,above:m,below:p,area:e,scale:a,axis:l,clip:_}),ef(n))}function ik(n,t){const{line:e,target:i,above:r,below:s,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save(),c==="x"&&s!==r&&(F2(n,i,o.top),V2(n,{line:e,target:i,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),F2(n,i,o.bottom)),V2(n,{line:e,target:i,color:s,scale:a,property:c,clip:l}),n.restore()}function F2(n,t,e){const{segments:i,points:r}=t;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=r[l],f=r[wm(l,c,r)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function V2(n,t){const{line:e,target:i,property:r,color:s,scale:o,clip:a}=t,l=jC(e,i,r);for(const{source:c,target:h,start:f,end:m}of l){const{style:{backgroundColor:p=s}={}}=c,v=i!==!0;n.save(),n.fillStyle=p,rk(n,o,a,v&&Qp(r,f,m)),n.beginPath();const _=!!e.pathSegment(n,c);let S;if(v){_?n.closePath():B2(n,i,m,r);const x=!!i.pathSegment(n,h,{move:_,reverse:!0});S=_&&x,S||B2(n,i,f,r)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function rk(n,t,e,i){const r=t.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let l,c,h,f;s==="x"?(l=o,c=r.top,h=a,f=r.bottom):(l=r.left,c=o,h=r.right,f=a),n.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),c=Math.max(c,e.top),f=Math.min(f,e.bottom)),n.rect(l,c,h-l,f-c),n.clip()}}function B2(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var sk={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ko&&(l={visible:n.isDatasetVisible(o),index:o,fill:qC(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=zC(r,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&rp(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;O2(s)&&rp(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!O2(i)||e.drawTime!=="beforeDatasetDraw"||rp(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const j2=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},ok=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class U2 extends Er{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Je(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Mn(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=j2(i,s);let c,h;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let f=t;s.textAlign="left",s.textBaseline="middle";let m=-1,p=-h;return this.legendItems.forEach((v,_)=>{const S=i+e/2+s.measureText(v.text).width;(_===0||c[c.length-1]+S+2*a>o)&&(f+=h,c[c.length-(_>0?0:1)]=0,p+=h,m++),l[_]={left:0,top:p,row:m,width:S,height:r},c[c.length-1]+=S+a}),f}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let f=a,m=0,p=0,v=0,_=0;return this.legendItems.forEach((S,x)=>{const{itemWidth:T,itemHeight:N}=ak(i,e,s,S,r);x>0&&p+N+2*a>h&&(f+=m+a,c.push({width:m,height:p}),v+=m+a,_++,m=p=0),l[x]={left:v,top:p,col:_,width:T,height:N},m=Math.max(m,T),p+=N+a}),f+=m,c.push({width:m,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ul(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=oi(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=oi(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=oi(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=oi(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;tf(t,this),this._draw(),ef(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=ln.color,l=Ul(t.rtl,this.left,this.width),c=Mn(o.font),{padding:h}=o,f=c.size,m=f/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:_,itemHeight:S}=j2(o,f),x=function(W,P,A){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;r.save();const C=be(A.lineWidth,1);if(r.fillStyle=be(A.fillStyle,a),r.lineCap=be(A.lineCap,"butt"),r.lineDashOffset=be(A.lineDashOffset,0),r.lineJoin=be(A.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=be(A.strokeStyle,a),r.setLineDash(be(A.lineDash,[])),o.usePointStyle){const D={radius:_*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:C},E=l.xPlus(W,v/2),I=P+m;eb(r,D,E,I,o.pointStyleWidth&&v)}else{const D=P+Math.max((f-_)/2,0),E=l.leftForLtr(W,v),I=Fa(A.borderRadius);r.beginPath(),Object.values(I).some(R=>R!==0)?Su(r,{x:E,y:D,w:v,h:_,radius:I}):r.rect(E,D,v,_),r.fill(),C!==0&&r.stroke()}r.restore()},T=function(W,P,A){Ga(r,A.text,W,P+S/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},N=this.isHorizontal(),O=this._computeTitleHeight();N?p={x:oi(s,this.left+h,this.right-i[0]),y:this.top+h+O,line:0}:p={x:this.left+h,y:oi(s,this.top+O+h,this.bottom-e[0].height),line:0},cb(this.ctx,t.textDirection);const B=S+h;this.legendItems.forEach((W,P)=>{r.strokeStyle=W.fontColor,r.fillStyle=W.fontColor;const A=r.measureText(W.text).width,C=l.textAlign(W.textAlign||(W.textAlign=o.textAlign)),D=v+m+A;let E=p.x,I=p.y;l.setWidth(this.width),N?P>0&&E+D+h>this.right&&(I=p.y+=B,p.line++,E=p.x=oi(s,this.left+h,this.right-i[p.line])):P>0&&I+B>this.bottom&&(E=p.x=E+e[p.line].width+h,p.line++,I=p.y=oi(s,this.top+O+h,this.bottom-e[p.line].height));const R=l.x(E);if(x(R,I,W),E=PT(C,E+v+m,N?E+D:this.right,t.rtl),T(l.x(E),I,W),N)p.x+=D+h;else if(typeof W.text!="string"){const G=c.lineHeight;p.y+=Mb(W,G)+h}else p.y+=B}),ub(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Mn(e.font),r=fi(e.padding);if(!e.display)return;const s=Ul(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=r.top+l;let h,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+c,f=oi(t.align,f,this.right-m);else{const v=this.columnSizes.reduce((_,S)=>Math.max(_,S.height),0);h=c+oi(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const p=oi(a,f,f+m);o.textAlign=s.textAlign(dm(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Ga(o,e.text,p,h,i)}_computeTitleHeight(){const t=this.options.title,e=Mn(t.font),i=fi(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(ks(t,this.left,this.right)&&ks(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ks(t,r.left,r.left+r.width)&&ks(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!uk(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=ok(r,i);r&&!s&&Je(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Je(e.onHover,[t,i,this],this)}else i&&Je(e.onClick,[t,i,this],this)}}function ak(n,t,e,i,r){const s=lk(i,n,t,e),o=ck(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function lk(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function ck(n,t,e){let i=n;return typeof t.text!="string"&&(i=Mb(t,e)),i}function Mb(n,t){const e=n.text?n.text.length:0;return t*e}function uk(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var hk={id:"legend",_element:U2,start(n,t,e){const i=n.legend=new U2({ctx:n.ctx,options:e,chart:n});ui.configure(n,i,e),ui.addBox(n,i)},stop(n){ui.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;ui.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=fi(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Am extends Er{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=an(i.text)?i.text.length:1;this._padding=fi(i.padding);const s=r*Mn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,f;return this.isHorizontal()?(h=oi(a,i,s),f=e+t,c=s-i):(o.position==="left"?(h=i+t,f=oi(a,r,e),l=on*-.5):(h=s-t,f=oi(a,e,r),l=on*.5),c=r-e),{titleX:h,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Mn(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ga(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:dm(e.align),textBaseline:"middle",translation:[o,a]})}}function dk(n,t){const e=new Am({ctx:n.ctx,options:t,chart:n});ui.configure(n,e,t),ui.addBox(n,e),n.titleBlock=e}var fk={id:"title",_element:Am,start(n,t,e){dk(n,e)},stop(n){const t=n.titleBlock;ui.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;ui.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fh=new WeakMap;var pk={id:"subtitle",start(n,t,e){const i=new Am({ctx:n.ctx,options:e,chart:n});ui.configure(n,i,e),ui.addBox(n,i),Fh.set(n,i)},stop(n){ui.removeBox(n,Fh.get(n)),Fh.delete(n)},beforeUpdate(n,t,e){const i=Fh.get(n);ui.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=qp(t,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function qr(n,t){return t&&(an(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Ss(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function gk(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function z2(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=Mn(t.bodyFont),c=Mn(t.titleFont),h=Mn(t.footerFont),f=s.length,m=r.length,p=i.length,v=fi(t.padding);let _=v.height,S=0,x=i.reduce((O,B)=>O+B.before.length+B.lines.length+B.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),x){const O=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=p*O+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}m&&(_+=t.footerMarginTop+m*h.lineHeight+(m-1)*t.footerSpacing);let T=0;const N=function(O){S=Math.max(S,e.measureText(O).width+T)};return e.save(),e.font=c.string,Ue(n.title,N),e.font=l.string,Ue(n.beforeBody.concat(n.afterBody),N),T=t.displayColors?o+2+t.boxPadding:0,Ue(i,O=>{Ue(O.before,N),Ue(O.lines,N),Ue(O.after,N)}),T=0,e.font=h.string,Ue(n.footer,N),e.restore(),S+=v.width,{width:S,height:_}}function mk(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function yk(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function vk(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),yk(c,n,t,e)&&(c="center"),c}function q2(n,t,e){const i=e.yAlign||t.yAlign||mk(n,e);return{xAlign:e.xAlign||t.xAlign||vk(n,t,e,i),yAlign:i}}function bk(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function _k(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function H2(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=Fa(o);let v=bk(t,a);const _=_k(t,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,m)+r:a==="right"&&(v+=Math.max(f,p)+r),{x:jn(v,0,i.width-t.width),y:jn(_,0,i.height-t.height)}}function Vh(n,t,e){const i=fi(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function W2(n){return qr([],Ss(n))}function wk(n,t,e){return Jo(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function $2(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Ob={beforeTitle:As,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:As,beforeBody:As,beforeLabel:As,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return we(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:As,afterBody:As,beforeFooter:As,footer:As,afterFooter:As};function Li(n,t,e,i){const r=n[t].call(e,i);return typeof r=="undefined"?Ob[t].call(e,i):r}class Jp extends Er{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new gb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=wk(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Li(i,"beforeTitle",this,t),s=Li(i,"title",this,t),o=Li(i,"afterTitle",this,t);let a=[];return a=qr(a,Ss(r)),a=qr(a,Ss(s)),a=qr(a,Ss(o)),a}getBeforeBody(t,e){return W2(Li(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Ue(t,s=>{const o={before:[],lines:[],after:[]},a=$2(i,s);qr(o.before,Ss(Li(a,"beforeLabel",this,s))),qr(o.lines,Li(a,"label",this,s)),qr(o.after,Ss(Li(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,e){return W2(Li(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Li(i,"beforeFooter",this,t),s=Li(i,"footer",this,t),o=Li(i,"afterFooter",this,t);let a=[];return a=qr(a,Ss(r)),a=qr(a,Ss(s)),a=qr(a,Ss(o)),a}_createItems(t){const e=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(gk(this.chart,e[l]));return t.filter&&(a=a.filter((h,f,m)=>t.filter(h,f,m,i))),t.itemSort&&(a=a.sort((h,f)=>t.itemSort(h,f,i))),Ue(a,h=>{const f=$2(t.callbacks,h);r.push(Li(f,"labelColor",this,h)),s.push(Li(f,"labelPointStyle",this,h)),o.push(Li(f,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=qc[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=z2(this,i),c=Object.assign({},a,l),h=q2(this.chart,i,c),f=H2(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=Fa(a),{x:m,y:p}=t,{width:v,height:_}=e;let S,x,T,N,O,B;return s==="center"?(O=p+_/2,r==="left"?(S=m,x=S-o,N=O+o,B=O-o):(S=m+v,x=S+o,N=O-o,B=O+o),T=S):(r==="left"?x=m+Math.max(l,h)+o:r==="right"?x=m+v-Math.max(c,f)-o:x=this.caretX,s==="top"?(N=p,O=N-o,S=x-o,T=x+o):(N=p+_,O=N+o,S=x+o,T=x-o),B=N),{x1:S,x2:x,x3:T,y1:N,y2:O,y3:B}}drawTitle(t,e,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Ul(i.rtl,this.x,this.width);for(t.x=Vh(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",o=Mn(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<s;++l)e.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Mn(s.bodyFont),f=Vh(this,"left",s),m=r.x(f),p=l<h.lineHeight?(h.lineHeight-l)/2:0,v=e.y+p;if(s.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=r.leftForLtr(m,c)+c/2,x=v+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Wp(t,_,S,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Wp(t,_,S,x)}else{t.lineWidth=Ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=r.leftForLtr(m,c),S=r.leftForLtr(r.xPlus(m,1),c-2),x=Fa(o.borderRadius);Object.values(x).some(T=>T!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Su(t,{x:_,y:v,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Su(t,{x:S,y:v+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(_,v,c,l),t.strokeRect(_,v,c,l),t.fillStyle=o.backgroundColor,t.fillRect(S,v+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,f=Mn(i.bodyFont);let m=f.lineHeight,p=0;const v=Ul(i.rtl,this.x,this.width),_=function(A){e.fillText(A,v.x(t.x+p),t.y+m/2),t.y+=m+s},S=v.textAlign(o);let x,T,N,O,B,W,P;for(e.textAlign=o,e.textBaseline="middle",e.font=f.string,t.x=Vh(this,S,i),e.fillStyle=i.bodyColor,Ue(this.beforeBody,_),p=a&&S!=="right"?o==="center"?c/2+h:c+2+h:0,O=0,W=r.length;O<W;++O){for(x=r[O],T=this.labelTextColors[O],e.fillStyle=T,Ue(x.before,_),N=x.lines,a&&N.length&&(this._drawColorBox(e,t,O,v,i),m=Math.max(f.lineHeight,l)),B=0,P=N.length;B<P;++B)_(N[B]),m=f.lineHeight;Ue(x.after,_)}p=0,m=f.lineHeight,Ue(this.afterBody,_),t.y-=s}drawFooter(t,e,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Ul(i.rtl,this.x,this.width);for(t.x=Vh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Mn(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<s;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:f,topRight:m,bottomLeft:p,bottomRight:v}=Fa(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+f,l),o==="top"&&this.drawCaret(t,e,i,r),e.lineTo(a+c-m,l),e.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&s==="right"&&this.drawCaret(t,e,i,r),e.lineTo(a+c,l+h-v),e.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(a+p,l+h),e.quadraticCurveTo(a,l+h,a,l+h-p),o==="center"&&s==="left"&&this.drawCaret(t,e,i,r),e.lineTo(a,l+f),e.quadraticCurveTo(a,l,a+f,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=qc[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=z2(this,t),l=Object.assign({},o,this._size),c=q2(e,t,l),h=H2(t,l,c,e);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=fi(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),cb(t,e.textDirection),s.y+=o.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),ub(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ad(i,r),o=this._positionChanged(r,e);(s||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,e,i),a=this._positionChanged(o,t),l=e||!Ad(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:r,options:s}=this,o=qc[s.position].call(this,t,e);return o!==!1&&(i!==o.x||r!==o.y)}}Ft(Jp,"positioners",qc);var Ak={id:"tooltip",_element:Jp,positioners:qc,afterInit(n,t,e){e&&(n.tooltip=new Jp({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",mo(ti({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ob},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xk=Object.freeze({__proto__:null,Colors:MC,Decimation:BC,Filler:sk,Legend:hk,SubTitle:pk,Title:fk,Tooltip:Ak});const Sk=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Ek(n,t,e,i){const r=n.indexOf(t);if(r===-1)return Sk(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const Ik=(n,t)=>n===null?null:jn(Math.round(n),0,t);function G2(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Zp extends Qa{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(we(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Ek(i,t,be(e,t),this._addedLabels),Ik(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return G2.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Ft(Zp,"id","category"),Ft(Zp,"defaults",{ticks:{callback:G2}});function Pk(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:m}=n,p=s||1,v=h-1,{min:_,max:S}=t,x=!we(o),T=!we(a),N=!we(c),O=(S-_)/(f+1);let B=z1((S-_)/v/p)*p,W,P,A,C;if(B<1e-14&&!x&&!T)return[{value:_},{value:S}];C=Math.ceil(S/B)-Math.floor(_/B),C>v&&(B=z1(C*B/v/p)*p),we(l)||(W=Math.pow(10,l),B=Math.ceil(B*W)/W),r==="ticks"?(P=Math.floor(_/B)*B,A=Math.ceil(S/B)*B):(P=_,A=S),x&&T&&s&&_T((a-o)/s,B/1e3)?(C=Math.round(Math.min((a-o)/B,h)),B=(a-o)/C,P=o,A=a):N?(P=x?o:P,A=T?a:A,C=c-1,B=(A-P)/C):(C=(A-P)/B,iu(C,Math.round(C),B/1e3)?C=Math.round(C):C=Math.ceil(C));const D=Math.max(q1(B),q1(P));W=Math.pow(10,we(l)?D:l),P=Math.round(P*W)/W,A=Math.round(A*W)/W;let E=0;for(x&&(m&&P!==o?(e.push({value:o}),P<o&&E++,iu(Math.round((P+E*B)*W)/W,o,K2(o,O,n))&&E++):P<o&&E++);E<C;++E){const I=Math.round((P+E*B)*W)/W;if(T&&I>a)break;e.push({value:I})}return T&&m&&A!==a?e.length&&iu(e[e.length-1].value,a,K2(a,O,n))?e[e.length-1].value=a:e.push({value:a}):(!T||A===a)&&e.push({value:A}),e}function K2(n,t,{horizontal:e,minRotation:i}){const r=wr(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}class Ld extends Qa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return we(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=ts(r),c=ts(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=Pk(r,s);return t.bounds==="ticks"&&$5(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return zu(t,this.chart.options.locale,this.options.ticks.format)}}class tg extends Ld{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=gn(t)?t:0,this.max=gn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=wr(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Ft(tg,"id","linear"),Ft(tg,"defaults",{ticks:{callback:Zd.formatters.numeric}});const Iu=n=>Math.floor(Co(n)),xa=(n,t)=>Math.pow(10,Iu(n)+t);function Y2(n){return n/Math.pow(10,Iu(n))===1}function X2(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function Tk(n,t){const e=t-n;let i=Iu(e);for(;X2(n,t,i)>10;)i++;for(;X2(n,t,i)<10;)i--;return Math.min(i,Iu(n))}function Lk(n,{min:t,max:e}){t=Hi(n.min,t);const i=[],r=Iu(t);let s=Tk(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let f=Math.floor((c-h)/Math.pow(10,s)),m=Hi(n.min,Math.round((l+h+f*Math.pow(10,s))*o)/o);for(;m<e;)i.push({value:m,major:Y2(m),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),m=Math.round((l+h+f*Math.pow(10,s))*o)/o;const p=Hi(n.max,m);return i.push({value:p,major:Y2(p),significand:f}),i}class eg extends Qa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Ld.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return gn(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=gn(t)?Math.max(0,t):null,this.max=gn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gn(this._userMin)&&(this.min=t===xa(this.min,0)?xa(this.min,-1):xa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(xa(i,-1)),o(xa(r,1)))),i<=0&&s(xa(r,-1)),r<=0&&o(xa(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=Lk(e,this);return t.bounds==="ticks"&&$5(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":zu(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Co(t),this._valueRange=Co(this.max)-Co(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Co(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}Ft(eg,"id","logarithmic"),Ft(eg,"defaults",{ticks:{callback:Zd.formatters.logarithmic,major:{enabled:!0}}});function ng(n){const t=n.ticks;if(t.display&&n.display){const e=fi(t.backdropPadding);return be(t.font&&t.font.size,ln.font.size)+e.height}return 0}function Ck(n,t,e){return e=an(e)?e:[e],{w:FT(n,t.string,e),h:e.length*t.lineHeight}}function Q2(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function kk(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?on/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+r[l],a),f=Mn(c.font),m=Ck(n.ctx,f,n._pointLabels[l]);i[l]=m;const p=Wi(n.getIndexAngle(l)+a),v=Math.round(um(p)),_=Q2(v,h.x,m.w,0,180),S=Q2(v,h.y,m.h,90,270);Nk(e,t,p,_,S)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=Mk(n,i,r)}function Nk(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function Rk(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(um(Wi(l.angle+Sn))),h=Vk(l.y,a.h,c),f=Ok(c),m=Fk(l.x,a.w,f);return{visible:!0,x:l.x,y:h,textAlign:f,left:m,top:h,right:m+a.w,bottom:h+a.h}}function Dk(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(Rs({x:e,y:i},t)||Rs({x:e,y:s},t)||Rs({x:r,y:i},t)||Rs({x:r,y:s},t))}function Mk(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ng(s)/2,additionalAngle:o?on/r:0};let c;for(let h=0;h<r;h++){l.padding=e[h],l.size=t[h];const f=Rk(n,h,l);i.push(f),a==="auto"&&(f.visible=Dk(f,c),f.visible&&(c=f))}return i}function Ok(n){return n===0||n===180?"center":n<180?"left":"right"}function Fk(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Vk(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function Bk(n,t,e){const{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!we(a)){const l=Fa(t.borderRadius),c=fi(t.backdropPadding);n.fillStyle=a;const h=i-c.left,f=r-c.top,m=s-i+c.width,p=o-r+c.height;Object.values(l).some(v=>v!==0)?(n.beginPath(),Su(n,{x:h,y:f,w:m,h:p,radius:l}),n.fill()):n.fillRect(h,f,m,p)}}function jk(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));Bk(e,o,s);const a=Mn(o.font),{x:l,y:c,textAlign:h}=s;Ga(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Fb(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,sn);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function Uk(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Fb(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function zk(n,t,e){return Jo(n,{label:e,index:t,type:"pointLabel"})}class Hc extends Ld{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=fi(ng(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=gn(t)&&!isNaN(t)?t:0,this.max=gn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ng(this.options))}generateTickLabels(t){Ld.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=Je(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?kk(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=sn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Wi(t*e+wr(i))}getDistanceFromCenterForValue(t){if(we(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(we(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return zk(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Sn+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Fb(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&jk(this,o),r.display&&this.ticks.forEach((h,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(f),p=r.setContext(m),v=s.setContext(m);Uk(this,p,l,o,v)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:m}=h;!m||!f||(t.lineWidth=m,t.strokeStyle=f,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),h=Mn(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const f=fi(c.backdropPadding);t.fillRect(-o/2-f.left,-s-h.size/2-f.top,o+f.width,h.size+f.height)}Ga(t,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}Ft(Hc,"id","radialLinear"),Ft(Hc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Ft(Hc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ft(Hc,"descriptors",{angleLines:{_fallback:"grid"}});const rf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ki=Object.keys(rf);function J2(n,t){return n-t}function Z2(n,t){if(we(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),gn(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Jl(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function ty(n,t,e,i){const r=ki.length;for(let s=ki.indexOf(n);s<r-1;++s){const o=rf[ki[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return ki[s]}return ki[r-1]}function qk(n,t,e,i,r){for(let s=ki.length-1;s>=ki.indexOf(e);s--){const o=ki[s];if(rf[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return ki[e?ki.indexOf(e):0]}function Hk(n){for(let t=ki.indexOf(n)+1,e=ki.length;t<e;++t)if(rf[ki[t]].common)return ki[t]}function ey(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=hm(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function Wk(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function ny(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:Wk(n,i,r,e)}class Pu extends Qa{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new tL._date(t.adapters.date);r.init(e),nu(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Z2(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=gn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=gn(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=ST(r,s,o);return this._unit=e.unit||(i.autoSkip?ty(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):qk(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Hk(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),ny(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=jn(e,0,o),i=jn(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||ty(s.minUnit,e,i,this._getLabelCapacity(e)),a=be(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Jl(l)||l===!0,h={};let f=e,m,p;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(m=f,p=0;m<i;m=+t.add(m,a,o),p++)ey(h,m,v);return(m===i||r.bounds==="ticks"||p===1)&&ey(h,m,v),Object.keys(h).sort(J2).map(_=>+_)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){const s=this.options,o=s.ticks.callback;if(o)return Je(o,[t,e,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],m=i[e],p=c&&f&&m&&m.major;return this._adapter.format(t,r||(p?f:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=wr(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,ny(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(Z2(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Y5(t.sort(J2))}}Ft(Pu,"id","time"),Ft(Pu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Bh(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ns(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ns(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(t-s)/c:a}class ig extends Pu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Bh(e,this.min),this._tableRange=Bh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Bh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Bh(this._table,i*this._tableRange+this._minPos,!0)}}Ft(ig,"id","timeseries"),Ft(ig,"defaults",Pu.defaults);var $k=Object.freeze({__proto__:null,CategoryScale:Zp,LinearScale:tg,LogarithmicScale:eg,RadialLinearScale:Hc,TimeScale:Pu,TimeSeriesScale:ig});const Gk=[Z3,TC,xk,$k];_r.register(...Gk);let au="usuarios",Rc=[];function Kk(n){Yk(),NI(n),Jk(n),Zk(),lu(au)}function lu(n){const t=document.querySelectorAll(".nav-link"),e={usuarios:document.getElementById("usuariosSection"),inventario:document.getElementById("inventarioSection"),reportes:document.getElementById("reportesSection"),analitica:document.getElementById("analiticaSection")};t.forEach(i=>{i.dataset.section===n?i.classList.add("active"):i.classList.remove("active")}),Object.keys(e).forEach(i=>{e[i]&&(e[i].style.display=i===n?"block":"none")}),au=n,n==="analitica"&&Xk()}function Yk(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.dataset.section;i&&lu(i)})})}function Xk(){return nt(this,null,function*(){try{const n=yield BP.obtenerDatosAnalisis();if(n.exito){const t=document.getElementById("analiticaContent");t.innerHTML=jP(n.datos),Qk(n.datos)}}catch(n){console.error("Error al cargar datos de análisis:",n)}})}function Qk(n){Rc.forEach(r=>r.destroy()),Rc=[];const t=document.getElementById("consumoSemanalChart");if(t){const r=new _r(t,{type:"bar",data:{labels:n.estadisticas.semanal.map(s=>s.nombre),datasets:[{label:"Consumo Semanal",data:n.estadisticas.semanal.map(s=>s.cantidad),backgroundColor:"rgba(99, 102, 241, 0.5)",borderColor:"rgb(99, 102, 241)",borderWidth:1}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}});Rc.push(r)}const e=document.getElementById("consumoMensualChart");if(e){const r=new _r(e,{type:"line",data:{labels:n.estadisticas.mensual.map(s=>s.nombre),datasets:[{label:"Consumo Mensual",data:n.estadisticas.mensual.map(s=>s.cantidad),fill:!1,borderColor:"rgb(79, 70, 229)",tension:.1}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}});Rc.push(r)}const i=document.getElementById("consumoSemestralChart");if(i){const r=new _r(i,{type:"line",data:{labels:n.estadisticas.semestral.map(s=>s.nombre),datasets:[{label:"Tendencia Semestral",data:n.estadisticas.semestral.map(s=>s.cantidad),fill:!0,backgroundColor:"rgba(79, 70, 229, 0.1)",borderColor:"rgb(79, 70, 229)",tension:.4}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}});Rc.push(r)}}function Jk(n){const t=document.getElementById("newProductBtn");t&&t.addEventListener("click",()=>{const e=document.getElementById("productModal"),i=document.getElementById("productForm");i.reset(),e.style.display="flex";const r=s=>nt(this,null,function*(){s.preventDefault();const o={nombre:document.getElementById("productName").value,cantidad:parseFloat(document.getElementById("productQuantity").value),unidad:document.getElementById("productUnit").value,precio:parseFloat(document.getElementById("productPrice").value),tipo:document.getElementById("productType").value};try{const a=yield _i.crearProducto(o);a.exito?(e.style.display="none",i.removeEventListener("submit",r),n.onStatusUpdate&&(yield n.onStatusUpdate()),lu(au)):alert("Error al crear producto: "+a.mensaje)}catch(a){console.error("Error al crear producto:",a),alert("Error al crear producto")}});i.addEventListener("submit",r),document.getElementById("cancelProductBtn").addEventListener("click",()=>{e.style.display="none",i.removeEventListener("submit",r)})}),document.querySelectorAll('.edit-btn[data-type="product"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id,s=(yield _i.obtenerTodosProductos()).datos.find(o=>o.id===i);if(s){const o=document.getElementById("productModal"),a=document.getElementById("productForm");document.getElementById("productName").value=s.nombre,document.getElementById("productQuantity").value=s.cantidad,document.getElementById("productUnit").value=s.unidad,document.getElementById("productPrice").value=s.precio,document.getElementById("productType").value=s.tipo,o.style.display="flex";const l=c=>nt(this,null,function*(){c.preventDefault();const h={nombre:document.getElementById("productName").value,cantidad:parseFloat(document.getElementById("productQuantity").value),unidad:document.getElementById("productUnit").value,precio:parseFloat(document.getElementById("productPrice").value),tipo:document.getElementById("productType").value};try{const f=yield _i.actualizarProducto(i,h);f.exito?(o.style.display="none",a.removeEventListener("submit",l),n.onStatusUpdate&&(yield n.onStatusUpdate()),lu(au)):alert("Error al actualizar producto: "+f.mensaje)}catch(f){console.error("Error al actualizar producto:",f),alert("Error al actualizar producto")}});a.addEventListener("submit",l),document.getElementById("cancelProductBtn").addEventListener("click",()=>{o.style.display="none",a.removeEventListener("submit",l)})}}))}),document.querySelectorAll('.delete-btn[data-type="product"]').forEach(e=>{e.addEventListener("click",()=>nt(this,null,function*(){const i=e.dataset.id;if(yield Yd("producto","¿Está seguro de que desea eliminar este producto?"))try{const s=yield _i.eliminarProducto(i);s.exito?(n.onStatusUpdate&&(yield n.onStatusUpdate()),lu(au)):alert("Error al eliminar producto: "+s.mensaje)}catch(s){console.error("Error al eliminar producto:",s),alert("Error al eliminar producto")}}))})}function Zk(){const n=document.getElementById("generarReporteBtn");n&&n.addEventListener("click",()=>nt(this,null,function*(){const t=document.getElementById("reporteFechaDesde").value,e=document.getElementById("reporteFechaHasta").value;if(!t||!e){alert("Por favor, seleccione un rango de fechas");return}try{const i=yield VP.generarReporteVentas(t,e);if(i.exito){const r=window.URL.createObjectURL(i.datos),s=document.createElement("a");s.href=r,s.download=`reporte-ventas-${t}-${e}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}else alert("Error al generar el reporte: "+i.mensaje)}catch(i){console.error("Error al generar reporte:",i),alert("Error al generar el reporte")}}))}function tN(){document.querySelectorAll(".nav-link").forEach(n=>{n.addEventListener("click",t=>{t.preventDefault();const e=t.target.dataset.section;e&&(document.querySelectorAll(".nav-link").forEach(i=>i.classList.remove("active")),t.target.classList.add("active"),document.getElementById("pedidosSection").style.display=e==="pedidos"?"block":"none",document.getElementById("historialSection").style.display=e==="historial"?"block":"none")})})}function eN(n,t){const e=()=>{const i=document.getElementById("aplicarFiltros"),r=document.getElementById("limpiarFiltros"),s=document.getElementById("clienteFilter"),o=document.getElementById("fechaDesde"),a=document.getElementById("fechaHasta");if(!i||!r||!s||!o||!a)return;const l=()=>{const c={cliente:s.value.toLowerCase().trim(),fechaDesde:o.value,fechaHasta:a.value},h=n.filter(f=>{const m=!c.cliente||f.nombreCliente.toLowerCase().includes(c.cliente);let p=!0;const v=new Date(f.fechaCreacion);if(c.fechaDesde){const _=new Date(c.fechaDesde);_.setHours(0,0,0,0),p=p&&v>=_}if(c.fechaHasta){const _=new Date(c.fechaHasta);_.setHours(23,59,59,999),p=p&&v<=_}return m&&p});t.onFiltrar(h)};i.addEventListener("click",l),r.addEventListener("click",()=>{s.value="",o.value="",a.value="",t.onFiltrar(n)}),[s,o,a].forEach(c=>{c.addEventListener("keypress",h=>{h.key==="Enter"&&(h.preventDefault(),l())})})};return e(),{actualizarFiltros:e}}function nN(n,t){const e=n.filter(r=>r.estado==="completed");tN();const i=eN(e,{onFiltrar:r=>{const s=document.getElementById("historialContent");s&&(s.innerHTML=ry(r),i.actualizarFiltros())}})}let Ro=null,Do="login",Is=null;function Vb(){Is&&Is();const n=Hh(Wo(Ni,"pedidos"));Is=gE(n,t=>{Ro&&Do!=="login"&&zl()})}function Cd(){return nt(this,null,function*(){try{const n=document.querySelector("#app");Ro?(yield zl(),gI(Ro,{onNavigate:t=>{Do=t,zl()},onLogout:()=>{Is&&(Is(),Is=null),Ro=null,Do="login",Cd()}})):(Is&&(Is(),Is=null),n.innerHTML=iy(),v5({onLoginSuccess:t=>{Ro=t,Do=t.obtenerVistaDefecto(),Vb(),Cd()}}))}catch(n){console.error("Error al inicializar la aplicación:",n),document.querySelector("#app").innerHTML=`
      <div class="error-container">
        <h2>Error de Inicialización</h2>
        <p>Ha ocurrido un error al inicializar la aplicación. Por favor, intente nuevamente.</p>
        <button onclick="window.location.reload()">Recargar página</button>
      </div>
    `}})}function zl(){return nt(this,null,function*(){const n=document.querySelector("#app");Ro.puedeAccederVista(Do)||(Do=Ro.obtenerVistaDefecto());const t={onStatusUpdate:()=>zl(),onEdit:()=>zl(),onDelete:()=>zl()};try{switch(Do){case"admin":const e=yield Vc.obtenerTodos(),i=yield _i.obtenerTodosProductos();n.innerHTML=O_(e.datos,i.datos),Kk(t);break;case"ventas":const r=yield sr.obtenerTodosPedidos();n.innerHTML=k_(r.datos),yI(t),nN(r.datos,t);break;case"produccion":const s=yield sr.obtenerTodosPedidos(),o=yield _i.obtenerTodosProductos();n.innerHTML=R_(s.datos,o.datos),wI(t);break;case"decoracion":const a=yield sr.obtenerTodosPedidos();n.innerHTML=M_(a.datos),TI(t);break;default:n.innerHTML=iy(),v5({onLoginSuccess:l=>{Ro=l,Do=l.obtenerVistaDefecto(),Vb(),Cd()}})}}catch(e){console.error("Error al renderizar la vista:",e),n.innerHTML=`
      <div class="error-container">
        <h2>Error</h2>
        <p>Ha ocurrido un error al cargar la vista. Por favor, intente nuevamente.</p>
        <button onclick="window.location.reload()">Recargar página</button>
      </div>
    `}})}Cd();export{ze as _,Wf as c,aN as g};
